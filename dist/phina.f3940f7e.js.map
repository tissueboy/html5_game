{"version":3,"sources":["phina.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["Object","defineProperty","prototype","value","name","fn","enumerable","writable","$method","set","configurable","get","param","self","keys","forEach","key","index","call","split","reduce","t","v","i","arr","length","hasOwnProperty","Array","arguments","source","property","undefined","console","assert","format","temp","indexOf","slice","callback","target","descriptor","getOwnPropertyDescriptor","getPrototypeOf","tempKey","tempValue","accessor","old","accesskey","observe","obj","unobserve","Number","figure","base","Math","pow","round","ceil","floor","toString","n","ch","str","replace","limit","step","results","r","push","abs","acos","asin","atan","cos","exp","log","max","min","clamp","exponent","sin","sqrt","tan","RAD_TO_DEG","DEG_TO_RAD","String","arg","rep_fn","m","k","args","parseInt","word","capitalizeFirstLetter","charAt","toUpperCase","substr","toLowerCase","toCRC32","join","re","RegExp","match","apply","len","sep","eq","params","each","pos","substring","val","num","isNaN","table","crc","x","y","iTop","charCodeAt","result","deepEquals","item","fromIndex","some","elm","a","b","splice","randint","deep","filter","level","concat","previousValue","curentValue","isArray","flatten","clone","start","end","clear","j","swap","sum","range","arrayLike","context","Symbol","iterator","iteratorResult","next","done","bind","map","func","Infinity","maxValue","minValue","maxIndex","minIndex","MONTH","WEEK","Date","pattern","year","getFullYear","month","getMonth","date","getDate","day","getDay","hours","getHours","minutes","getMinutes","seconds","getSeconds","millseconds","getMilliseconds","patterns","padding","regstr","birthday","when","bn","getTime","setFullYear","wn","PI","PHI","degToRad","deg","radToDeg","rad","random","perecent","phina","VERSION","module","ns","isNode","global","window","navigator","ua","userAgent","exports","namespace","props","_class","instance","_creator","init","superClass","create","owner","superInit","__counter","_hierarchies","superMethod","shift","__counters","rst","constructor","$extend","_super","_accessor","forIn","_static","_defined","chachedClasses","path","pathes","current","p","className","last","parentPath","lastIndexOf","parent","using","_classDefinedCallback","_superClass","define","createClass","register","_mainListeners","_mainLoaded","doc","document","addEventListener","readyState","run","listeners","setTimeout","geom","Vector2","equals","add","sub","mul","div","negate","dot","cross","lengthSquared","distance","distanceSquared","degree","util","Random","randfloat","normalize","getDirection","angle","toDegree","toAngle","atan2","fromAngle","fromDegree","toRadian","rotate","center","x1","y1","x2","y2","lhs","rhs","manhattanDistance","normal","reflect","wall","lerp","slerp","ZERO","LEFT","RIGHT","UP","DOWN","z","identity","m00","m01","m02","m10","m11","m12","m20","m21","m22","Matrix33","determinant","transpose","invert","det","multiply","mat","tm","om","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","multiplyVector2","vx","vy","getRow","row","getCol","col","IDENTITY","width","height","moveTo","moveBy","setSize","w","h","top","right","bottom","left","contains","Rect","toCircle","radius","Circle","centerX","centerY","toArray","lenX","lenY","lenSquared","toRect","size","testCircleCircle","circle0","circle1","testRectRect","rect0","rect1","testCircleRect","circle","rect","bigRect","c","testCircleLine","p1","p2","r2","p3","p1p2","p1p3","p2p3","cross2","length2","d2","dot1","dot2","canvas","CanvasRenderingContext2D","webGL","createElement","getContext","webAudio","AudioContext","webkitAudioContext","mozAudioContext","_listeners","on","type","listener","off","fire","e","oldEventName","flare","one","has","methodMap","removeEventListener","clearEventListener","hasEventListener","dispatchEvent","dispatchEventByType","EventDispatcher","time","fromTo","beginProps","finishProps","duration","easing","changeProps","to","from","by","yoyo","gain","seek","forward","backward","_easing","Tween","EASING","default","d","linear","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeOutInCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeOutInQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeOutInQuint","easeInSine","easeOutSine","easeInOutSine","easeOutInSine","easeInExpo","easeOutExpo","easeInOutExpo","easeOutInExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeOutInCirc","easeInElastic","s","easeOutElastic","easeInOutElastic","easeOutInElastic","easeInBack","easeOutBack","easeInOutBack","easeOutInBack","easeInBounce","easeOutBounce","easeInOutBounce","easeOutInBounce","frame","deltaTime","elapsedTime","fps","tick","now","currentTime","startTime","elapsed","delay","frameTime","resume","stop","rewind","_fps","columns","loop","offset","unitWidth","span","unit","_observe","defaultValue","wait","status","resultValue","_queue","resolve","reject","then","Flow","flow","all","flows","count","g","setFromNumber","setFromArray","setFromObject","setFromString","color","Color","stringToNumber","setSmart","toStyleAsHex","toStyleAsRGB","toStyleAsRGBA","toStyle","COLOR_LIST","strToNum","match_set","MATCH_SET_LIST","reg","exec","HSLtoRGB","l","m2","m1","HSLAtoRGBA","createStyleRGB","createStyleRGBA","createStyleHSL","createStyleHSLA","parseFloat","seed","MAX","randbool","randarray","_seed","getSeed","setSeed","xor32","uuid","performance","parse","text","isDecode","location","search","decode","decodeURIComponent","pair","stringify","isEncode","encode","encodeURIComponent","defaults","contentType","responseType","data","url","request","options","$safe","xhr","XMLHttpRequest","onreadystatechange","response","open","send","post","put","del","serverError","notFound","loadError","src","loaded","load","_load","isLoaded","loadDummy","assets","image","sound","spritesheet","asset","cache","counter","AssetLoader","assetLoadFunctions","AssetManager","progress","dummy","texture","Texture","Sound","ss","SpriteSheet","script","Script","font","Font","setFontName","json","File","dataType","xml","responseText","JSON","DOMParser","parseFromString","domElement","onload","body","appendChild","Image","isLocal","protocol","test","onerror","error","first","graphics","Canvas","drawImage","transmit","imageData","getImageData","putImageData","filters","times","pixel","_loop","_loopStart","_loopEnd","_playbackRate","getAudioContext","gainNode","createGain","play","createBufferSource","buffer","loopStart","loopEnd","playbackRate","connect","getMasterGain","pause","_oscillator","oscillator","createOscillator","destination","loadFromBuffer","createBuffer","channel","getChannelData","setLoop","setLoopStart","setLoopEnd","setPlaybackRate","_loadFromURIScheme","_loadFromFile","decodeAudioData","warn","byteString","atob","unescape","Uint8Array","volume","_masterGain","Support","musicVolume","muteFlag","currentMusic","getVolume","fade","setVolume","mute","unmute","getVolumeMusic","isMute","playMusic","fadeTime","stopMusic","music","unitTime","id","setInterval","rate","clearInterval","pauseMusic","resumeMusic","setVolumeMusic","setup","_setupFrame","_setupAnim","animations","frames","unitHeight","rows","cols","xIndex","yIndex","frequency","anim","getFrame","getAnimation","fontName","querySelector","fontFaceStyleElement","innerText","textContent","_checkLoaded","DEFAULT_FONT","checkText","fromCharCode","before","measureText","timeoutCount","checkLoadFont","after","getFontName","position","startPosition","deltaPosition","prevPosition","_tempPosition","maxCacheNum","input","Input","minDistance","maxDistance","cachePositions","flickVelocity","flags","update","_moveFlag","_start","flag","_move","_end","normalLen","style","dx","dy","fx","fy","pointX","pointY","getButton","button","BUTTON_MAP","getButtonDown","getButtonUp","BUTTON_LEFT","BUTTON_MIDDLE","BUTTON_RIGHT","Mouse","getPointing","getPointingStart","getPointingEnd","isMulti","getTouch","getTouchStart","getTouchEnd","Touch","touchMap","touches","_id","Uint32Array","changedTouches","touch","getEmpty","identifier","removeTouch","released","press","down","up","_keydown","_keyup","_keypress","keyCode","getKey","Keyboard","KEY_CODE","getKeyDown","getKeyUp","getKeyAngle","arrowBit","ARROW_BIT_TO_ANGLE_TABLE","getKeyDirection","direction","SQRT2","setKey","clearKey","gamepads","_created","_rawgamepads","_prevTimestamps","_getGamepads","getGamepads","webkitGetGamepads","gamepad","connected","_poll","rawgamepad","timestamp","_updateStateEmpty","_updateState","Gamepad","dispose","erase","isConnected","rawGamepads","isAvailable","nav","buttons","sticks","mapping","pressed","BUTTON_CODE","getStickAngle","stickId","stick","getStickDirection","iend","_updateButton","jend","axes","_updateStick","buttonId","ANALOGUE_BUTTON_THRESHOLD","axisName","gravity","Vector3","acceleration","rotation","orientation","isMobile","accelerationIncludingGravity","rotationRate","beta","gamma","alpha","app","root","_updateElement","element","awake","children","tempChildren","_checkPoint","pointers","__checkPoint","interactive","prevOverFlag","_overFlags","overFlag","hitTest2","pointer","_touchFlags","_enable","multiTouch","cursor","hover","_holds","enable","disable","check","_checkElement","hitTest","over","boundingType","_clicked","_scenes","Scene","_sceneIndex","updater","Updater","Interactive","ticker","Ticker","replaceScene","scene","currentScene","pushScene","popScene","pop","prevScene","enableStats","Stats","stats","STATS_URL","enableDatGUI","dat","gui","GUI","URL","_update","_draw","rootScene","addChild","child","remove","addChildTo","addChildAt","getChildAt","at","getChildByName","getChildIndex","getParent","getRoot","removeChild","isAwake","wakeUp","sleep","fromJSON","createChildren","toJSON","scale","origin","Object2D","scaleX","scaleY","originX","originY","_matrix","_worldMatrix","hitTestRect","hitTestCircle","globalToLocal","hitTestElement","matrix","setInteractive","setX","setY","setPosition","setRotation","setScale","setOrigin","setWidth","setHeight","setBoundingType","_calcWorldMatrix","_cachedRotation","_sr","_cr","local","world","_width","_diameter","_height","_radius","exit","nextLabel","nextArguments","setTarget","getTarget","isAttached","attachTo","attach","detach","Element","accessory","accessories","Tweener","updateType","_init","_tasks","_index","playing","_updateTask","setUpdateType","_add","mode","values","rotateTo","rotateBy","scaleTo","scaleBy","fadeOut","fadeIn","task","tweens","method","_tween","_getDefaultDuration","_updateTween","_wait","_updateWait","tween","_getUnitTime","UPDATE_MAP","delta","getter","_tweener","initialPosition","_dragging","Draggable","_lock","back","tweener","lock","unlock","_draggable","friction","velocity","vertical","horizontal","cacheList","reverse","find","cancel","_flickable","Flickable","paused","finished","fit","currentAnimation","currentFrameIndex","_updateFrame","gotoAndPlay","gotoAndStop","srcRect","currentAnimationName","nul","force","addForce","setGravity","setFriction","fr","_physical","Physical","Event","preventDefault","stopPropagation","MouseEvent","clientX","getBoundingClientRect","clientY","TouchEvent","lineCap","lineJoin","setSizeToScreen","margin","innerWidth","innerHeight","fitScreen","isEver","_fitFunc","rateWidth","rateHeight","clearRect","clearColor","fillStyle","save","setTransform","fillRect","restore","beginPath","closePath","lineTo","quadraticCurveTo","bezierCurveTo","fill","stroke","clip","drawPoint","strokeRect","line","x0","y0","drawLine","drawDashLine","patternTable","drawArrow","arrowRadius","fillPolygon","lines","strokeLines","fillLines","roundRect","arc","fillRoundRect","strokeRoundRect","fillCircle","strokeCircle","startAngle","endAngle","anticlockwise","fillArc","strokeArc","pie","fillPie","strokePie","polygon","sides","offsetAngle","radDiv","radOffset","strokePolygon","star","sideIndent","sideIndentRadius","fillStar","strokeStar","heart","half_radius","q","offsetY","fillHeart","strokeHeart","ellipse","ctx","kappa","ox","oy","xe","ye","xm","ym","fillEllipse","strokeEllipse","fillText","_context","strokeText","resetTransform","transformCenter","translate","saveAsImage","mime_type","data_url","toDataURL","strokeStyle","globalAlpha","globalCompositeOperation","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","miterLimit","lineWidth","textAlign","textBaseline","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","createLinearGradient","createRadialGradient","objectURL","gif","GIF","workers","quality","blob","createObjectURL","setOption","setOptions","recordingTime","addFrame","copy","render","workerScript","repeat","transparent","background","visible","blendMode","renderChildBySelf","_worldAlpha","setVisible","show","hide","_calcWorldAlpha","worldAlpha","draw","Shape","backgroundColor","strokeWidth","shadow","watchDraw","_dirtyDraw","calcCanvasWidth","calcCanvasHeight","calcCanvasSize","isStrokable","prerender","postrender","renderFill","renderStroke","watchRenderProperty","$watch","newVal","oldVal","watchRenderProperties","cornerRadius","display","cornerAngle","PathShape","paths","setPaths","addPaths","addPath","getPath","getPaths","changePath","maxX","maxY","minX","minY","setImage","_image","frameIndex","setFrameIndex","tw","th","_frameIndex","idx","Label","fontSize","fontWeight","fontFamily","align","baseline","lineHeight","_lines","lineSize","_offset","_text","DisplayScene","renderer","CanvasRenderer","gridX","Grid","gridY","_render","camera","light","THREE","PerspectiveCamera","DirectionalLight","WebGLRenderer","setClearColor","renderChildren","renderObject","query","mouse","touchList","TouchList","keyboard","accelerometer","Accelerometer","eventName","_checkClick","_check","CanvasApp","append","pixelated","imageRendering","ui","Button","fontColor","gaugeColor","_value","visualValue","animation","animationTime","isFull","isEmpty","setValue","_maxValue","ontween","getRate","showPercentage","textWidthCache","LabelArea","_lineUpdate","verticalAlign","scroll","scrollX","scrollY","getOffsetY","verticalAlignToOffsetMap","getOffsetX","alignToOffsetMap","getTextWidthCache","spliceLines","rowWidth","localLines","totalWidth","getLines","offsetX","middle","enableScroll","setScenes","scenes","gotoScene","startLabel","onnext","commonArguments","sceneIndex","label","labelToIndex","klass","initArguments","gotoNext","nextIndex","getCurrentIndex","getCurrentLabel","indexToLabel","game","SplashScene","imageURL","sprite","Sprite","TitleScene","titleLabel","title","exitType","touchLabel","message","backgroundImage","ResultScene","scoreText","scoreLabel","score","messageLabel","shareButton","playButton","onpush","onclick","social","Twitter","createURL","hashtags","href","LoadingScene","gauge","loader","lie","onprogress","onfull","CountScene","countList","_updateCount","endFlag","PauseScene","ManagerScene","loadingOptions","loadingClass","loading","onloaded","debug","_enableDebugger","autoPause","pauseScene","f","addFolder","funcs","BASE_URL","baseURL","queries","euc","Box2D","box2d","b2","Vec2","Common","b2Vec2","AABB","Collision","b2AABB","BodyDef","Dynamics","b2BodyDef","Body","b2Body","FixtureDef","b2FixtureDef","Fixture","b2Fixture","World","b2World","MassData","Shapes","b2MassData","PolygonShape","b2PolygonShape","CircleShape","b2CircleShape","DebugDraw","b2DebugDraw","MouseJointDef","Joints","b2MouseJointDef","worldScale","_scale","_setupDebugDraw","debugDraw","SetSprite","SetDrawScale","SetLineThickness","SetAlpha","SetFillAlpha","SetFlags","e_shapeBit","SetDebugDraw","createBody","Box2dBody","timeStep","velocityIterations","positionIterations","Step","ClearForces","DrawDebugData","shape","SetPosition","SetAngle","_bindFixture","GetPosition","GetAngle","_setupBody","bodyDef","b2_dynamicBody","b2_kinematicBody","b2_staticBody","Set","CreateBody","fixture","GetFixtureList","DestroyFixture","SetAsBox","density","restitution","CreateFixture","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","ws","onmessage","event","handled","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","getElementById","stackTrace","innerHTML","getParents","modules","parents","dep","Function","deps","cached","cb"],"mappings":"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","file":"phina.f3940f7e.js","sourceRoot":"..","sourcesContent":["/* \n * phina.js 0.2.0\n * phina.js is a game library in javascript\n * MIT Licensed\n * \n * Copyright (C) 2015 phi, http://phinajs.com\n */\n\n\n'use strict';\n\n/*\n *\n */\n\n\n;(function() {\n  /**\n   * @class global.Object\n   * Objectの拡張\n   */\n\n  \n  /**\n   * @method property\n   * 変数を追加\n   * @param   {String} key name\n   * @param   {Object} param\n   */\n  // Object.defineProperty(Object.prototype, \"property\", {\n  //   value: function(name, val) {\n  //     Object.defineProperty(this, name, {\n  //       value: val,\n  //       enumerable: true,\n  //       writable: true\n  //     });\n  //   }\n  // });\n\n  /**\n   * @method method\n   * 関数を追加\n   * @param   {String} key name\n   * @param   {Function} function\n   */\n  Object.defineProperty(Object.prototype, \"$method\", {\n    value: function(name, fn) {\n      Object.defineProperty(this, name, {\n        value: fn,\n        enumerable: false,\n        writable: true\n      });\n    }\n  });\n\n\n\n  /**\n   * @method setter\n   * セッターを定義する\n   */\n  Object.prototype.$method(\"setter\", function(name, fn){\n    Object.defineProperty(this, name, {\n      set: fn,\n      enumerable: false,\n      configurable: true,\n    });\n  });\n\n  /**\n   * @method getter\n   * ゲッターを定義する\n   */\n  Object.prototype.$method(\"getter\", function(name, fn){\n    Object.defineProperty(this, name, {\n      get: fn,\n      enumerable: false,\n      configurable: true,\n    });\n  });\n\n  /**\n   * @method accessor\n   * アクセッサ(セッター/ゲッター)を定義する\n   */\n  Object.prototype.$method(\"accessor\", function(name, param) {\n    Object.defineProperty(this, name, {\n      set: param[\"set\"],\n      get: param[\"get\"],\n      enumerable: false,\n      configurable: true,\n    });\n  });\n\n\n  /**\n   * @method forIn\n   * オブジェクト用ループ処理\n   */\n  Object.prototype.$method(\"forIn\", function(fn, self) {\n    self = self || this;\n\n    Object.keys(this).forEach(function(key, index) {\n      var value = this[key];\n\n      fn.call(self, key, value, index);\n    }, this);\n\n    return this;\n  });\n\n  /**\n   * @method  $get\n   * パス指定で値を取得\n   */\n  Object.prototype.$method('$get', function(key) {\n    return key.split('.').reduce(function(t, v) {\n      return t && t[v];\n    }, this);\n  });\n\n  /**\n   * @method  $set\n   * パス指定で値を設定\n   */\n  Object.prototype.$method('$set', function(key, value) {\n    key.split('.').reduce(function(t, v, i, arr) {\n      if (i === (arr.length-1)) {\n        t[v] = value;\n      }\n      else {\n        if (!t[v]) t[v] = {};\n        return t[v];\n      }\n    }, this);\n  });\n\n  /**\n   * @method  $has\n   * そのプロパティを持っているかを判定する\n   */\n  Object.prototype.$method(\"$has\", function(key) {\n    return this.hasOwnProperty(key);\n  });\n\n  /**\n   * @method  $extend\n   * 他のライブラリと競合しちゃうので extend -> $extend としました\n   */\n  Object.prototype.$method(\"$extend\", function() {\n    Array.prototype.forEach.call(arguments, function(source) {\n      for (var property in source) {\n        this[property] = source[property];\n      }\n    }, this);\n    return this;\n  });\n\n\n  /**\n   * @method  $safe\n   * 安全拡張\n   * 上書きしない\n   */\n  Object.prototype.$method(\"$safe\", function(source) {\n    Array.prototype.forEach.call(arguments, function(source) {\n      for (var property in source) {\n        if (this[property] === undefined) this[property] = source[property];\n      }\n    }, this);\n    return this;\n  });\n  \n  \n  /**\n   * @method  $strict\n   * 厳格拡張\n   * すでにあった場合は警告\n   */\n  Object.prototype.$method(\"$strict\", function(source) {\n    Array.prototype.forEach.call(arguments, function(source) {\n      for (var property in source) {\n        console.assert(!this[property], \"tm error: {0} is Already\".format(property));\n        this[property] = source[property];\n      }\n    }, this);\n    return this;\n  });\n\n  /**\n   * @method  $pick\n   * ピック\n   */\n  Object.prototype.$method(\"$pick\", function() {\n    var temp = {};\n\n    Array.prototype.forEach.call(arguments, function(key) {\n      if (key in this) temp[key] = this[key];\n    }, this);\n\n    return temp;\n  });\n\n  /**\n   * @method  $omit\n   * オミット\n   */\n  Object.prototype.$method(\"$omit\", function() {\n    var temp = {};\n\n    for (var key in this) {\n      if (Array.prototype.indexOf.call(arguments, key) == -1) {\n        temp[key] = this[key];\n      }\n    }\n\n    return temp;\n  });\n\n  /**\n   * @method  $toArray\n   * 配列化\n   */\n  Object.prototype.$method(\"$toArray\", function() {\n    return Array.prototype.slice.call(this);\n  });\n\n  Object.prototype.$method('$watch', function(key, callback) {\n    var target = this;\n    var descriptor = null;\n\n    while(target) {\n      descriptor = Object.getOwnPropertyDescriptor(target, key);\n      if (descriptor) {\n        break;\n      }\n      target = Object.getPrototypeOf(target);\n    }\n\n    // すでにアクセッサーとして存在する場合\n    if (descriptor) {\n      // データディスクリプタの場合\n      if (descriptor.value !== undefined) {\n        var tempKey = '__' + key;\n        var tempValue = this[key];\n\n        this[tempKey] = tempValue;\n\n        this.accessor(key, {\n          get: function() {\n            return this[tempKey];\n          },\n          set: function(v) {\n            var old = this[tempKey];\n            this[tempKey] = v;\n            callback.call(this, v, old);\n          },\n        });\n      }\n      // アクセサディスクリプタの場合\n      else {\n        this.accessor(key, {\n          get: function() {\n            return descriptor.get.call(this);\n          },\n          set: function(v) {\n            var old = descriptor.get.call(this);\n            descriptor.set.call(this, v);\n            callback.call(this, v, old);\n          },\n        });\n      }\n    }\n    else {\n      var accesskey = '__' + key;\n\n      this.accessor(key, {\n        get: function() {\n          return this[accesskey];\n        },\n        set: function(v) {\n          var old = this[accesskey];\n          this[accesskey] = v;\n          callback.call(this, v, old);\n        },\n      });\n    }\n  });\n\n  if (!Object.observe) {\n    Object.$method('observe', function(obj, callback) {\n      var keys = Object.keys(obj);\n      keys.forEach(function(key) {\n        var tempKey = '__' + key;\n        var tempValue = obj[key];\n        obj[tempKey] = tempValue;\n        \n        obj.accessor(key, {\n          get: function() {\n            return this[tempKey];\n          },\n          set: function(v) {\n            this[tempKey] = v;\n            callback();\n          },\n        });\n      });\n    });\n  }\n\n  if (!Object.unobserve) {\n    Object.$method('unobserve', function(obj, callback) {\n      console.assert(false);\n    });\n  }\n\n})();\n\n\n\n/*\n * number.js\n */\n\n\n;(function() {\n  /**\n   * @class global.Number\n   * # 拡張した Number クラス\n   * 数値を扱う Number クラスを拡張しています。\n   */\n\n  /**\n   * @method round\n   * 指定した小数の位を四捨五入した値を返します。\n   *\n   * 負の値を指定すると整数部の位を四捨五入できます。\n   *\n   * ### Example\n   *     (13.87).round(); // => 14\n   *     (-1.87).round(); // => -2\n   *     (-1.27).round(); // => -1\n   *     \n   *     (2.345).round(); // => 2\n   *     (2.345).round(1); // => 2.3\n   *     (2.345).round(2); // => 2.35\n   *\n   *     (12345.67).round(-3); // => 12000\n   *\n   * @param {Number} [figure=0] 四捨五入する位\n   * @return {Number} 小数第 figure 位で四捨五入した値\n   */\n  Number.prototype.$method(\"round\", function(figure) {\n    figure = figure || 0;\n    var base = Math.pow(10, figure);\n    var temp = this * base;\n    temp = Math.round(temp);\n    return temp/base;\n  });\n  \n  /**\n   * @method ceil\n   * 指定した小数の位を切り上げた値を返します。\n   *\n   * 負の値を指定すると整数部の位を切り上げられます。\n   *\n   * ### Example\n   *     (-1.27).ceil(); // => -1\n   *     (-1.87).ceil(); // => -1\n   *     \n   *     (2.345).ceil(); // => 3\n   *     (2.345).ceil(1); // => 2.4\n   *     (2.345).ceil(2); // => 2.35\n   *\n   *     (12345.67).ceil(-3); // => 13000\n   *\n   * @param {Number} [figure=0] 切り上げる位\n   * @return {Number} 小数第 figure 位で切り上げた値\n   */\n  Number.prototype.$method(\"ceil\",  function(figure) {\n    figure = figure || 0;\n    var base = Math.pow(10, figure);\n    var temp = this * base;\n    temp = Math.ceil(temp);\n    return temp/base;\n  });\n\n  /**\n   * @method floor\n   * 指定した小数の位を切り下げた値を返します。\n   *\n   * 負の値を指定すると整数部の位を切り下げられます。\n   *\n   * ### Example\n   *     (-1.27).floor(); // => -2\n   *     (-1.87).floor(); // => -2\n   *     \n   *     (2.345).floor(); // => 2\n   *     (2.345).floor(1); // => 2.3\n   *     (2.345).floor(2); // => 2.34\n   *\n   *     (12345.67).floor(-3); // => 12000\n   *\n   * @param {Number} [figure=0] 切り下げる位\n   * @return {Number} 小数第 figure 位で切り下げた値\n   */\n  Number.prototype.$method(\"floor\",  function(figure) {\n    figure = figure || 0;\n    var base = Math.pow(10, figure);\n    var temp = this * base;\n    temp = Math.floor(temp);\n    \n    // ~~this\n    // this|0\n    \n    return temp/base;\n  });\n  \n  /**\n   * @method toInt\n   * 数値を整数に変換します。\n   *\n   * ### Example\n   *     (42.195).toInt(); // => 42\n   *\n   * @return {Number} 整数値\n   */\n  Number.prototype.$method(\"toInt\",  function() {\n    return (this | 0);\n  });\n  \n  /**\n   * @method toHex\n   * 数値を16進数表記にした文字列を返します。\n   *\n   * ### Example\n   *     (26).toHex(); // => \"1a\"\n   *     (-26).toHex(); // => \"-1a\"\n   *     (26.25).toHex(); // => \"1a.4\"\n   *\n   * @return {String} 16進数表記の文字列\n   */\n  Number.prototype.$method(\"toHex\",  function() {\n    return this.toString(16);\n  });\n  \n  /**\n   * @method toBin\n   * 数値を2進数表記にした文字列を返します。\n   *\n   * ### Example\n   *     (6).toBin(); // => \"110\"\n   *     (-6).toBin(); // => \"-110\"\n   *     (0xA3).toBin(); // => \"10100011\"\n   *     (6.25).toHex(); // => \"110.01\"\n   *\n   * @return {String} 2進数表記の文字列\n   */\n  Number.prototype.$method(\"toBin\",  function() {\n    return this.toString(2);\n  });\n  \n  \n  /**\n   * @method toUnsigned\n   * 数値を unsigned int 型に変換します。\n   *\n   * 数値を符号無し整数として評価した値を返します。  \n   * Javascriptのビット演算では数値を符号付きの32bit整数として扱うため、RGBA を\n   * 整数値で表現して演算する場合、期待通りの結果が得られない場合があります。\n   * そこで本関数で unsigned int 型に変換することで期待通りの値を得ることができます。\n   *\n   * ### Example\n   *     rgba = 0xfeffffff & 0xff000000; // => -33554432\n   *     rgba.toHex(); // => \"-2000000\"\n   *     rgba.toUnsigned().toHex(); // => \"fe000000\"\n   *\n   * @return {Number} unsigned int 型に変換した値\n   */\n  Number.prototype.$method(\"toUnsigned\",  function() {\n    return this >>> 0;\n  });\n  \n  /**\n   * @method padding\n   * 指定した桁になるように文字を埋めます。\n   *\n   * ### Example\n   *     (123).padding(5); // => \"00123\"\n   *     (123).padding(5, \"_\"); // => \"__123\"\n   *     (-12).padding(5); // => \"-0012\"\n   *\n   * @param {Number} n 桁数\n   * @param {String} [ch=\"0\"] 埋める文字\n   * @return {String} 桁数を揃えた文字列\n   */\n  Number.prototype.$method(\"padding\",  function(n, ch) {\n    var str = this+'';\n    n  = n-str.length;\n    ch = (ch || '0')[0];\n    \n    while(n-- > 0) { str = ch + str; }\n    \n    if (str.indexOf(\"-\") >= 0) {\n      str = \"-\" + str.replace(\"-\", \"\");\n    }\n\n    return str;\n  });\n\n\n  /**\n   * @method times\n   * 0 から自分自身の数-1まで、カウンタをインクリメントしながら関数を繰り返し実行します。\n   *\n   * ### Example\n   *     arr = [];\n   *     (5).times(function(i){\n   *       arr.push(i);\n   *     }); // => [0, 1, 2, 3, 4]\n   *\n   * @param {Function} fn コールバック関数\n   * @param {Object} [self=this] 関数内で this として参照される値。デフォルトは自分自身。\n   */\n  Number.prototype.$method(\"times\",  function(fn, self) {\n    self = self || this;\n    for (var i=0; i<this; ++i) {\n      fn.call(self, i, this);\n    }\n    return this;\n  });\n\n  /**\n   * @method upto\n   * 自分自身の数から指定した数まで、カウンタをインクリメントしながら関数を繰り返し実行します。\n   *\n   * 指定した数が自分自身の数より小さい場合は関数は実行されません。\n   *\n   * ### Example\n   *     arr = [];\n   *     (6).upto(8, function(i){\n   *       arr.push(i);\n   *     });\n   *     arr; // => [6, 7, 8]\n   *\n   *     (3).upto(0, function(i){\n   *       arr.push(i);\n   *     });\n   *     arr; // => [6, 7, 8]\n   *\n   * @param {Function} fn コールバック関数。引数にカウンタが渡される。\n   * @param {Object} [self=this] 関数内で this として参照される値。デフォルトは自分自身。\n   */\n  Number.prototype.$method(\"upto\",  function(t, fn, self) {\n    self = self || this;\n    for (var i=+this; i<=t; ++i) {\n      fn.call(self, i, this);\n    }\n    return this;\n  });\n  \n  /**\n   * @method downto\n   * 自分自身の数から指定した数まで、カウンタをデクリメントしながら関数を繰り返し実行します。\n   *\n   * 指定した数が自分自身の数より大きい場合は関数は実行されません。\n   *\n   * ### Example\n   *     arr = [];\n   *     (7).downto(4, function(i){\n   *       arr.push(i);\n   *     }); // => [7, 6, 5, 4]\n   *\n   * @param {Function} fn コールバック関数。引数にカウンタが渡される。\n   * @param {Object} [self=this] 関数内で this として参照される値。デフォルトは自分自身。\n   */\n  Number.prototype.$method(\"downto\",  function(t, fn, self) {\n    self = self || this;\n    for (var i=+this; i>=t; --i) {\n      fn.call(self, i, this);\n    }\n    return this;\n  });\n\n  /**\n   * @method step\n   * 自分自身の値から指定した数まで、カウンタを増分させながら関数を繰り返し実行します。\n   *\n   * 上限値や増分値は float 型を指定することができます。\n   *\n   * ### Example\n   *     var arr = [];\n   *     (2.4).step(5.3, 0.8, function(n) {\n   *       arr.push(n);\n   *      }); // => [2.4, 3.2, 4.0, 4.8]\n   *\n   * @param {Number} limit カウンタの上限値\n   * @param {Number} step カウンタを増分する量\n   * @param {Function} fn コールバック関数。引数にカウンタが渡される。\n   * @param {Object} [self=this] 関数内で this として参照される値。デフォルトは自分自身。\n   */\n  Number.prototype.$method(\"step\",  function(limit, step, fn, self) {\n    self = self || this;\n    for (var i=+this; i<=limit; i+=step) {\n      fn.call(self, i, this);\n    }\n    return this;\n  });\n\n  /**\n   * @method map\n   * 0から自分自身の値-1までカウンタをインクリメントさせながらコールバック関数を繰り返し実行し、\n   * その返り値を要素とする配列を生成します。\n   *\n   * ### Example\n   *     (5).map(function(i) {\n   *       return i*i;\n   *     }); // => [0, 1, 4, 9, 16]\n   *\n   * @param {Function} fn コールバック関数。引数にカウンタが渡される。\n   * @param {Object} [self=this] 関数内で this として参照される値。デフォルトは自分自身。\n   * @return {Array} 生成した配列\n   */\n  Number.prototype.$method(\"map\",  function(fn, self) {\n    self = self || this;\n\n    var results = [];\n    for (var i=0; i<this; ++i) {\n      var r = fn.call(self, i);\n      results.push(r);\n    }\n    return results;\n  });\n\n  /**\n   * @method abs\n   * 絶対値を返します。\n   *\n   * ### Example\n   *     (-5).abs(); // => 5\n   *     (+5).abs(); // => 5\n   *\n   * @return {Number} 絶対値\n   */\n  Number.prototype.$method(\"abs\", function() { return Math.abs(this) });\n\n  /**\n   * @method acos\n   * アークコサイン（ラジアン単位）を返します。\n   *\n   * ### Example\n   *     (0).asin(); // => 0\n   *     (1).asin(); // => 1.5707963267948966\n   *\n   * @return {Number} アークコサイン\n   */\n  Number.prototype.$method(\"acos\", function() { return Math.acos(this) });\n\n  /**\n   * @method asin\n   * アークサイン（ラジアン単位）を返します。\n   *\n   * ### Example\n   *     (1).acos(); // => 0\n   *     (-1).acos(); // => 3.141592653589793\n   *\n   * @return {Number} アークサイン\n   */\n  Number.prototype.$method(\"asin\", function() { return Math.asin(this) });\n\n  /**\n   * @method atan\n   * アークタンジェント（ラジアン単位）を返します。\n   *\n   * ### Example\n   *     (0).atan(); // => 0\n   *     (1).atan(); // => 0.7853981633974483\n   *\n   * @return {Number} アークタンジェント\n   */\n  Number.prototype.$method(\"atan\", function() { return Math.atan(this) });\n\n  /**\n   * @method cos\n   * コサイン（ラジアン単位）を返します。\n   *\n   * ### Example\n   *     (Math.PI/3).cos(); // => 0.5\n   *\n   * @return {Number} コサイン\n   */\n  Number.prototype.$method(\"cos\", function() { return Math.cos(this) });\n\n  /**\n   * @method exp\n   * e<sup>this</sup> を返します。ここで e は自然対数の底であるネイピア数（オイラー数）です。\n   *\n   * ### Example\n   *     (2).exp(); // => e<sup>2</sup>\n   *     (0).exp(); // => 1\n   *\n   * @return {Number} e<sup>x</sup>\n   */\n  Number.prototype.$method(\"exp\", function() { return Math.exp(this) });\n\n  /**\n   * @method log\n   * 自然対数を返します。\n   *\n   * ### Example\n   *     (Math.E * Math.E * Math.E).log(); // => 3\n   *     (1).log(); // => 0\n   *     (0).log(); // => -Infinity\n   *\n   * @return {Number} 自然対数\n   */\n  Number.prototype.$method(\"log\", function() { return Math.log(this) });\n\n  /**\n   * @method max\n   * 自分自身と引数の値を比べ、大きい方の値を返します。\n   *\n   * ### Example\n   *     (15).max(10); // => 15\n   *     (15).max(90); // => 90\n   *\n   * @param {Number} value 比較する値\n   * @return {Number} 最大値\n   */\n  Number.prototype.$method(\"max\", function(value) { return Math.max(this, value) });\n\n  /**\n   * @method min\n   * 自分自身と引数の値を比べ、小さい方の値を返します。\n   *\n   * ### Example\n   *     (15).min(10); // => 10\n   *     (15).min(90); // => 15\n   *\n   * @param {Number} value 比較する値\n   * @return {Number} 最小値\n   */\n  Number.prototype.$method(\"min\", function(value) { return Math.min(this, value) });\n\n  /**\n   * @method clamp\n   * 指定した範囲に収めた値を返します。\n   *\n   * ### Example\n   *     (200).clamp(0, 640); // => 200\n   *     (-15).clamp(0, 640); // => 0\n   *     (999).clamp(0, 640); // => 640\n   *\n   * @param {Number} min 範囲の下限\n   * @param {Number} max 範囲の上限\n   * @return {Number} 範囲内に収めた値\n   */\n  Number.prototype.$method(\"clamp\", function(min, max) { return Math.clamp(this, min, max) });\n\n  /**\n   * @method pow\n   * 自分自身を exponent 乗した値、つまり this<sup>exponent</sup> の値を返します。\n   *\n   * ### Example\n   *     (3).pow(2); // => 9\n   *\n   * @param {Number} exponent 累乗する指数\n   * @return {Number} 累乗した結果の値\n   */\n  Number.prototype.$method(\"pow\", function(exponent) { return Math.pow(this, exponent) });\n\n  /**\n   * @method sin\n   * サイン（ラジアン単位）を返します。\n   *\n   * ### Example\n   *     (Math.PI/4).sin(); // => 0.7071067811865476\n   *\n   * @return {Number} サイン\n   */\n  Number.prototype.$method(\"sin\", function() { return Math.sin(this) });\n\n  /**\n   * @method sqrt\n   * 平方根を返します。\n   *\n   * ### Example\n   *     (49).sqrt(); // => 7\n   *\n   * @return {Number} 平方根\n   */\n  Number.prototype.$method(\"sqrt\", function() { return Math.sqrt(this) });\n\n  /**\n   * @method tan\n   * タンジェント（ラジアン単位）を返します。\n   *\n   * ### Example\n   *     (Math.PI/4).tan(); // => 1.0\n   *\n   * @return {Number} タンジェント\n   */\n  Number.prototype.$method(\"tan\", function() { return Math.tan(this) });\n\n  /**\n   * @method toDegree\n   * ラジアンを度に変換します。\n   *\n   * ### Example\n   *     Math.radToDeg(Math.PI/4); // => 45\n   *\n   * @return {Number} 度\n   */\n  Number.prototype.$method(\"toDegree\", function() { return (this*Math.RAD_TO_DEG); });\n\n  /**\n   * @method toRadian\n   * 度をラジアンに変換します。\n   *\n   * ### Example\n   *     (180).toRadian(); // => 3.141592653589793\n   *\n   * @return {Number} ラジアン\n   */\n  Number.prototype.$method(\"toRadian\", function() { return this*Math.DEG_TO_RAD; });\n\n})();\n\n\n/*\n * string.js\n */\n\n\n;(function() {\n  /**\n   * @class global.String\n   * # 拡張した String クラス\n   * 文字列を扱う String クラスを拡張しています。\n   */\n\n  /**\n   * @method format\n   * フォーマットに引数を適用した文字列を返します。\n   *\n   * 引数がオブジェクトの場合、\"{プロパティ名}\" がオブジェクトのプロパティの値に置き換わります。\n   * 指定したプロパティがオブジェクトにない場合は空文字列になります。\n   *\n   * 第1引数がオブジェクトでなかった場合、\"{整数}\" が各引数に置き換わります。\n   * 指定した値の引数がなかった場合は空文字列になります。\n   *\n   * ### Example\n   *     obj = {r: 128, g: 0, b: 255};\n   *     \"color: rgb({r}, {g}, {b});\".format(obj); // => \"color: rgb(128, 0, 255);\"\n   *\n   *     \"{0} + {1} = {2}\".format(5, 8, (5+8)); // => \"5 + 8 = 13\"\n   *\n   * @param {Object} obj パラメータとなるオブジェクト\n   * @return {String} 生成した文字列\n   */\n  String.prototype.$method(\"format\", function(arg) {\n    // 置換ファンク\n    var rep_fn = undefined;\n    \n    // オブジェクトの場合\n    if (typeof arg == \"object\") {\n      /** @ignore */\n      rep_fn = function(m, k) {\n        if (arg[k] === undefined) {\n          return '';\n        }\n        else {\n          return arg[k];\n        }\n      };\n    }\n    // 複数引数だった場合\n    else {\n      var args = arguments;\n      /** @ignore */\n      rep_fn = function(m, k) {\n        var v = args[ parseInt(k) ];\n        if (v !== undefined && v !== null) {\n          return v;\n        }\n        else {\n          return '';\n        }\n      };\n    }\n    \n    return this.replace( /\\{(\\w+)\\}/g, rep_fn );\n  });\n\n\n  /**\n   * @method trim\n   * 文字列先頭と末尾の空白文字を全て取り除いた文字列を返します。\n   *\n   * ###Reference\n   * - [String Functions for Javascript – trim, to camel case, to dashed, and to underscore](http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/)\n   *\n   * ### Example\n   *     \"  Hello, world!  \".trim(); // => \"Hello, world!\"\n   *\n   * @return {String} トリムした結果の文字列\n   */\n  String.prototype.$method(\"trim\", function() {\n    return this.replace(/^\\s+|\\s+$/g, \"\");\n  });\n  \n  /**\n   * @method capitalize\n   * キャピタライズした文字列、すなわち、すべての単語の先頭を大文字にした文字列を返します。\n   *\n   * 単語の先頭以外は小文字化されます。\n   *\n   * ###Reference\n   * - [キャピタライズ(単語の先頭の大文字化)を行う - oct inaodu](http://d.hatena.ne.jp/brazil/20051212/1134369083)  \n   * - [デザインとプログラムの狭間で: javascriptでキャピタライズ（一文字目を大文字にする）](http://design-program.blogspot.com/2011/02/javascript.html)\n   *\n   * ### Example\n   *     \"i aM a pen.\".capitalize(); // => \"I Am A Pen.\"\n   *\n   * @return {String} キャピタライズした文字列\n   */\n  String.prototype.$method(\"capitalize\", function() {\n    return this.replace(/\\w+/g, function(word){\n      return word.capitalizeFirstLetter();\n    });\n  });\n  \n  /**\n   * @method capitalizeFirstLetter\n   * 先頭の文字を大文字にして、それ以外を小文字にした文字列を返します。\n   *\n   * ### Example\n   *     \"i aM a pen.\".capitalizeFirstLetter(); // \"I am a pen.\"\n   *\n   * @return {String} 先頭の文字を大文字にして、それ以外を小文字にした文字列\n   */\n  String.prototype.$method(\"capitalizeFirstLetter\", function() {\n    return this.charAt(0).toUpperCase() + this.substr(1).toLowerCase();\n  });\n  \n  /**\n   * @method toDash\n   * 文字列内の大文字を「\"-\" + 小文字」に変換します。\n   *\n   * css2properties（element.style）の各プロパティ名を CSS のプロパティ名に変換する場合に便利です。\n   *\n   * ### Example\n   *     \"borderTopColor\".toDash(); // => \"border-top-color\"\n   *\n   *  @return {String} 変換後の文字列\n   */\n  String.prototype.$method(\"toDash\", function() {\n    return this.replace(/([A-Z])/g, function(m){ return '-'+m.toLowerCase(); });\n  });\n  \n  \n  /**\n   * @method toHash\n   * ハッシュ値を生成して返します。\n   *\n   * ### Example\n   *     \"phina.js\".toHash(); // => 2676327394\n   *\n   * @return {Number} CRC32ハッシュ値\n   */\n  String.prototype.$method(\"toHash\", function() {\n    return this.toCRC32();\n  });\n  \n  /**\n   * @method padding\n   * 左に文字を埋めて指定した桁にします。this の文字列は右寄せされます。\n   *\n   * ### Example\n   *     \"1234\".padding(10);      // => \"      1234\"\n   *     \"1234\".padding(10, '0'); // => \"0000001234\"\n   *\n   * @param {Number} figure 桁数\n   * @param {String} [ch=\" \"] 埋める文字\n   * @return {String} 指定した桁の文字列\n   */\n  String.prototype.$method(\"padding\", function(n, ch) {\n    var str = this.toString();\n    n  = n-str.length;\n    ch = (ch || ' ')[0];\n    \n    while(n-- > 0) { str = ch + str; }\n    \n    return str;\n  });\n  \n  /**\n   * @method paddingLeft\n   * 左に文字を埋めて指定した桁にします。this の文字列を右寄せされます。\n   *\n   * {@link #padding} と同じです。\n   * @inheritdoc #padding\n   */\n  String.prototype.$method(\"paddingLeft\", function(n, ch) {\n    var str = this.toString();\n    n  = n-str.length;\n    ch = (ch || ' ')[0];\n    \n    while(n-- > 0) { str = ch + str; }\n    \n    return str;\n  });\n  \n  /**\n   * @method paddingRight\n   * 右に文字を埋めて指定した桁にします。this の文字列は左寄せされます。\n   *\n   * ### Example\n   *     \"1234\".paddingRight(10);      // => \"1234      \"\n   *     \"1234\".paddingRight(10, '0'); // => \"1234000000\"\n   *\n   * @param {Number} figure 桁数\n   * @param {String} [ch=\" \"] 埋める文字\n   * @return {String} 指定した桁の文字列\n   */\n  String.prototype.$method(\"paddingRight\", function(n, ch) {\n    var str = this.toString();\n    n  = n-str.length;\n    ch = (ch || ' ')[0];\n    \n    while(n-- > 0) { str = str + ch; }\n    \n    return str;\n  });\n  \n  /**\n   * @method quotemeta\n   * 正規表現のメタ文字をクォートします。\n   *\n   * ### Example\n   *     \"Hello world. (can you hear me?)\".quotemeta(); // => \"Hello\\\\ world\\\\.\\\\ \\\\(can\\\\ you\\\\ hear\\\\ me\\\\?\\\\)\"\n   *\n   *  @return {String} クォートされた文字列\n   */\n  String.prototype.$method(\"quotemeta\", function(n) {\n    return this.replace(/([^0-9A-Za-z_])/g, '\\\\$1');\n  });\n  \n  /**\n   * @method repeat\n   * 自分自身を指定した回数だけ繰り返した文字列を返します。\n   *\n   * ### Example\n   *     \"Abc\".repeat(4); // => \"AbcAbcAbcAbc\"\n   *\n   * @param {Number} n 繰り返し回数\n   * @return {String} 文字列\n   */\n  String.prototype.$method(\"repeat\", function(n) {\n    // TODO: 確認する\n    var arr = Array(n);\n    for (var i=0; i<n; ++i) arr[i] = this;\n    return arr.join('');\n  });\n  \n  /**\n   * @method count\n   * 指定した文字列が何個入っているかをカウントして返します。\n   *\n   * 大文字・小文字は区別されます。\n   *\n   * ### Example\n   *     \"This is a string. Isn't it?\".count(\"is\"); // => 2\n   *\n   * @param {String} str 調べる文字列\n   * @return {Number} this に str が入っている個数\n   */\n  String.prototype.$method(\"count\", function(str) {\n    var re = new RegExp(str, 'gm');\n    return this.match(re).length;\n  });\n  \n  /**\n   * @method include\n   * 指定した文字列が含まれているかどうかを返します。\n   *\n   * 大文字・小文字は区別されます。\n   *\n   * ### Example\n   *     \"This is a string.\".include(\"is\"); // => true\n   *     \"This is a string.\".include(\"was\"); // => false\n   *\n   * @param {String} str 調べる文字列\n   * @return {Boolean} 含まれているかどうか\n   */\n  String.prototype.$method(\"include\", function(str) {\n    return this.indexOf(str) != -1;\n  });\n  \n  /**\n   * @method each\n   * 各文字を順番に渡しながら関数を繰り返し実行します。\n   *\n   * ### Example\n   *     str = 'abc';\n   *     str.each(function(ch) {\n   *       console.log(ch);\n   *     });\n   *     // => 'a'\n   *     //    'b'\n   *     //    'c'\n   *\n   * @param {Function} callback 各要素に対して実行するコールバック関数\n   * @param {Object} [self=this] callback 内で this として参照される値\n   */\n  String.prototype.$method(\"each\", function() {\n    Array.prototype.forEach.apply(this, arguments);\n    return this;\n  });\n  \n  /**\n   * @method toArray\n   * 1文字ずつ分解した配列を返します。\n   *\n   * ### Example\n   *     \"12345\".toArray(); // => [\"1\", \"2\", \"3\", \"4\", \"5\"]\n   *     \"あいうえお\".toArray(); // => \"あ\", \"い\", \"う\", \"え\", \"お\"]\n   *\n   * @return {String[]} 配列\n   */\n  String.prototype.$method(\"toArray\", function() {\n    var arr = [];\n    for (var i=0,len=this.length; i<len; ++i) {\n      arr.push(this[i]);\n    }\n    return arr;\n  });\n  \n  /**\n   * @method toObject\n   * キーと値の組み合わせが連結された文字列からオブジェクトを生成します。\n   *\n   * 値は Number、Boolean、String のいずれかの型として評価されます。\n   *\n   * ### Example\n   *     obj1 = \"num=128.5&flag1=true&flag2=false&str=hoge\";\n   *     obj1.toObject(); // => {num: 128.5, flag1: true, flag2: false, str: \"hoge\" }\n   *     \n   *     obj2 = \"num:-64.5|flag1:false|flag2:true|str:foo\";\n   *     obj2.toObject('|', ':'); // => {num: -64.5, flag1: false, flag2: true, str: \"foo\" }\n   *\n   * @param {String} [sep=\"&\"] セパレータ文字\n   * @param {String} [eq=\"\"] キーと値の組み合わせを表す文字\n   * @return {Object} オブジェクト\n   */\n  String.prototype.$method(\"toObject\", function(sep, eq) {\n    sep = sep || '&';\n    eq  = eq || '=';\n\n    var obj = {};\n    var params = this.split(sep);\n    params.each(function(str, i) {\n      var pos = str.indexOf(eq);\n      if (pos > 0) {\n        var key = str.substring(0, pos);\n        var val = str.substring(pos+1);\n        var num = Number(val);\n\n        if (!isNaN(num)) {\n          val = num;\n        }\n        else if (val === 'true') {\n          val = true;\n        }\n        else if (val === 'false') {\n          val = false;\n        }\n\n        obj[key] = val;\n      }\n    });\n\n    return obj;\n  });\n  \n  var table = \"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D\".split(' ');\n  \n  /**\n   * @method toCRC32\n   * 文字列の CRC32 を計算します。\n   *\n   * ### Example\n   *     \"phina.js\".toCRC32(); // => 2676327394\n   *\n   * @return {Number} CRC32 ハッシュ値\n   */\n  String.prototype.$method(\"toCRC32\", function() {\n    var crc = 0, x=0, y=0;\n    \n    crc = crc ^ (-1);\n    for (var i=0, iTop=this.length; i<iTop; ++i) {\n      y = (crc ^ this.charCodeAt(i)) & 0xff;\n      x = \"0x\" + table[y];\n      crc = (crc >>> 8) ^ x;\n    }\n    \n    return (crc ^ (-1)) >>> 0;\n  });\n\n})();\n\n\n/*\n * array.js\n */\n\n;(function() {\n\n  /**\n   * @class global.Array\n   * # 拡張した Array クラス\n   * Array クラスを拡張しています。\n   */\n\n\n  /**\n   * @property {Object} first\n   * 最初の要素\n   *\n   * ### Example\n   *     arr = [6, 5, 2, 3, 1, 4];\n   *     arr.first; // => 6\n   */\n  Array.prototype.accessor(\"first\", {\n      \"get\": function()   { return this[0]; },\n      \"set\": function(v)  { this[0] = v; }\n  });\n  \n  /**\n   * @property {Object} last\n   * 最後の要素\n   *\n   * ### Example\n   *     arr = [6, 5, 2, 3, 1, 4];\n   *     arr.last; // => 4\n   */\n  Array.prototype.accessor(\"last\", {\n    \"get\": function()   { return this[this.length-1]; },\n    \"set\": function(v)  { this[this.length-1] = v; }\n  });\n\n  /**\n   * @method equals\n   * 渡された配列と等しいかどうかをチェックします。\n   *\n   * 要素同士を === で比較します。要素に配列が含まれている場合は {@link #deepEquals} を使用してください。\n   *\n   * ### Example\n   *     arr1 = [6, 5, 2, 3, 1, 4];\n   *     arr1.equals([6, 5, 2, 3, 1, 4]);       // => true\n   *     arr2 = [6, 5, 2, [3, 1], 4];\n   *     arr2.equals([6, 5, 2, [3, 1], 4]);     // => false\n   *     arr2.deepEquals([6, 5, 2, [3, 1], 4]); // => true\n   *\n   * @param {Array} arr 比較する対象の配列\n   * @return {Boolean} チェックの結果\n   */\n  Array.prototype.$method(\"equals\", function(arr) {\n    // 長さチェック\n    if (this.length !== arr.length) return false;\n    \n    for (var i=0,len=this.length; i<len; ++i) {\n      if (this[i] !== arr[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n\n  /**\n   * @method deepEquals\n   * ネストされている配列を含め、渡された配列と等しいかどうかをチェックします。\n   *\n   * ※equalsDeep にするか検討. (Java では deepEquals なのでとりあえず合わせとく)\n   *\n   * ### Example\n   *     arr = [6, 5, 2, [3, 1], 4];\n   *     arr.equals([6, 5, 2, [3, 1], 4]);     // => false\n   *     arr.deepEquals([6, 5, 2, [3, 1], 4]); // => true\n   *\n   * @param {Array} arr 比較する対象の配列\n   * @return {Boolean} チェックの結果\n   */\n  Array.prototype.$method(\"deepEquals\", function(arr) {\n    // 長さチェック\n    if (this.length !== arr.length) return false;\n    \n    for (var i=0,len=this.length; i<len; ++i) {\n      var result = (this[i].deepEquals) ? this[i].deepEquals(arr[i]) : (this[i] === arr[i]);\n      if (result === false) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  /**\n   * @method contains\n   * 指定した要素が配列に含まれているかをチェックします。\n   *\n   * 比較には厳密な同値（三重イコール演算子 === で使われるのと同じ方法）を用います。\n   *\n   * ### Example\n   *     arr = [6, 5, 2, 3, 1, 4];\n   *     arr.contains(3);     // => true\n   *     arr.contains(3, 4);  // => false\n   *     arr.contains(3, -4); // => true\n   *     arr.contains(\"6\");   // => false\n   *\n   * @param {Object} item チェックするオブジェクト\n   * @param {Number} [fromIndex=0] 検索を始める位置。負数を指定した場合は末尾からのオフセットと見なします。\n   * @return {Boolean} チェックの結果\n   */\n  Array.prototype.$method(\"contains\", function(item, fromIndex) {\n    return this.indexOf(item, fromIndex) != -1;\n  });\n  \n  /**\n   * @method at\n   * 指定したインデックスの要素を返します（ループ・負数の指定可）。\n   *\n   * 添字が負数の場合は末尾からのオフセットとみなします。末尾の要素が -1 番目になります。  \n   * 添字の絶対値が Array.length 以上の場合はループします。\n   *\n   * ### Example\n   *     arr = ['a', 'b', 'c', 'd', 'e', 'f'];\n   *     arr.at(0);  // => 'a'\n   *     arr.at(6);  // => 'a'\n   *     arr.at(13); // => 'b'\n   *     arr.at(-1); // => 'f'\n   *     arr.at(-8); // => 'e'\n   *\n   * @param {Number} index 添字\n   * @return {Object} 添字で指定された要素\n   */\n  Array.prototype.$method(\"at\", function(i) {\n    i%=this.length;\n    i+=this.length;\n    i%=this.length;\n    return this[i];\n  });\n\n\n  /**\n   * @method find\n   * 各要素を引数にして関数を実行し、その値が真となる（＝条件にマッチする）最初の要素を返します。\n   *\n   * どの要素もマッチしなければ undefined を返します。\n   *\n   * ### Example\n   *     arr = ['foo', 'bar', 'hoge', 'fuga'];\n   *     arr.find( function(elm) {\n   *       return elm.indexOf('a') >= 0;\n   *     });\n   *     // => 'bar'\n   *\n   * @param {Function} callback 各要素に対して実行するコールバック関数\n   * @param {Object} [self=this] callback 内で this として参照される値。デフォルトは呼び出し時の this。\n   * @return {Object} 条件にマッチした最初の要素、または undefined\n   */\n  Array.prototype.$method(\"find\", function(fn, self) {\n    var target = null;\n\n    this.some(function(elm, i) {\n      if (fn.call(self, elm, i, this)) {\n        target = elm;\n        return true;\n      }\n    });\n\n    return target;\n  });\n\n  /**\n   * @method findIndex\n   * 各要素を引数にして関数を実行し、その値が真となる（＝条件にマッチする）最初のインデックスを返します。\n   *\n   * どの要素もマッチしなければ -1 を返します。\n   *\n   * ### Example\n   *     arr = ['foo', 'bar', 'hoge', 'fuga'];\n   *     arr.findIndex( function(elm) {\n   *       return elm.indexOf('a') >= 0;\n   *     });\n   *     // => 1\n   *\n   * @param {Function} callback 各要素に対して実行するコールバック関数\n   * @param {Object} [self=this] callback 内で this として参照される値。デフォルトは呼び出し時の this。\n   * @return {Object} 条件にマッチした最初のインデックス、または -1\n   */\n  Array.prototype.$method(\"findIndex\", function(fn, self) {\n    var target = null;\n\n    this.some(function(elm, i) {\n      if (fn.call(self, elm, i, this)) {\n        target = i;\n        return true;\n      }\n    });\n\n    return target;\n  });\n  \n  /**\n   * @method swap\n   * @chainable\n   * a 番目の要素 と b 番目の要素を入れ替えます。\n   *\n   * ### Example\n   *     arr1 = ['a', 'b', 'c', 'd'];\n   *     arr2 = arr1.swap(0, 3); // => ['d', 'b', 'c', 'a']\n   *     arr1 === arr2;          // => true\n   *\n   * @param {Number} a  インデックス\n   * @param {Number} b  インデックス\n   */\n  Array.prototype.$method(\"swap\", function(a, b) {\n    var temp = this[a];\n    this[a] = this[b];\n    this[b] = temp;\n    \n    return this;\n  });\n\n  /**\n   * @method erase\n   * @chainable\n   * 指定したオブジェクトと一致した最初の要素を削除します。\n   *\n   * ### Example\n   *     arr1 = ['a', 'b', 'b', 'c'];\n   *     arr2 = arr1.erase('b'); // => ['a', 'b', 'c']\n   *     arr1 === arr2;          // => true\n   *\n   * @param {Object} elm 削除したいオブジェクト\n   */\n  Array.prototype.$method(\"erase\", function(elm) {\n    var index  = this.indexOf(elm);\n    if (index >= 0) {\n      this.splice(index, 1);\n    }\n    return this;\n  });\n  \n  /**\n   * @method eraseAll\n   * @chainable\n   * 指定したオブジェクトと一致したすべての要素を削除します。\n   *\n   * ### Example\n   *     arr1 = ['a', 'b', 'b', 'c'];\n   *     arr2 = arr1.eraseAll('b'); // => ['a', 'c']\n   *     arr1 === arr2;             // => true\n   *\n   * @param {Object} elm 削除したいオブジェクト\n   */\n  Array.prototype.$method(\"eraseAll\", function(elm) {\n    for (var i=0,len=this.length; i<len; ++i) {\n      if (this[i] == elm) {\n        this.splice(i--, 1);\n      }\n    }\n    return this;\n  });\n  \n  /**\n   * @method eraseIf\n   * @chainable\n   * 各要素を引数にして関数を実行し、その値が真となる（＝条件にマッチする）最初の要素を削除します。\n   *\n   * どの要素もマッチしなければ何も起きません。\n   *\n   * ### Example\n   *     arr = ['foo', 'bar', 'hoge', 'fuga'];\n   *     arr.eraseIf( function(elm) {\n   *       return elm.indexOf('o') >= 0;\n   *     });\n   *     // => ['bar', 'hoge', 'fuga']\n   *\n   * @param {Function} callback 各要素に対して実行するコールバック関数\n   */\n  Array.prototype.$method(\"eraseIf\", function(fn) {\n    for (var i=0,len=this.length; i<len; ++i) {\n      if ( fn(this[i], i, this) ) {\n        this.splice(i, 1);\n        break;\n      }\n    }\n    return this;\n  });\n  \n  /**\n   * @method eraseIfAll\n   * @chainable\n   * 各要素を引数にして関数を実行し、その値が真となる（＝条件にマッチする）すべての要素を削除します。\n   *\n   * どの要素もマッチしなければ何も起きません。\n   *\n   * ### Example\n   *     arr = ['foo', 'bar', 'hoge', 'fuga'];\n   *     arr.eraseIfAll( function(elm) {\n   *       return elm.indexOf('o') >= 0;\n   *     });\n   *     // => ['bar', 'fuga']\n   *\n   * @param {Function} callback 各要素に対して実行するコールバック関数\n   */\n  Array.prototype.$method(\"eraseIfAll\", function(fn) {\n    for (var i=0,len=this.length; i<len; ++i) {\n      if ( fn(this[i], i, this) ) {\n        this.splice(i--, 1);\n        len--;\n      }\n    }\n    return this;\n  });\n  \n  /**\n   * @method random\n   * 配列からランダムに1つ取り出した要素を返します。\n   *\n   * 取り出す範囲をインデックスで指定することもできます。  \n   * {@link #pickup}、{@link #lot} と同じです。  \n   *\n   * ### Example\n   *     arr = ['foo', 'bar', 'hoge', 'fuga'];\n   *     arr.random(2, 3);  // => 'hoge' または 'fuga'\n   *\n   * @param {Number} [min=0] インデックスの下限\n   * @param {Number} [max=配列の最大インデックス] インデックスの上限\n   * @return {Object} ランダムに1つ取り出した要素\n   */\n  Array.prototype.$method(\"random\", function(min, max) {\n    min = min || 0;\n    max = max || this.length-1;\n    return this[ Math.randint(min, max) ];\n  });\n  \n  /**\n   * @method pickup\n   * 配列からランダムで1つ取り出した要素を返します。\n   *\n   * {@link #random}、{@link #lot} と同じです。\n   * @inheritdoc #random\n   */\n  Array.prototype.$method(\"pickup\", function(min, max) {\n    min = min || 0;\n    max = max || this.length-1;\n    return this[ Math.randint(min, max) ];\n  });\n  \n  /**\n   * @method lot\n   * 配列からランダムで1つ取り出した要素を返します。\n   *\n   * {@link #random}、{@link #pickup} と同じです。\n   * @inheritdoc #random\n   */\n  Array.prototype.$method(\"lot\", function(min, max) {\n    min = min || 0;\n    max = max || this.length-1;\n    return this[ Math.randint(min, max) ];\n  });\n  \n  /**\n   * @method uniq\n   * 要素の重複を取り除いた配列を生成して返します。\n   *\n   * 自分自身は破壊されません。\n   *\n   * ### Example\n   *     arr = [1, 2, 3, 4, 3, 2];\n   *     arr.uniq(); // => [1, 2, 3, 4]\n   *\n   * @param {Number} [deep] ※未使用\n   * @return {Object} 新しい配列\n   */\n  Array.prototype.$method(\"uniq\", function(deep) {\n    return this.filter(function(value, index, self) {\n      return self.indexOf(value) === index;\n    });\n  });\n  \n\n  /**\n   * @method flatten\n   * 自身を再帰的に平滑化した配列を生成して返します。\n   *\n   * level を指定しなければ深さの際限なく完全に平滑化します。\n   *\n   * ### Example\n   *     arr = [1, 2, [3, [4, 5]]];\n   *     arr.flatten();  // => [1, 2, 3, 4, 5]\n   *     arr.flatten(1); // => [1, 2, 3, [4, 5]]\n   *\n   * @param {Number} [level=0]  平滑化の再帰の深さ\n   * @return {Object} 平滑化した配列\n   */\n  Array.prototype.$method(\"flatten\", function(level) {\n    var arr = null;\n\n    if (level) {\n      arr = this;\n      for (var i=0; i<level; ++i) {\n        arr = Array.prototype.concat.apply([], arr);\n      }\n    }\n    else {\n      // 完全フラット\n      arr = this.reduce(function (previousValue, curentValue) {\n        return Array.isArray(curentValue) ?\n          previousValue.concat(curentValue.flatten()) : previousValue.concat(curentValue);\n      }, []);\n    }\n\n    return arr;\n  });\n\n  /**\n   * @method clone\n   * 自身のコピーを生成して返します。\n   *\n   * ### Example\n   *     arr1 = [1, 2, [3, 4]];\n   *     arr2 = arr1.clone();      // => [1, 2, [3, 4]]\n   *     arr1[2] === arr2[2];      // => true\n   *     arr1[2][0] = 9;\n   *     arr2;                     // => [1, 2, [9, 4]]\n   *     arr1 = [1, 2, [3, 4]];\n   *     arr2 = arr1.clone(true);  // => [1, 2, [3, 4]]\n   *     arr1[2] === arr2[2];      // => false\n   *     arr1[2][0] = 9;\n   *     arr2;                     // => [1, 2, [3, 4]]\n   *\n   * @param {Boolean} [deep=false] 配列のネストをたどって複製するかどうか\n   * @return {Object} 新しい配列\n   */\n  Array.prototype.$method(\"clone\", function(deep) {\n    if (deep === true) {\n      var a = Array(this.length);\n      for (var i=0,len=this.length; i<len; ++i) {\n        a[i] = (this[i].clone) ? this[i].clone(deep) : this[i];\n      }\n      return a;\n    }\n    else {\n      return Array.prototype.slice.apply(this);\n    }\n  });\n\n\n  /**\n   * @method clear\n   * @chainable\n   * 自身を空の配列にします。\n   *\n   * ### Example\n   *     arr = [1, 2, [3, 4]];\n   *     arr.clear(); // => []\n   */\n  Array.prototype.$method(\"clear\", function() {\n    this.length = 0;\n    return this;\n  });\n  \n  /**\n   * @method fill\n   * @chainable\n   * 自身の一部の要素を特定の値で埋めます。\n   *\n   * ### Example\n   *     arr = [1, 2, 3, 4, 5];\n   *     arr.fill(\"x\");       // => [\"x\", \"x\", \"x\", \"x\", \"x\"]\n   *     arr.fill(\"x\", 2, 4); // => [1, 2, \"x\", \"x\", 5]\n   *\n   * @param {Object} value 埋める値\n   * @param {Number} [start=0] 値を埋める最初のインデックス\n   * @param {Number} [end=自身の配列の長さ] 値を埋める最後のインデックス+1\n   */\n  Array.prototype.$method(\"fill\", function(value, start, end) {\n    start = start || 0;\n    end   = end   || (this.length);\n    \n    for (var i=start; i<end; ++i) {\n      this[i] = value;\n    }\n    \n    return this;\n  });\n  \n\n  /**\n   * @method range\n   * @chainable\n   * 自身を等差数列（一定間隔の整数値の列）とします。\n   *\n   * - 引数が1つの場合、0～end（end含まず）の整数の配列です。  \n   * - 引数が2つの場合、start～end（end含まず）の整数の配列です。  \n   * - 引数が3つの場合、start～end（end含まず）かつ start + n * step (nは整数)を満たす整数の配列です。\n   *\n   * ### Example\n   *     arr = [];\n   *     arr.range(4);        // => [0, 1, 2, 3]\n   *     arr.range(2, 5);     // => [2, 3, 4]\n   *     arr.range(2, 14, 5); // => [2, 7, 12]\n   *     arr.range(2, -3);    // => [2, 1, 0, -1, -2]\n   *\n   * @param {Number} start 最初の値（デフォルトは 0）\n   * @param {Number} end 最後の値（省略不可）\n   * @param {Number} [step=1または-1] 間隔\n   */\n  Array.prototype.$method(\"range\", function(start, end, step) {\n    this.clear();\n    \n    if (arguments.length == 1) {\n      for (var i=0; i<start; ++i) this[i] = i;\n    }\n    else if (start < end) {\n      step = step || 1;\n      if (step > 0) {\n        for (var i=start, index=0; i<end; i+=step, ++index) {\n          this[index] = i;\n        }\n      }\n    }\n    else {\n      step = step || -1;\n      if (step < 0) {\n        for (var i=start, index=0; i>end; i+=step, ++index) {\n          this[index] = i;\n        }\n      }\n    }\n    \n    return this;\n  });\n  \n  /**\n   * @method shuffle\n   * @chainable\n   * 自身の要素をランダムにシャッフルします。\n   *\n   * ### Example\n   *     arr = [1, 2, 3, 4, 5];\n   *     arr.shuffle(); // => [5, 1, 4, 2, 3] など\n   */\n  Array.prototype.$method(\"shuffle\", function() {\n    for (var i=0,len=this.length; i<len; ++i) {\n      var j = Math.randint(0, len-1);\n      \n      if (i != j) {\n        this.swap(i, j);\n      }\n    }\n    \n    return this;\n  });\n\n  /**\n   * @method sum\n   * 要素の合計値を返します。\n   *\n   * 要素に数値以外が含まれる場合の挙動は不定です。\n   *\n   * ### Example\n   *     arr = [1, 2, 3, 4, 5, 6];\n   *     arr.sum(); // => 21\n   *\n   * @return {Number} 合計\n   */\n  Array.prototype.$method(\"sum\", function() {\n    var sum = 0;\n    for (var i=0,len=this.length; i<len; ++i) {\n      sum += this[i];\n    }\n    return sum;\n  });\n\n  /**\n   * @method average\n   * 要素の平均値を返します。\n   *\n   * 要素に数値以外が含まれる場合の挙動は不定です。\n   *\n   * ### Example\n   *     arr = [1, 2, 3, 4, 5, 6]\n   *     arr.average(); // => 3.5\n   *\n   * @return {Number} 平均値\n   */\n  Array.prototype.$method(\"average\", function() {\n    var sum = 0;\n    var len = this.length;\n    for (var i=0; i<len; ++i) {\n      sum += this[i];\n    }\n    return sum/len;\n  });\n\n  /**\n   * @method each\n   * @chainable\n   * 要素を順番に渡しながら関数を繰り返し実行します。\n   *\n   * メソッドチェーンに対応していますが、このメソッドによって自分自身は変化しません。\n   *\n   * ###Reference\n   * - [Array.prototype.forEach() - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n   *\n   * ### Example\n   *     arr = [1, 2, 3];\n   *     arr.each( function(elm) {\n   *       console.log(elm * elm)\n   *     });\n   *     // => 1\n   *     //    4\n   *     //    9\n   *\n   * @param {Function} callback 各要素に対して実行するコールバック関数\n   * @param {Object} [self=this] callback 内で this として参照される値\n   */\n  Array.prototype.$method(\"each\", function() {\n    this.forEach.apply(this, arguments);\n    return this;\n  });\n\n  \n  /**\n   * @method toULElement\n   * ULElement に変換します（未実装）\n   */\n  Array.prototype.$method(\"toULElement\", function(){\n      // TODO: \n  });\n\n  /**\n   * @method toOLElement\n   * OLElement に変換します（未実装）\n   */\n  Array.prototype.$method(\"toOLElement\", function(){\n      // TODO:\n  });\n\n  \n  /**\n   * @method range\n   * @static\n   * インスタンスメソッドの {@link #range} と同じです。\n   *\n   * ### Example\n   *     Array.range(2, 14, 5); // => [2, 7, 12]\n   */\n  Array.$method(\"range\", function(start, end, step) {\n    return Array.prototype.range.apply([], arguments);\n  });\n\n\n  /**\n   * @method of\n   * @static\n   * ES6 準拠の of 関数です。可変長引数をとって Array オブジェクトにして返します。\n   *\n   * ### Example\n   *     Array.of();        // => []\n   *     Array.of(1, 2, 3); // => [1, 2, 3]\n   *\n   * @param {Object} elementN 生成する配列の要素\n   * @return {Array} 生成した配列\n   */\n  Array.$method(\"of\", function() {\n    return Array.prototype.slice.call(arguments);\n  });\n\n  /**\n   * @method from\n   * @static\n   * ES6 準拠の from 関数です。array-like オブジェクトかiterable オブジェクトから新しい配列を生成します。\n   *\n   * array-like オブジェクトとは、length プロパティを持ち、数字の添字でアクセス可能なオブジェクトのことです。\n   * 通常の配列のほか、String、arguments、NodeList なども array-like オブジェクトです。\n   *\n   * iterable オブジェクトとは、Symbol.iterator プロパティを持つオブジェクトのことです。\n   * 通常の配列のほか、String、arguments、NodeList なども iterable オブジェクトです。\n   *\n   * ### Example\n   *     Array.from([1, 2, 3], function(elm){ return elm * elm} ); // => [1, 4, 9]\n   *     Array.from(\"foo\");                                        // => [\"f\", \"o\", \"o\"]\n   *     Array.from( document.querySelectorAll(\"span\"))            // => [Element, Element, Element,...]\n   *\n   * @param {Object} arrayLike 配列に変換する array-like オブジェクト\n   * @param {Function} [callback] arrayLike のすべての要素に対して実行するマップ関数\n   * @param {Object} [context] callback 内で this として参照される値\n   * @return {Array} 生成した配列\n   */\n  Array.$method(\"from\", function(arrayLike, callback, context) {\n    if (!Object(arrayLike).length) return [];\n\n    var result = [];\n    if (Symbol && Symbol.iterator && arrayLike[Symbol.iterator]) {\n        var iterator = arrayLike[Symbol.iterator]();\n        while (true) {\n            var iteratorResult = iterator.next();\n            if (iteratorResult.done) break;\n\n            var value = typeof callback === 'function' ? callback.bind(context || this)(iteratorResult.value) : iteratorResult.value;\n            result.push(value);\n        }\n        return result;\n    }\n\n    for (var i = 0, len = arrayLike.length; i < len; i++) {\n        result.push(arrayLike[i]);\n    }\n    return result.map(typeof callback == 'function' ? callback : function(item) {\n      return item;\n    }, context);\n  });\n  \n  /**\n   * @method most\n   * 指定した関数の返り値が最小となる要素と最大となる要素をまとめて返します。\n   *\n   * 空の配列に対して実行すると {max: Infinity, min: -Infinity} を返します。\n   *\n   * ### Example\n   *     [5,1,4,1,9,2,-10].most(); // => {max:9, min: -10}\n   *\n   *     points = [ {x:0, y:0}, {x:640, y:960}, {x:-80, y:100} ];\n   *     points.most(function(e){return e.x;}).min; // => [x:-80, y:100]\n   *     points.most(function(e){return e.y;}).max; // => [x:640, y:960]\n   *\n   * @param {Function} [callback] 各要素に対して実行するコールバック関数\n   * @param {Object} [self=this] 関数内で this として参照される値。デフォルトは自分自身。\n   * @return {Object} max と min をキーに持つオブジェクト\n   * @return {Object} return.min 関数の返り値が最小となる要素\n   * @return {Object} return.max 関数の返り値が最大となる要素\n   */\n  Array.prototype.$method(\"most\", function(func, self) {\n    if(this.length < 1){\n      return {\n        max: -Infinity,\n        min: Infinity,\n      };\n    }\n    if(func){\n      var maxValue = -Infinity;\n      var minValue = Infinity;\n      var maxIndex = 0;\n      var minIndex = 0;\n      \n      if(typeof self === 'undefined'){self = this;}\n      \n      for (var i = 0, len = this.length; i < len; ++i) {\n        var v = func.call(self, this[i], i, this);\n        if(maxValue < v){\n          maxValue = v;\n          maxIndex = i;\n        }\n        if(minValue > v){\n          minValue = v;\n          minIndex = i;\n        }\n      }\n      return {\n        max: this[maxIndex],\n        min: this[minIndex],\n      };\n    }\n    else{\n      var max = -Infinity;\n      var min = Infinity;\n      for (var i = 0, len = this.length;i < len; ++i) {\n        if(max<this[i]){max=this[i];}\n        if(min>this[i]){min=this[i];}\n      }\n      return {\n        max: max,\n        min: min,\n      };\n    }\n    \n  });  \n\n})();\n\n/*\n * date.js\n */\n\n(function() {\n  \n  /**\n   * @class global.Date\n   * # 拡張した Date クラス\n   * 日付を扱う Date クラスを拡張しています。\n   */\n  \n  var MONTH = [\n    'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n  \n  var WEEK = [\n    'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n  ];\n  \n  /**\n   * @method format\n   * 指定したフォーマットに従って日付を文字列化します。\n   *\n   * <table border=\"1\">\n   *   <tr><td>変換指定文字列</td><td>意味</td></tr>\n   *   <tr><td>yyyy</td><td>西暦年（4桁）</td></tr>\n   *   <tr><td>yy</td><td>西暦年（2桁）</td></tr>\n   *   <tr><td>y</td><td>西暦年</td></tr>\n   *   <tr><td>MMMM</td><td>月（英語名）</td></tr>\n   *   <tr><td>MMM</td><td>月（英語省略名）</td></tr>\n   *   <tr><td>MM</td><td>月（2桁数字）</td></tr>\n   *   <tr><td>M</td><td>月</td></tr>\n   *   <tr><td>dd</td><td>日（2桁）</td></tr>\n   *   <tr><td>d</td><td>日</td></tr>\n   *   <tr><td>EEEE</td><td>曜日（英語名）</td></tr>\n   *   <tr><td>EEE</td><td>曜日（英語省略名）</td></tr>\n   *   <tr><td>HH</td><td>時（24時間表記・2桁）</td></tr>\n   *   <tr><td>H</td><td>時（24時間表記）</td></tr>\n   *   <tr><td>mm</td><td>分（2桁）</td></tr>\n   *   <tr><td>m</td><td>分</td></tr>\n   *   <tr><td>ss</td><td>秒（2桁）</td></tr>\n   *   <tr><td>s</td><td>秒</td></tr>\n   * </table>\n   * 桁数が指定されているものは0パディングされます。\n   *\n   * ### Example\n   *     (new Date()).format(\"yyyy-MM-dd(EEE)\"); // => \"2016-04-05(Tue)\" など\n   *\n   * @param {String} pattern フォーマット文字列\n   * @return {String} フォーマット文字列に従って生成された文字列\n   */\n  Date.prototype.$method('format', function(pattern) {\n    var year    = this.getFullYear();\n    var month   = this.getMonth();\n    var date    = this.getDate();\n    var day     = this.getDay();\n    var hours   = this.getHours();\n    var minutes = this.getMinutes();\n    var seconds = this.getSeconds();\n    var millseconds = this.getMilliseconds();\n    \n    var patterns = {\n      'yyyy': String(year).padding(4, '0'),\n      'yy': year.toString().substr(2, 2),\n      'y': year,\n\n      'MMMM': MONTH[month],\n      'MMM': MONTH[month].substr(0, 3),\n      'MM': String(month+1).padding(2, '0'),\n      'M': (month+1),\n\n      'dd': String(date).padding(2, '0'),\n      'd': date,\n\n      'EEEE': WEEK[day],\n      'EEE': WEEK[day].substr(0, 3),\n\n      'HH': String(hours).padding(2, '0'),\n      'H': hours,\n\n      'mm': String(minutes).padding(2, '0'),\n      'm': minutes,\n\n      'ss': String(seconds).padding(2, '0'),\n      's': seconds,\n      \n      // // date\n      // 'd': String('00' + date).slice(-2),\n      // 'D': WEEK[day].substr(0, 3),\n      // 'j': date,\n      // 'l': WEEK[day],\n      \n      // // month\n      // 'm': String('00' + (month+1)).slice(-2),\n      // 'M': MONTH[month].substr(0, 3),\n      // 'n': (month+1),\n      // 'F': MONTH[month],\n      \n      // // year\n      // 'y': year.toString().substr(2, 2),\n      // 'Y': year,\n      \n      // // time\n      // 'G': hours,\n      // 'H': String('00' + hours).slice(-2),\n      // 'i': String('00' + minutes).slice(-2),\n      // 's': String('00' + seconds).slice(-2),\n      // 'S': String('000' + millseconds).slice(-3),\n    };\n\n    var regstr = '(' + Object.keys(patterns).join('|') + ')';\n    var re = new RegExp(regstr, 'g');\n\n    return pattern.replace(re, function(str) {\n      return patterns[str];\n    });\n  });\n\n\n  /**\n   * @method calculateAge\n   * @static\n   * 指定した誕生日から、現在または指定した日付における年齢を計算します。\n   *\n   * ###Reference\n   * - [Javascriptで誕生日から現在の年齢を算出](http://qiita.com/n0bisuke/items/dd537bd4cbe9ab501ce8)\n   *\n   * ### Example\n   *     Date.calculateAge(\"1990-01-17\"); // => 26 など\n   *\n   * @param {String/Date} birthday 誕生日\n   * @param {String/Date} [when=本日] 基準の日付\n   * @return {Number} 年齢\n   */\n  Date.$method('calculateAge', function(birthday, when) {\n    // birthday\n    if (typeof birthday === 'string') {\n      birthday = new Date(birthday);\n    }\n    // when\n    if (!when) {\n      when = new Date();\n    }\n    else if (typeof when === 'string') {\n      when = new Date(when);\n    }\n\n    var bn = new Date(birthday.getTime()).setFullYear(256);\n    var wn = new Date(when.getTime()).setFullYear(256);\n    var step = (wn < bn) ? 1 : 0;\n\n    return (when.getFullYear() - birthday.getFullYear()) - step;\n  });\n  \n})();\n\n/*\n * math.js\n */\n\n;(function() {\n    \n  /**\n   * @class global.Math\n   * # 拡張した Math クラス\n   * 数学的な処理を扱う Math クラスを拡張しています。\n   */\n\n  \n  /**\n   * @property DEG_TO_RAD\n   * 度をラジアンに変換するための定数です。\n   */\n  Math.DEG_TO_RAD = Math.PI/180;\n  \n  /**\n   * @property RAD_TO_DEG\n   * ラジアンを度に変換するための定数です。\n   */\n  Math.RAD_TO_DEG = 180/Math.PI;\n  \n  /**\n   * @property PHI\n   * 黄金比です。\n   */\n  Math.PHI = (1 + Math.sqrt(5)) / 2;\n  \n  /**\n   * @static\n   * @method degToRad\n   * 度をラジアンに変換します。\n   *\n   * ### Example\n   *     Math.degToRad(180); // => 3.141592653589793\n   *\n   * @param {Number} deg 度\n   * @return {Number} ラジアン\n   */\n  Math.degToRad = function(deg) {\n    return deg * Math.DEG_TO_RAD;\n  };\n  \n  /**\n   * @static\n   * @method radToDeg\n   * ラジアンを度に変換します。\n   *\n   * ### Example\n   *     Math.radToDeg(Math.PI/4); // => 45\n   *\n   * @param {Number} rad ラジアン\n   * @return {Number} 度\n   */\n  Math.radToDeg = function(rad) {\n    return rad * Math.RAD_TO_DEG;\n  };\n  \n\n  \n  /**\n   * @static\n   * @method clamp\n   * 指定した値を指定した範囲に収めた結果を返します。\n   *\n   * ### Example\n   *     Math.clamp(120, 0, 640); // => 120\n   *     Math.clamp(980, 0, 640); // => 640\n   *     Math.clamp(-80, 0, 640); // => 0\n   *\n   * @param {Number} value 値\n   * @param {Number} min  範囲の下限\n   * @param {Number} max  範囲の上限\n   * @return {Number} 丸めた結果の値\n   */\n  Math.$method(\"clamp\", function(value, min, max) {\n    return (value < min) ? min : ( (value > max) ? max : value );\n  });\n  \n  /**\n   * @static\n   * @method inside\n   * 指定した値が指定した値の範囲にあるかどうかを返します。\n   *\n   * ### Example\n   *     Math.inside(980, 0, 640); // => false\n   *     Math.inside(120, 0, 640); // => true\n   *\n   * @param {Number} value チェックする値\n   * @param {Number} min  範囲の下限\n   * @param {Number} max  範囲の上限\n   * @return {Boolean} 範囲内に値があるかないか\n   */\n  Math.$method(\"inside\", function(value, min, max) {\n    return (value >= min) && (value) <= max;\n  });\n  \n  /**\n   * @static\n   * @method randint\n   * 指定された範囲内でランダムな整数値を生成します。\n   *\n   * ### Example\n   *     Math.randint(-4, 4); // => -4、0、3、4 など\n   *\n   * @param {Number} min  範囲の最小値\n   * @param {Number} max  範囲の最大値\n   * @return {Number} ランダムな整数値\n   */\n  Math.$method(\"randint\", function(min, max) {\n    return Math.floor( Math.random()*(max-min+1) ) + min;\n  });\n  \n  /**\n   * @static\n   * @method randfloat\n   * 指定された範囲内でランダムな数値を生成します。\n   *\n   * ### Example\n   *     Math.randfloat(-4, 4); // => -2.7489193824000937 など\n   *\n   * @param {Number} min  範囲の最小値\n   * @param {Number} max  範囲の最大値\n   * @return {Number} ランダムな数値\n   */\n  Math.$method(\"randfloat\", function(min, max) {\n    return Math.random()*(max-min)+min;\n  });\n\n  /**\n   * @static\n   * @method randbool\n   * ランダムに真偽値を生成します。\n   * 引数で百分率を指定する事もできます。\n   *\n   * ### Example\n   *     Math.randbool();   // => true または false\n   *     Math.randbool(80); // => 80% の確率で true\n   *\n   * @param {Number} percent  真になる百分率\n   * @return {Boolean} ランダムな真偽値\n   */\n  Math.$method(\"randbool\", function(perecent) {\n    return Math.randint(0, 100) < (perecent || 50);\n  });\n    \n})();\n/*\n *\n */\n\n\n\n/*\n * phina.js namespace\n */\nvar phina = phina || {};\n\n;(function() {\n\n  /**\n   * @class phina\n   * phina.js namespace\n   */\n\n  /**\n   * バージョン\n   */\n  phina.VERSION = '0.2.0';\n\n  phina.$method('isNode', function() {\n    return (typeof module !== 'undefined');\n  });\n\n  phina.$method('namespace', function(fn) {\n    fn.call(this);\n  });\n\n  var ns = phina.isNode() ? global : window;\n\n  /**\n   * @method global\n   * global\n   */\n  phina.accessor('global', {\n    get: function() {\n      return ns;\n    },\n  });\n\n  /**\n   * @method isMobile\n   * mobile かどうかをチェック\n   */\n  phina.$method('isMobile', function() {\n    if (!phina.global.navigator) return false;\n    var ua = phina.global.navigator.userAgent;\n    return (ua.indexOf(\"iPhone\") > 0 || ua.indexOf(\"iPad\") > 0 || ua.indexOf(\"Android\") > 0);\n  });\n\n\n  // support node.js\n  if (phina.isNode()) {\n    module.exports = phina;\n  }\n\n  ns.phina = phina;\n\n})(this);\n\n\nphina.namespace(function() {\n\n  /**\n   * @member phina\n   * @static\n   * @method createClass\n   * クラスを生成\n   */\n  phina.$method('createClass', function(params) {\n    var props = {};\n\n    var _class = function() {\n      var instance = new _class.prototype._creator();\n      _class.prototype.init.apply(instance, arguments);\n      return instance;\n    };\n\n    if (params.superClass) {\n      _class.prototype = Object.create(params.superClass.prototype);\n      params.init.owner = _class;\n      _class.prototype.superInit = function() {\n        this.__counter = this.__counter || 0;\n\n        var superClass = this._hierarchies[this.__counter++];\n        var superInit = superClass.prototype.init;\n        superInit.apply(this, arguments);\n\n        this.__counter = 0;\n      };\n      _class.prototype.superMethod = function() {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var name = args.shift();\n        this.__counters = this.__counters || {};\n        this.__counters[name] = this.__counters[name] || 0;\n\n        var superClass = this._hierarchies[ this.__counters[name]++ ];\n        var superMethod = superClass.prototype[name];\n        var rst = superMethod.apply(this, args);\n\n        this.__counters[name] = 0;\n\n        return rst;\n      };\n      _class.prototype.constructor = _class;\n    }\n\n\n    // // \n    // params.forIn(function(key, value) {\n    //   if (typeof value === 'function') {\n    //     _class.$method(key, value);\n    //   }\n    //   else {\n    //     _class.prototype[key] = value;\n    //   }\n    // });\n    // 継承\n    _class.prototype.$extend(params);\n\n    // 継承用\n    _class.prototype._hierarchies = [];\n    var _super = _class.prototype.superClass;\n    while(_super) {\n      _class.prototype._hierarchies.push(_super);\n      _super = _super.prototype.superClass;\n    }\n\n    // accessor\n    if (params._accessor) {\n      params._accessor.forIn(function(key, value) {\n        _class.prototype.accessor(key, value);\n      });\n      // _class.prototype = Object.create(_class.prototype, params._accessor);\n    }\n\n    _class.prototype._creator = function() { return this; };\n    _class.prototype._creator.prototype = _class.prototype;\n\n    // static property/method\n    if (params._static) {\n      _class.$extend(params._static);\n    }\n\n    if (params._defined) {\n      params._defined.call(_class, _class);\n    }\n\n    return _class;\n  });\n\n  var chachedClasses = {};\n  /*\n   * \n   */\n  phina.$method('using', function(path) {\n    if (!path) {\n      return phina.global;\n    }\n    \n    var pathes = path.split(/[,.\\/ ]|::/);\n    var current = phina.global;\n\n    pathes.forEach(function(p) {\n      current = current[p] || (current[p]={});\n    });\n\n    return current;\n  });\n  \n  /*\n   * \n   */\n  phina.$method('register', function(path, _class) {\n    var pathes = path.split(/[,.\\/ ]|::/);\n    var className = pathes.last;\n    var parentPath = path.substring(0, path.lastIndexOf('.'));\n    var parent = phina.using(parentPath);\n\n    parent[className] = _class;\n\n    return _class;\n  });\n  \n  var _classDefinedCallback = {};\n\n  /**\n   * @member phina\n   * @static\n   * @method define\n   * クラスを定義\n   */\n  phina.$method('define', function(path, params) {\n    if (params.superClass) {\n      if (typeof params.superClass === 'string') {\n        var _superClass = phina.using(params.superClass);\n        if (typeof _superClass != 'function') {\n          if (!_classDefinedCallback[params.superClass]) {\n            _classDefinedCallback[params.superClass] = [];\n          }\n          _classDefinedCallback[params.superClass].push(function() {\n            phina.define(path, params);\n          });\n\n          return ;\n        }\n        else {\n          params.superClass = _superClass;\n        }\n      }\n      else {\n        params.superClass = params.superClass;\n      }\n    }\n\n    var _class = phina.createClass(params);\n    _class.prototype.accessor('className', {\n      get: function() {\n        return path;\n      },\n    });\n\n    phina.register(path, _class);\n    \n    if (_classDefinedCallback[path]) {\n      _classDefinedCallback[path].forEach(function(callback) {\n        callback();\n      });\n      _classDefinedCallback[path] = null;\n    }\n\n    return _class;\n  });\n\n\n  phina.$method('globalize', function() {\n    phina.forIn(function(key, value) {\n      var ns = key;\n\n      if (typeof value !== 'object') return ;\n\n      value.forIn(function(key, value) {\n        // if (phina.global[key]) {\n        //   console.log(ns, key);\n        //   phina.global['_' + key] = value;\n        // }\n        // else {\n        //   phina.global[key] = value;\n        // }\n        phina.global[key] = value;\n      });\n    });\n  });\n\n  phina._mainListeners = [];\n  phina._mainLoaded = false;\n  phina.$method('main', function(func) {\n    if (phina._mainLoaded) {\n      func();\n    }\n    else {\n      phina._mainListeners.push(func);\n    }\n  });\n\n  var doc = phina.global.document;\n  if (phina.global.addEventListener && doc && doc.readyState !== 'complete') {\n    phina.global.addEventListener('load', function() {\n      var run = function() {\n        var listeners = phina._mainListeners.clone();\n        phina._mainListeners.clear();\n        listeners.each(function(func) {\n          func();\n        });\n\n        // main 内で main を追加している場合があるのでそのチェック\n        if (phina._mainListeners.length > 0) {\n          run(0);\n        }\n        else {\n          phina._mainLoaded = true;\n        }\n      };\n      // ちょっと遅延させる(画面サイズ問題)\n      setTimeout(run);\n    });\n  }\n  else {\n    phina._mainLoaded = true;\n  }\n\n\n\n});\n\n\n\n\n\n\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.geom.Vector2\n   * # 2次元ベクトルクラス\n   * 2次元のベクトルや座標を表すクラスです。\n   */\n  phina.define('phina.geom.Vector2', {\n\n    /** x座標 */\n    x: 0,\n    /** y座標 */\n    y: 0,\n\n    /**\n     * @method init\n     * 2次元ベクトルのコンストラクタです。\n     *\n     * ### Example\n     *     v = phina.geom.Vector2(3, 4);\n     *\n     * @param {Number} x ベクトルの x 座標\n     * @param {Number} y ベクトルの y 座標\n     * @return {phina.geom.Vector2} 2次元ベクトルオブジェクト\n     */\n    init: function(x, y) {\n      this.x = x;\n      this.y = y;\n    },\n\n    /**\n     * @method clone\n     * this のコピーを生成して返します。\n     *\n     * ### Example\n     *     v = phina.geom.Vector2(3, 4);\n     *     v2 = v.clone();\n     *     v2.x == v.x; // => true\n     *\n     * @return {Object} 生成したベクトル\n     */\n    clone: function() {\n      return phina.geom.Vector2(this.x, this.y);\n    },\n\n    /**\n     * @method equals\n     * this の各要素がすべて other と等しいかどうかを返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v2 = phina.geom.Vector2(5, 6);\n     *     v1.equals(v2); // => false\n     *\n     * @param {phina.geom.Vector2} other 比較する対象のベクトル\n     * @return {Boolean} 等しいかどうか\n     */\n    equals: function(v) {\n      return (this.x === v.x && this.y === v.y);\n    },\n\n    /**\n     * @method set\n     * @chainable\n     * this の各要素の値を再設定します。\n     *\n     * ### Example\n     *     v = phina.geom.Vector2(3, 4);\n     *     v.set(5, 6);\n     *\n     * @param {Number} x ベクトルの x 座標\n     * @param {Number} y ベクトルの y 座標\n     * @return {phina.geom.Vector2} 再設定後のベクトル\n     */\n    set: function(x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * @method add\n     * @chainable\n     * this に other を加えます。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v2 = phina.geom.Vector2(5, 6);\n     *     v1.add(v2); // => phina.geom.Vector(8, 10)\n     *\n     * @param {phina.geom.Vector2} other ベクトル\n     * @return {phina.geom.Vector2} 加算した結果のベクトル\n     */\n    add: function(v) {\n      this.x += v.x;\n      this.y += v.y;\n      return this;\n    },\n\n    /**\n     * @method sub\n     * @chainable\n     * this から other を減じます。\n     *\n     * ベクトルが座標を表す場合は、指定した座標から自分自身へと向かうベクトルが得られます。\n     * \n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v2 = phina.geom.Vector2(1, 5);\n     *     v1.sub(v2); // => phina.geom.Vector(2, -1)\n     *\n     * @param {phina.geom.Vector2} other ベクトル\n     * @return {phina.geom.Vector2} 減算した結果のベクトル\n     */\n    sub: function(v) {\n      this.x -= v.x;\n      this.y -= v.y;\n      return this;\n    },\n\n    /**\n     * @method mul\n     * @chainable\n     * this の各要素に数値 n を乗じます。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v1.mul(3) // => phina.geom.Vector(9, 12)\n     *\n     * @param {Number} n 乗じる値\n     * @return {phina.geom.Vector2} 乗算した結果のベクトル\n     */\n    mul: function(n) {\n      this.x *= n;\n      this.y *= n;\n      return this;\n    },\n\n    /**\n     * @method div\n     * @chainable\n     * this の各要素を数値 n で割ります。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(8, 16);\n     *     v1.div(2) // => phina.geom.Vector(4, 8)\n     *\n     * @param {Number} n 割る値\n     * @return {phina.geom.Vector2} 除算した結果のベクトル\n     */\n    div: function(n) {\n      //console.assert(n != 0, \"0 division!!\");\n      n = n || 0.01;\n      this.x /= n;\n      this.y /= n;\n      return this;\n    },\n\n    /**\n     * @method negate\n     * @chainable\n     * this の各要素の正負を反転します。\n     *\n     * this と同じ大きさで方向が逆のベクトルが得られます。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, -4);\n     *     v1.negate() // => phina.geom.Vector(-3, 4)\n     *\n     * @return {phina.geom.Vector2} 反転後のベクトル\n     */\n    negate: function() {\n      this.x = -this.x;\n      this.y = -this.y;\n      \n      return this;\n    },\n\n    /**\n     * @method dot\n     * other との内積を返します。\n     *\n     * 投影ベクトルを求めたり、類似度の計算に利用することができます。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v2 = phina.geom.Vector2(-2, 2);\n     *     v1.dot(v2) // => 2\n     *\n     * @param {phina.geom.Vector2} other ベクトル\n     * @return {Number} 内積\n     */\n    dot: function(v) {\n      return this.x * v.x + this.y * v.y;\n    },\n\n    /**\n     * @method cross\n     * other との外積（クロス積）を返します。\n     *\n     * 2次元ベクトルでの外積はベクトルでなく数値を返すことに注意してください。\n     * other より this 時計回りにあるときは正の値になり、反時計回りにあるときは負の値になります。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v2 = phina.geom.Vector2(3, 1);\n     *     v1.cross(v2) // => -8\n     *\n     * @param {phina.geom.Vector2} other ベクトル\n     * @return {Number} 外積\n     */\n    cross: function(v) {\n      return (this.x*v.y) - (this.y*v.x);\n    },\n\n    /**\n     * @method length\n     * this の大きさを返します。\n     *\n     * (memo) magnitude って名前の方が良いかも. 検討中.\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v1.length(); // => 5\n     *\n     * @return {Number} ベクトルの大きさ\n     */\n    length: function() {\n      return Math.sqrt(this.x*this.x + this.y*this.y);\n    },\n    \n    /**\n     * @method lengthSquared\n     * this の大きさの自乗を返します。\n     *\n     * C# の名前を引用（or lengthSquare or lengthSqrt）\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v1.lengthSquared(); // => 25\n     *\n     * @return {Number} ベクトルの大きさの自乗\n     */\n    lengthSquared: function() {\n      return this.x*this.x + this.y*this.y;\n    },\n    \n    /**\n     * @method distance\n     * this と other を座標とみなしたときの2点間の距離を返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(1, 2);\n     *     v2 = phina.geom.Vector2(4, 6);\n     *     v1.distance(v2); // => 5\n     *\n     * @param {phina.geom.Vector2} other 座標を表すベクトル\n     * @return {Number} 2点間の距離\n     */\n    distance: function(v) {\n      return Math.sqrt( Math.pow(this.x-v.x, 2) + Math.pow(this.y-v.y, 2) );\n    },\n    \n    /**\n     * @method distanceSquared\n     * this と other を座標とみなしたときの2点間の距離の自乗を返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(1, 2);\n     *     v2 = phina.geom.Vector2(4, 6);\n     *     v1.distanceSquared(v2); // => 25\n     *\n     * @param {phina.geom.Vector2} other 座標を表すベクトル\n     * @return {Number} 2点間の距離の自乗\n     */\n    distanceSquared: function(v) {\n      return Math.pow(this.x-v.x, 2) + Math.pow(this.y-v.y, 2);\n    },\n\n    /**\n     * @method random\n     * @chainable\n     * 角度が min から max の範囲（度単位）で大きさが len のランダムなベクトルを返します。\n     *\n     * ### Example\n     *     phina.geom.Vector2().random(90, 180, 1); // => phina.geom.Vector2(-0.5, 0.866) など\n     *\n     * @param {Number} [min=0] 角度（度単位）の下限値\n     * @param {Number} [max=360] 角度（度単位）の上限値\n     * @param {Number} [len=1] 大きさ\n     * @return {phina.geom.Vector2} ランダム化したベクトル\n     */\n    random: function(min, max, len) {\n      var degree = phina.util.Random.randfloat(min || 0, max || 360);\n      var rad = degree*Math.DEG_TO_RAD;\n      var len = len || 1;\n\n      this.x = Math.cos(rad)*len;\n      this.y = Math.sin(rad)*len;\n\n      return this;\n    },\n    \n    /**\n     * @method normalize\n     * @chainable\n     * this を正規化します。すなわち、this と同じ方向で大きさが1のベクトルを返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v1.normalize(); // => phina.geom.Vector2(0.6, 0.8)\n     *\n     * @return {phina.geom.Vector2} 正規化したベクトル\n     */\n    normalize: function() {\n      this.div(this.length());\n      return this;\n    },\n\n    /**\n     * @method toString\n     * this を JSON 形式で表現した文字列を返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v1.toString(); // => \"{x:3, y:4}\"\n     *\n     * @return {String} JSON 文字列\n     */\n    toString: function() {\n      return \"{x:{x}, y:{y}}\".format(this);\n    },\n\n    /**\n     * @method getDirection\n     * this のおおよその方向を示した文字列を返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 4);\n     *     v1.getDirection(); // => \"up\"\n     *\n     * @return {String} 方向を表す文字列（\"up\", \"right\", \"down\", \"left\"）\n     */\n    getDirection: function() {\n      var angle = this.toDegree();\n      if (angle < 45) {\n        return \"right\";\n      } else if (angle < 135) {\n        return \"down\";\n      } else if (angle < 225) {\n        return \"left\"\n      } else if (angle < 315) {\n        return \"up\";\n      } else {\n        return \"right\";\n      }\n    },\n\n    /**\n     * @method toAngle\n     * this と x 軸との角度（ラジアン単位）を返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(-2, 0);\n     *     v1.toAngle(); // => 3.14159\n     *\n     * @return {Number} ベクトルの角度（ラジアン単位）\n     */\n    toAngle: function() {\n      var rad = Math.atan2(this.y, this.x);\n      return (rad + Math.PI*2)%(Math.PI*2);\n    },\n    \n    /**\n     * @method fromAngle\n     * @chainable\n     * 角度（ラジアン単位）と大きさを指定してベクトルを設定します。\n     *\n     * ### Example\n     *     phina.geom.Vector2().fromAngle(Math.PI/4, 2); // => phina.geom.Vector2(1.4142, 1.4142)\n     *\n     * @param {Number} rad 角度（ラジアン単位）\n     * @param {Number} [len=1] 大きさ\n     * @return {phina.geom.Vector2} ベクトル\n     */\n    fromAngle: function(rad, len) {\n      len = len || 1;\n      this.x = Math.cos(rad)*len;\n      this.y = Math.sin(rad)*len;\n      \n      return this;\n    },\n\n    /**\n     * @method toDegree\n     * this と x 軸との角度（度単位）を返します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(-2, 2);\n     *     v1.toAngle(); // => 135\n     *\n     * @return {Number} ベクトルの角度（度単位）\n     */\n    toDegree: function() {\n      return this.toAngle().toDegree();\n    },\n    \n    /**\n     * @method fromDegree\n     * @chainable\n     * 角度（度単位）と大きさを指定してベクトルを設定します。\n     *\n     * ### Example\n     *     phina.geom.Vector2().fromDegree(60, 2); // => phina.geom.Vector2(1, 1.732)\n     *\n     * @param {Number} deg 角度（度単位）\n     * @param {Number} [len=1] 大きさ\n     * @return {phina.geom.Vector2} ベクトル\n     */\n    fromDegree: function(deg, len) {\n      return this.fromAngle(deg.toRadian(), len);\n    },\n\n    /**\n     * @method rotate\n     * @chainable\n     * this を回転します。\n     *\n     * ### Example\n     *     v1 = phina.geom.Vector2(3, 1);\n     *     v1.rotate(Math.PI/2); // => phina.geom.Vector2(-1, 3);\n     *\n     * @param {Number} rad 角度（ラジアン単位）\n     * @param {Number} [center=(0, 0)] 回転の中心座標\n     * @return {Number} 回転後のベクトル\n     */\n    rotate: function(rad, center) {\n      center = center || phina.geom.Vector2(0, 0);\n\n      var x1 = this.x - center.x;\n      var y1 = this.y - center.y;\n      var x2 = x1 * Math.cos(rad) - y1 * Math.sin(rad);\n      var y2 = x1 * Math.sin(rad) + y1 * Math.cos(rad);\n      this.set( center.x + x2, center.y + y2 );\n\n      return this;\n    },\n\n    _accessor: {\n    },\n\n    _static: {\n      /**\n       * @method min\n       * @static\n       * v1 と v2 の各要素に対し、より小さい方を要素とする新しいベクトルを生成して返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 1);\n       *     v2 = phina.geom.Vector2(-3, 2);\n       *     phina.geom.Vector2.min(v1, v2); // phina.geom.Vector2(-3, 1);\n       *\n       * @param {phina.geom.Vector2} v1 ベクトル\n       * @param {phina.geom.Vector2} v2 ベクトル\n       * @return {phina.geom.Vector2} 生成したベクトル\n       */\n      min: function(a, b) {\n        return phina.geom.Vector2(\n          (a.x < b.x) ? a.x : b.x,\n          (a.y < b.y) ? a.y : b.y\n          );\n      },\n\n      /**\n       * @method max\n       * @static\n       * 2次元ベクトル v1 と v2 の各要素に対し、より大きい方を要素とする新しいベクトルを生成して返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 1);\n       *     v2 = phina.geom.Vector2(-3, 2);\n       *     phina.geom.Vector2.max(v1, v2); // phina.geom.Vector2(3, 2);\n       *\n       * @param {phina.geom.Vector2} v1 ベクトル\n       * @param {phina.geom.Vector2} v2 ベクトル\n       * @return {phina.geom.Vector2} 生成したベクトル\n       */\n      max: function(a, b) {\n        return phina.geom.Vector2(\n          (a.x > b.x) ? a.x : b.x,\n          (a.y > b.y) ? a.y : b.y\n          );\n      },\n\n      /**\n       * @method add\n       * @static\n       * v1 に v2 を加算した新しいベクトルを生成して返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 1);\n       *     v2 = phina.geom.Vector2(-3, 2);\n       *     phina.geom.Vector2.add(v1, v2); // phina.geom.Vector2(0, 3);\n       *\n       * @param {phina.geom.Vector2} v1 ベクトル\n       * @param {phina.geom.Vector2} v2 ベクトル\n       * @return {phina.geom.Vector2} 加算した結果\n       */\n      add: function(lhs, rhs) {\n        return phina.geom.Vector2(lhs.x+rhs.x, lhs.y+rhs.y);\n      },\n      \n      /**\n       * @method sub\n       * @static\n       * 2次元ベクトル v1 から v2 を減じた新しいベクトルを生成して返します。\n       *\n       * ベクトルが座標を表す場合、2つ目の座標から1つ目の座標へと向かうベクトルが得られます。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 1);\n       *     v2 = phina.geom.Vector2(-3, 2);\n       *     phina.geom.Vector2.sub(v1, v2); // phina.geom.Vector2(6, -1);\n       *\n       * @param {phina.geom.Vector2} v1 ベクトル\n       * @param {phina.geom.Vector2} v2 ベクトル\n       * @return {phina.geom.Vector2} 減算した結果\n       */\n      sub: function(lhs, rhs) {\n        return phina.geom.Vector2(lhs.x-rhs.x, lhs.y-rhs.y);\n      },\n      \n      /**\n       * @method mul\n       * @static\n       * 2次元ベクトル v の各要素に n を乗じた新しいベクトルを生成して返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 1);\n       *     phina.geom.Vector2.mul(v1, 2); // phina.geom.Vector2(6, 2)\n       *\n       * @param {phina.geom.Vector2} v ベクトル\n       * @param {phina.geom.Vector2} n 乗じる値\n       * @return {phina.geom.Vector2} 乗算した結果\n       */\n      mul: function(v, n) {\n        return phina.geom.Vector2(v.x*n, v.y*n);\n      },\n      \n      /**\n       * @method div\n       * @static\n       * 2次元ベクトル v の各要素を n で割った新しいベクトルを生成して返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 1);\n       *     phina.geom.Vector2.div(v1, 2); // phina.geom.Vector2(1.5, 0.5)\n       *\n       * @param {phina.geom.Vector2} v ベクトル\n       * @param {phina.geom.Vector2} n 割る値\n       * @return {phina.geom.Vector2} 除算した結果\n       */\n      div: function(v, n) {\n        return phina.geom.Vector2(v.x/n, v.y/n);\n      },\n      \n      /**\n       * @method negate\n       * @static\n       * 2次元ベクトル v を反転した新しいベクトルを生成して返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 1);\n       *     phina.geom.Vector2.negate(); // phina.geom.Vector2(-3, -1)\n       *\n       * @param {phina.geom.Vector2} v ベクトル\n       * @return {phina.geom.Vector2} 反転したベクトル\n       */\n      negate: function(v) {\n        return phina.geom.Vector2(-v.x, -v.y);\n      },\n      \n      /**\n       * @method dot\n       * @static\n       * 2次元ベクトル v1 と v2 の内積を返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 4);\n       *     v2 = phina.geom.Vector2(-2, 2);\n       *     phina.geom.Vector2.dot(v1, v2) // => 2\n       *\n       * @param {phina.geom.Vector2} v1 ベクトル\n       * @param {phina.geom.Vector2} v2 ベクトル\n       * @return {phina.geom.Vector2} 内積\n       */\n      dot: function(lhs, rhs) {\n        return lhs.x * rhs.x + lhs.y * rhs.y;\n      },\n      \n      /**\n       * @method cross\n       * @static\n       * 2次元ベクトル v1 と v2 の外積（クロス積）を返します。\n       *\n       * 2次元ベクトルでの外積はベクトルでなく数値を返すことに注意してください。\n       * 1つ目のベクトルが2つ目のベクトルより時計回りにあるときは正の値になり、反時計回りにあるときは負の値になります。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(3, 4);\n       *     v2 = phina.geom.Vector2(3, 1);\n       *     phina.geom.Vector2.cross(v1, v2); // => -8\n       *\n       * @param {phina.geom.Vector2} v1 ベクトル\n       * @param {phina.geom.Vector2} v2 ベクトル\n       * @return {Number} 外積\n       */\n      cross: function(lhs, rhs) {\n        return (lhs.x*rhs.y) - (lhs.y*rhs.x);\n      },\n      \n      /**\n       * @method distance\n       * @static\n       * v1 と v2 を座標とみなしたときの2点間の距離を返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(1, 2);\n       *     v2 = phina.geom.Vector2(4, 6);\n       *     phina.geom.Vector2.distance(v1, v2); // => 5\n       *\n       * @param {phina.geom.Vector2} v1 座標を表すベクトル\n       * @param {phina.geom.Vector2} v2 座標を表すベクトル\n       * @return {Number} 2点間の距離\n       */\n      distance: function(lhs, rhs) {\n        return Math.sqrt( Math.pow(lhs.x-rhs.x, 2) + Math.pow(lhs.y-rhs.y, 2) );\n      },\n\n      /**\n       * @method distanceSquared\n       * @static\n       * v1 と v2 を座標とみなしたときの2点間の距離の自乗を返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(1, 2);\n       *     v2 = phina.geom.Vector2(4, 6);\n       *     phina.geom.Vector2.distanceSquared(v1, v2); // => 25\n       *\n       * @param {phina.geom.Vector2} v1 座標を表すベクトル\n       * @param {phina.geom.Vector2} v2 座標を表すベクトル\n       * @return {Number} 2点間の距離の自乗\n       */\n      distanceSquared: function(lhs, rhs) {\n        return Math.pow(lhs.x-rhs.x, 2) + Math.pow(lhs.y-rhs.y, 2);\n      },\n\n      /**\n       * @method manhattanDistance\n       * @static\n       * v1 と v2 を座標とみなしたときの2点間のマンハッタン距離（軸に平行に進むときの最短距離）を返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(1, 2);\n       *     v2 = phina.geom.Vector2(4, 6);\n       *     phina.geom.Vector2.manhattanDistance(v1, v2); // => 7\n       *\n       * @param {phina.geom.Vector2} v1 座標を表すベクトル\n       * @param {phina.geom.Vector2} v2 座標を表すベクトル\n       * @return {Number} 2点間のマンハッタン距離\n       */\n      manhattanDistance: function(lhs, rhs) {\n        return Math.abs(lhs.x-rhs.x) + Math.abs(lhs.y-rhs.y);\n      },\n      \n      /**\n       * @method normal\n       * @static\n       * v1 と v2 を座標とみなしたときの、v2 から v1 に向かうベクトルに対する法線ベクトルを返します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(1, 2);\n       *     v2 = phina.geom.Vector2(4, 6);\n       *     phina.geom.Vector2.normal(v1, v2); // => phina.geom.Vector2(4, -3)\n       *\n       * @param {phina.geom.Vector2} v1 座標を表すベクトル\n       * @param {phina.geom.Vector2} v2 座標を表すベクトル\n       * @return {phina.geom.Vector2} 法線ベクトル\n       */\n      normal: function(a, b) {\n        var temp = phina.geom.Vector2.sub(a, b);\n\n        return phina.geom.Vector2(-temp.y, temp.x);\n      },\n\n      /**\n       * @method reflect\n       * @static\n       * 2次元ベクトル v を壁への入射ベクトルとして、壁に反射した際のベクトル（反射ベクトル）を返します。\n       *\n       * 壁の向きは法線ベクトル normal によって表します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(4, 3);\n       *     normal = phina.geom.Vector2(-1, 1);\n       *     phina.geom.Vector2.reflect(v1, normal); // => phina.geom.Vector2(2, 5)\n       *\n       * @param {phina.geom.Vector2} v 入射ベクトル\n       * @param {phina.geom.Vector2} normal 壁の法線ベクトル\n       * @return {phina.geom.Vector2} 反射ベクトル\n       */\n      reflect: function(v, normal) {\n        var len = phina.geom.Vector2.dot(v, normal);\n        var temp= phina.geom.Vector2.mul(normal, 2*len);\n        \n        return phina.geom.Vector2.sub(v, temp);\n      },\n      \n      /**\n       * @method wall\n       * @static\n       * 2次元ベクトル v を壁への入射ベクトルとして、壁に沿ったベクトル（壁ずりクトル）を返します。\n       *\n       * 壁の向きは法線ベクトル normal によって表します。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(4, 3);\n       *     normal = phina.geom.Vector2(-1, 1);\n       *     phina.geom.Vector2.wall(v1, normal); // => phina.geom.Vector2(3, 4)\n       *\n       * @param {phina.geom.Vector2} v 入射ベクトル\n       * @param {phina.geom.Vector2} normal 壁の法線ベクトル\n       * @return {phina.geom.Vector2} 壁ずりベクトル\n       */\n      wall: function(v, normal) {\n        var len = phina.geom.Vector2.dot(v, normal);\n        var temp= phina.geom.Vector2.mul(normal, len);\n        \n        return phina.geom.Vector2.sub(v, temp);\n      },\n      \n      /**\n       * @method lerp\n       * @static\n       * v1 と v2 を媒介変数 t で線形補間します。\n       * t=0.5 で v1 と v2 の中間ベクトルを求めることができます。\n       *\n       * ### Example\n       *     v1 = phina.geom.Vector2(1, 2);\n       *     v2 = phina.geom.Vector2(4, 6);\n       *     phina.geom.Vector2.lerp(v1, v2, 0.5); // => (2.5, 4)\n       *     phina.geom.Vector2.lerp(v1, v2, 0); // => (1, 2)\n       *     phina.geom.Vector2.lerp(v1, v2, 1); // => (4, 6)\n       * \n       * @param {phina.geom.Vector2} v1 ベクトル\n       * @param {phina.geom.Vector2} v2 ベクトル\n       * @param {Number} t 媒介変数\n       * @return {phina.geom.Vector2} 線形補間の結果\n       */\n      lerp: function(a, b, t) {\n        return phina.geom.Vector2(\n          a.x + (b.x-a.x)*t,\n          a.y + (b.y-a.y)*t\n        );\n      },\n      \n      \n      /**\n       * @method slerp\n       * @static\n       * 補間（未実装）\n       */\n      slerp: function(lhs, rhs, t) {\n          // TODO:\n          // cos...\n      },\n\n      /**\n       * @method random\n       * @static\n       * 角度が min から max の範囲（度単位）で大きさが len のランダムなベクトルを生成して返します。\n       *\n       * ### Example\n       *     phina.geom.Vector2.random(90, 180, 1); // => phina.geom.Vector2(-0.5, 0.866) など\n       *\n       * @param {Number} [min=0] 角度（度単位）の下限値\n       * @param {Number} [max=360] 角度（度単位）の上限値\n       * @param {Number} [len=1] 大きさ\n       * @return {phina.geom.Vector2} 生成したベクトル\n       */\n      random: function(min, max, len) {\n        return phina.geom.Vector2().random(min, max).mul(len||1);\n      },\n    },\n\n  });\n\n  /**\n   * @property {phina.geom.Vector2} ZERO ゼロベクトル\n   * @readonly\n   */\n  phina.geom.Vector2.ZERO = phina.geom.Vector2(0, 0);\n  /**\n   * @property {phina.geom.Vector2} LEFT 左方向の単位ベクトル\n   * @readonly\n   */\n  phina.geom.Vector2.LEFT = phina.geom.Vector2(-1, 0);\n  /**\n   * @property {phina.geom.Vector2} RIGHT 右方向の単位ベクトル\n   * @readonly\n   */\n  phina.geom.Vector2.RIGHT= phina.geom.Vector2(1, 0);\n  /**\n   * @property {phina.geom.Vector2} UP 上方向の単位ベクトル\n   * @readonly\n   */\n  phina.geom.Vector2.UP   = phina.geom.Vector2(0, -1);\n  /**\n   * @property {phina.geom.Vector2} DOWN 下方向の単位ベクトル\n   * @readonly\n   */\n  phina.geom.Vector2.DOWN = phina.geom.Vector2(0, 1);\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.geom.Vector3\n   * # 3次元ベクトルクラス（未実装）\n   * 3次元のベクトルや座標を表すクラスです。\n   */\n  phina.define('phina.geom.Vector3', {\n\n    /** x座標 */\n    x: 0,\n    /** y座標 */\n    y: 0,\n    /** z座標 */\n    z: 0,\n\n    /**\n     * @constructor\n     */\n    init: function(x, y, z) {\n      this.x = x;\n      this.y = y;\n      this.z = z;\n    },\n\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.geom.Matrix33\n   * # 行列クラス\n   * 3x3の行列を表すクラスです。\n   * \n   * <pre>\n   * | m00 m01 m02 |\n   * | m10 m11 m12 |\n   * | m20 m21 m22 |\n   * </pre>\n   */\n  phina.define('phina.geom.Matrix33', {\n\n    /**\n     * @method init\n     * マトリックスクラスのコンストラクタです。\n     *\n     * 引数は m00, m01, m02, m10, m11, m12, m20, m21, m22 の順に指定します。\n     * 引数が9個に満たない場合は単位行列を生成します。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat2 = phina.geom.Matrix33();\n     *     mat1.m00 + mat2.m00; // => 2\n     *     mat1.m01 - mat2.m01; // => 2\n     *\n     * @param {Number...} m00, m01,... 各要素の値\n     * @return {phina.geom.Matrix33} 行列オブジェクト\n     */\n    init: function() {\n      if (arguments.length >= 9) {\n          this.set.apply(this, arguments);\n      }\n      else {\n          this.identity();\n      }\n    },\n\n    /**\n     * @method set\n     * @chainable\n     * this の各要素の値を再設定します。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat2 = phina.geom.Matrix33();\n     *     mat2.set(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat1.toString() == mat2.toString(); // => true\n     *\n     * @param {Number...} m00, m01,... 各要素の値\n     * @return {phina.geom.Matrix33} 行列オブジェクト\n     */\n    set: function(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n      this.m00 = m00; this.m01 = m01; this.m02 = m02;\n      this.m10 = m10; this.m11 = m11; this.m12 = m12;\n      this.m20 = m20; this.m21 = m21; this.m22 = m22;\n\n      return this;\n    },\n\n    /**\n     * @method identity\n     * @chainable\n     * this を単位行列にします。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat2 = phina.geom.Matrix33();\n     *     mat1.identity().toString() == mat2.toString(); // => true\n     *\n     * @return {phina.geom.Matrix33} 単位行列\n     */\n    identity: function() {\n      this.m00 = 1; this.m01 = 0; this.m02 = 0;\n      this.m10 = 0; this.m11 = 1; this.m12 = 0;\n      this.m20 = 0; this.m21 = 0; this.m22 = 1;\n      return this;\n    },\n\n    /**\n     * @method clone\n     * this のコピーを生成して返します。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat2 = mat1.clone();\n     *     mat1.toString() == mat2.toString(); // => true\n     *     mat1 == mat2; // => false\n     *\n     * @return {phina.geom.Matrix33} 行列オブジェクト\n     */\n    clone: function() {\n      return phina.geom.Matrix33(\n        this.m00, this.m01, this.m02,\n        this.m10, this.m11, this.m12,\n        this.m20, this.m21, this.m22\n      );\n    },\n\n    /**\n     * @method determinant\n     * 行列式を返します\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(0, -2, 0, -1, 3, 1, 4, 2, 1);\n     *     mat1.determinant(); // => -10\n     *     mat1.identity().determinant(); // => 1\n     *\n     * @return {Number} 行列式\n     */\n    determinant: function() {\n      var m00 = this.m00; var m01 = this.m01; var m02 = this.m02;\n      var m10 = this.m10; var m11 = this.m11; var m12 = this.m12;\n      var m20 = this.m20; var m21 = this.m21; var m22 = this.m22;\n      \n      return m00*m11*m22 + m10*m21*m02 + m01*m12*m20 - m02*m11*m20 - m01*m10*m22 - m12*m21*m00;\n    },\n\n    /**\n     * @method transpose\n     * @chainable\n     * 転置行列を返します。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat2 = phina.geom.Matrix33(1, 4, 7, 2, 5, 8, 3, 6, 9);\n     *     mat1.transpose().toString() == mat2.toString(); // => true\n     *\n     * @return {phina.geom.Matrix33} 転置行列\n     */\n    transpose: function() {\n      var swap = function(a, b) {\n        var temp = this[a];\n        this[a] = this[b];\n        this[b] = temp;\n      }.bind(this);\n\n      swap('m01', 'm10');\n      swap('m02', 'm20');\n      swap('m12', 'm21');\n      \n      return this;\n    },\n\n    /**\n     * @method invert\n     * @chainable\n     * 逆行列を返します。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(0, -1, 1, -1, 4, -2, 1, 1, 1);\n     *     mat2 = mat1.clone().invert();\n     *     mat3 = mat1.clone().multiply(mat2);\n     *     mat3.toString() == phina.geom.Matrix33.IDENTITY.toString(); // => true\n     *\n     * @return {phina.geom.Matrix33} 逆行列\n     */\n    invert: function() {\n      var m00 = this.m00; var m01 = this.m01; var m02 = this.m02;\n      var m10 = this.m10; var m11 = this.m11; var m12 = this.m12;\n      var m20 = this.m20; var m21 = this.m21; var m22 = this.m22;\n\n      var det = this.determinant();\n\n      // |m00, m01, m02|\n      // |m10, m11, m12|\n      // |m20, m21, m22|\n      this.m00 = (m11*m22-m12*m21)/det;\n      this.m01 = (m10*m22-m12*m20)/det*-1;\n      this.m02 = (m10*m21-m11*m20)/det;\n      \n      this.m10 = (m01*m22-m02*m21)/det*-1;\n      this.m11 = (m00*m22-m02*m20)/det;\n      this.m12 = (m00*m21-m01*m20)/det*-1;\n      \n      this.m20 = (m01*m12-m02*m11)/det;\n      this.m21 = (m00*m12-m02*m10)/det*-1;\n      this.m22 = (m00*m11-m01*m10)/det;\n      \n      this.transpose();\n      \n      return this;\n\n    },\n\n    /**\n     * @method multiply\n     * this に other を乗じます。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(0, -1, 1, -1, 4, -2, 1, 1, 1);\n     *     mat2 = mat1.clone().invert();\n     *     mat3 = mat1.clone().multiply(mat2);\n     *     mat3.toString() == phina.geom.Matrix33.IDENTITY.toString(); // => true\n     *\n     * @param {phina.geom.Matrix33} other 乗じる行列\n     * @return {phina.geom.Matrix33} 乗算結果の行列\n     */\n    multiply: function(mat) {\n        var tm = this.m;\n        var om = mat.m;\n\n        var a00 = this.m00, a01 = this.m01, a02 = this.m02;\n        var a10 = this.m10, a11 = this.m11, a12 = this.m12;\n        var a20 = this.m20, a21 = this.m21, a22 = this.m22;\n        var b00 = mat.m00, b01 = mat.m01, b02 = mat.m02;\n        var b10 = mat.m10, b11 = mat.m11, b12 = mat.m12;\n        var b20 = mat.m20, b21 = mat.m21, b22 = mat.m22;\n\n        this.m00 = a00*b00 + a01*b10 + a02*b20;\n        this.m01 = a00*b01 + a01*b11 + a02*b21;\n        this.m02 = a00*b02 + a01*b12 + a02*b22;\n\n        this.m10 = a10*b00 + a11*b10 + a12*b20;\n        this.m11 = a10*b01 + a11*b11 + a12*b21;\n        this.m12 = a10*b02 + a11*b12 + a12*b22;\n\n        this.m20 = a20*b00 + a21*b10 + a22*b20;\n        this.m21 = a20*b01 + a21*b11 + a22*b21;\n        this.m22 = a20*b02 + a21*b12 + a22*b22;\n        \n        return this;\n    },\n\n    /**\n     * @method multiplyVector2\n     * this に2次元ベクトル v を乗じます。\n     * 2次元ベクトルは (x, y, 1) として乗算します。\n     *\n     * ### Example\n     *     mat = phina.geom.Matrix33(0, -1, 1, -1, 4, -2, 1, 1, 1);\n     *     v = phina.geom.Vector2(2, 4)\n     *     mat.multiplyVector2(v) // => {x: -3, y: 12}\n     *\n     * @param {phina.geom.Vector2} v 乗じるベクトル\n     * @return {phina.geom.Vector2} 乗算結果のベクトル\n     */\n    multiplyVector2: function(v) {\n      var vx = this.m00*v.x + this.m01*v.y + this.m02;\n      var vy = this.m10*v.x + this.m11*v.y + this.m12;\n      \n      return phina.geom.Vector2(vx, vy);\n    },\n\n    // 行\n    /**\n     * @method getRow\n     * row 番目の行を配列で返します。row が 0、1、2 のいずれかでなければ null を返します。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat1.getRow(0); // [1, 2, 3]\n     *     mat1.getRow(1); // [4, 5, 6]\n     *     mat1.getRow(9); // null\n     *\n     * @param {0/1/2} row 行番号\n     * @return {Number[]} 行を表す配列\n     */\n    getRow: function(row) {\n      if ( row === 0 ) {\n        return [ this.m00, this.m01, this.m02 ];\n      }\n      else if ( row === 1 ) {\n        return [ this.m10, this.m11, this.m12 ];\n      }\n      else if ( row === 2 ) {\n        return [ this.m20, this.m21, this.m22 ];\n      }\n      else {\n        return null;\n      }\n    },\n\n    /**\n     * @method getCol\n     * col 番目の列を配列で返します。col が 0、1、2 のいずれかでなければ null を返します。\n     *\n     * ### Example\n     *     mat1 = phina.geom.Matrix33(1, 2, 3, 4, 5, 6, 7, 8, 9);\n     *     mat1.getCol(0); // [1, 4, 7]\n     *     mat1.getCol(1); // [2, 5, 8]\n     *     mat1.getRow(-1); // null\n     *\n     * @param {0/1/2} col 列番号\n     * @return {Number[]} 列を表す配列\n     */\n    getCol: function(col) {\n      if ( col === 0 ) {\n        return [ this.m00, this.m10, this.m20 ];\n      }\n      else if ( col === 1 ) {\n        return [ this.m01, this.m11, this.m21 ];\n      }\n      else if ( col === 2 ) {\n        return [ this.m02, this.m12, this.m22 ];\n      }\n      else {\n        return null;\n      }\n    },\n\n    /**\n     * @method toString\n     * 行列を JSON 形式で表現した文字列を返します。\n     *\n     * ### Example\n     *     v = phina.geom.Vector2(3, 4);\n     *     v2 = v.clone();\n     *     v2.x == v.x; // => true\n     *\n     * @return {String} JSON 文字列\n     */\n    toString: function() {\n      return \"|{m00}, {m01}, {m02}|\\n|{m10}, {m11}, {m12}|\\n|{m20}, {m21}, {m22}|\".format(this);\n    },\n\n  });\n\n  /**\n   * @property {phina.geom.Matrix33} IDENTITY 単位行列\n   * @readonly\n   */\n  phina.geom.Matrix33.IDENTITY = phina.geom.Matrix33().identity();\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.geom.Rect\n   * # 矩形領域を表すクラス\n   * キャンバス上の矩形領域を扱うクラスです。\n   * \n   */\n  phina.define('phina.geom.Rect', {\n\n    /**\n     * @property {Number} x\n     * 矩形の左上頂点の x 座標\n     */\n    x: 0,\n    /**\n     * @property {Number} y\n     * 矩形の左上頂点の y 座標\n     */\n    y: 0,\n    /**\n     * @property {Number} width\n     * 矩形の幅\n     */\n    width: 32,\n    /**\n     * @property {Number} hight\n     * 矩形の高さ\n     */\n    height: 32,\n\n    /**\n     * @method init\n     * 矩形領域のコンストラクタです。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(8, 16, 32, 64);\n     *\n     * @param {Number} x 矩形の左上頂点の x 座標\n     * @param {Number} y 矩形の左上頂点の y 座標\n     * @param {Number} width 幅\n     * @param {Number} height 高さ\n     * @return {phina.geom.Rect} 矩形領域オブジェクト\n     */\n    init: function(x, y, width, height) {\n      this.set(x, y, width, height);\n    },\n\n    /**\n     * @method set\n     * @chainable\n     * this の各値を再設定します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(8, 16, 32, 64);\n     *     rect.set(0, 16, 32, 64);\n     *\n     * @param {Number} x 矩形の左上頂点の x 座標\n     * @param {Number} y 矩形の左上頂点の y 座標\n     * @param {Number} width 幅\n     * @param {Number} height 高さ\n     */\n    set: function(x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n\n      return this;\n    },\n\n    /**\n     * @method moveTo\n     * @chainable\n     * 矩形領域を座標 (x, y) に移動します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(8, 16, 32, 64);\n     *     rect.centerX; // => 24\n     *     rect.moveTo(0, 0);\n     *     rect.centerX; // => 16\n     *\n     * @param {Number} x 移動先の x 座標\n     * @param {Number} y 移動先の y 座標\n     */\n    moveTo: function(x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * @method moveBy\n     * @chainable\n     * 矩形領域を (x, y) だけ移動します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(8, 16, 32, 64);\n     *     rect.moveBy(10, -10);\n     *     rect.x; // => 18\n     *     rect.y; // => 6\n     *\n     * @param {Number} x 移動量の x 座標\n     * @param {Number} y 移動量の y 座標\n     */\n    moveBy: function(x, y) {\n      this.x += x;\n      this.y += y;\n      return this;\n    },\n\n    /**\n     * @method setSizse\n     * @chainable\n     * 矩形領域の幅と高さを変更します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(8, 16, 32, 64);\n     *     rect.setSize(10, 20);\n     *     rect.width; // => 10\n     *     rect.height; // => 20\n     *\n     * @param {Number} width 幅\n     * @param {Number} height 高さ\n     */\n    setSize: function(w, h) {\n      this.width = w;\n      this.height = h;\n      return this;\n    },\n\n    /**\n     * @method padding\n     * @chainable\n     * 矩形領域の中にパディング領域を設定します。\n     *\n     * 矩形領域自体のサイズはパディング領域の分だけ小さくなります。  \n     * 幅の指定方法は CSS の padding 指定と同じように時計回りです。  \n     * 引数が1つの場合は上下左右の値、引数が2つの場合は上下と左右の値、引数が３つの場合は上、左右、下の値と解釈します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(50, 100, 150, 200);\n     *     rect.padding(10);\n     *     rect.x; // => 60\n     *     rect.y; // => 110\n     *     rect.width; // => 130\n     *     rect.height; // => 180\n     *\n     * @param {Number} top 上辺のパディング幅\n     * @param {Number} right 右辺のパディング幅\n     * @param {Number} bottom 下辺のパディング幅\n     * @param {Number} left 左辺のパディング幅\n     */\n    padding: function(top, right, bottom, left) {\n      // css の padding に合わせて時計回りにパラメータ調整\n      switch (arguments.length) {\n        case 1:\n          top = right = bottom = left = arguments[0];\n          break;\n        case 2:\n          top     = bottom = arguments[0];\n          right   = left   = arguments[1];\n          break;\n        case 3:\n          top     = arguments[0];\n          right   = left = arguments[1];\n          bottom  = arguments[2];\n          break;\n      }\n      \n      this.x += left;\n      this.y += top;\n      this.width -= left+right;\n      this.height-= top +bottom;\n      \n      return this;\n    },\n\n    /**\n     * @method contains\n     * 座標 (x, y) が 矩形領域の中に含まれるかどうかを返します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(50, 100, 150, 200);\n     *     rect.contains(35, 68); // =>  true\n     *     rect.contains(200, 68); // => false\n     *\n     * @param {Number} x 判定する対象の x 座標\n     * @param {Number} y 判定する対象の y 座標\n     * @return {Boolean} 指定した座標が矩形領域の中に含まれるかどうか\n     */\n    contains: function(x, y) {\n      return this.left <= x && x <= this.right && this.top <= y && y <= this.bottom;\n    },\n\n    /**\n     * @method clone\n     * this のコピーを生成して返します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(50, 100, 150, 200);\n     *     rect2 = rect.clone();\n     *     rect2.x == rect.x; // => true\n     *\n     * @return {Object} 生成した矩形領域\n     */\n    clone: function() {\n      return phina.geom.Rect(this.x, this.y, this.width, this.height);\n    },\n\n    /**\n     * @method toCircle\n     * 矩形領域内に収まる最大の円領域を生成して返します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(32, 64, 100, 200);\n     *     circle = rect.toCircle();\n     *     circle.x; // => 82\n     *     circle.y; // => 164\n     *     circle.radius; // => 50\n     *\n     * @return {Object} 生成した円領域\n     */\n    toCircle: function() {\n      var radius = ((this.width < this.height) ? this.width : this.height)/2;\n      return phina.geom.Circle(this.centerX, this.centerY, radius);\n    },\n\n    /**\n     * @method toArray\n     * this の各値を要素とする配列を生成して返します。\n     *\n     * ### Example\n     *     rect = phina.geom.Rect(32, 64, 100, 200);\n     *     rect.toArray(); // => [32, 64, 100, 200]\n     *\n     * @return {Number[]} 生成した配列\n     */\n    toArray: function() {\n      return [this.x, this.y, this.width, this.height];\n    },\n\n    _accessor: {\n      \n      /**\n       * @property {Number} left\n       * キャンバス左端から矩形領域の左辺までの距離\n       *\n       * left を変更すると矩形領域の幅（width）が自動的に調整されます。\n       *\n       * ### Example\n       *     rect = phina.geom.Rect(32, 64, 100, 200);\n       *     rect.left; // => 32\n       *     rect.width; // => 100\n       *     rect.right; // => 132\n       *     \n       *     rect.left = 42;\n       *     rect.width; // => 90\n       */\n      left: {\n        \"get\": function()   { return this.x; },\n        \"set\": function(v)  { this.width -= v-this.x; this.x = v; }\n      },\n      /**\n       * @property {Number} top\n       * キャンバス上端から矩形領域の上辺までの位置\n       *\n       * top を変更すると矩形領域の高さ（height）が自動的に調整されます。\n       */\n      top: {\n        \"get\": function()   { return this.y; },\n        \"set\": function(v)  { this.height -= v-this.y; this.y = v; }\n      },\n      /**\n       * @property {Number} right\n       * キャンバス左端から矩形領域の右辺までの距離\n       *\n       * right を変更すると矩形領域の幅（width）が自動的に調整されます。\n       */\n      right: {\n        \"get\": function()   { return this.x + this.width; },\n        \"set\": function(v)  { this.width += v-this.right; },\n      },\n      /**\n       * @property {Number} bottom\n       * キャンバス上端から矩形領域の下辺までの位置\n       *\n       * bottom を変更すると矩形領域の高さ（height）が自動的に調整されます。\n       */\n      bottom: {\n        \"get\": function()   { return this.y + this.height; },\n        \"set\": function(v)  { this.height += v-this.bottom; },\n      },\n      \n      /**\n       * @property {Number} centerX\n       * 矩形領域の x 座標\n       *\n       * 現時点では読み取り専用です。\n       */\n      centerX: {\n        \"get\": function()   { return this.x + this.width/2; },\n        \"set\": function(v)  {\n          // TODO: 検討中\n        },\n      },\n      /**\n       * @property {Number} centerY\n       * 矩形領域の y 座標\n       *\n       * 現時点では読み取り専用です。\n       */\n      centerY: {\n        \"get\": function()   { return this.y + this.height/2; },\n        \"set\": function(v)  {\n          // TODO: 検討中\n        },\n      },\n    }\n\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.geom.Circle\n   * # 円領域を表すクラス\n   * キャンバス上の円領域を扱うクラスです。\n   * \n   */\n  phina.define('phina.geom.Circle', {\n\n    /**\n     * @property {Number} x\n     * 円の中心の x 座標\n     */\n    x: 0,\n    /**\n     * @property {Number} y\n     * 円の中心の y 座標\n     */\n    y: 0,\n    /**\n     * @property {Number} radius\n     * 円の半径\n     */\n    radius: 32,\n\n    /**\n     * @method init\n     * 円領域のコンストラクタです。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(32, 64, 128);\n     *\n     * @param {Number} x 円の中心の x 座標\n     * @param {Number} y 円の中心の y 座標\n     * @param {Number} radius 半径\n     * @return {phina.geom.Rect} 円領域オブジェクト\n     */\n    init: function(x, y, radius) {\n      this.set(x, y, radius);\n    },\n\n    /**\n     * @method set\n     * @chainable\n     * this の各値を再設定します。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(32, 64, 128);\n     *     circle.set(100, 200, 32);\n     *\n     * @param {Number} x 円を囲う矩形の左上頂点の x 座標\n     * @param {Number} y 円を囲う矩形の左上頂点の x 座標\n     * @param {Number} radius 半径\n     * @return {phina.geom.Circle} 円領域オブジェクト\n     */\n    set: function(x, y, radius) {\n      this.x = x;\n      this.y = y;\n      this.radius = radius;\n\n      return this;\n    },\n\n    /**\n     * @method moveTo\n     * @chainable\n     * 円領域を座標 (x, y) に移動します。(x, y) は円の中心を表します。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(300, 300, 40);\n     *     circle.left; // => 260\n     *     circle.moveTo(100, 100);\n     *     circle.left; // => 60\n     *\n     * @param {Number} x 移動先の x 座標\n     * @param {Number} y 移動先の y 座標\n     */\n    moveTo: function(x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * @method moveBy\n     * @chainable\n     * 円領域を (x, y) だけ移動します。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(300, 300, 40);\n     *     circle.left; // => 260\n     *     circle.moveBy(100, 100);\n     *     circle.left; // => 460\n     *\n     * @param {Number} x 移動量の x 座標\n     * @param {Number} y 移動量の y 座標\n     */\n    moveBy: function(x, y) {\n      this.x += x;\n      this.y += y;\n      return this;\n    },\n\n    /**\n     * @method contains\n     * 座標 (x, y) が円領域の中に含まれるかどうかを返します。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(300, 300, 100);\n     *     circle.contains(350, 350); // =>  true\n     *     circle.contains(350, 400); // => false\n     *\n     * @param {Number} x 判定する対象の x 座標\n     * @param {Number} y 判定する対象の y 座標\n     * @return {Boolean} 指定した座標が円領域の中に含まれるかどうか\n     */\n    contains: function(x, y) {\n      var lenX = this.x-x;\n      var lenY = this.y-y;\n      var lenSquared = (lenX*lenX)+(lenY*lenY);\n\n      return lenSquared <= this.radius*this.radius;\n    },\n\n    /**\n     * @method clone\n     * this のコピーを生成して返します。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(50, 100, 40);\n     *     circle2 = circle.clone();\n     *     circle2.x == circle.x; // => true\n     *\n     * @return {Object} 生成した円領域\n     */\n    clone: function() {\n      return phina.geom.Circle(this.x, this.y, this.radius);\n    },\n\n    /**\n     * @method toRect\n     * 円に外接する正方形を表す矩形領域を生成して返します。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(50, 100, 40);\n     *     rect = circle.toRect();\n     *     rect.x; // => 10\n     *     rect.y; // => 60\n     *     rect.width; // => 80\n     *\n     * @return {Object} 生成した矩形領域\n     */\n    toRect: function() {\n      var size = this.size;\n      return phina.geom.Rect(this.x - this.radius, this.y - this.radius, size, size);\n    },\n    /**\n     * @method toArray\n     * this の各値を要素とする配列を生成して返します。\n     *\n     * ### Example\n     *     circle = phina.geom.Circle(50, 100, 40);\n     *     rect.toArray(); // => [50, 100, 40]\n     *\n     * @return {Number[]} 生成した配列\n     */\n    toArray: function() {\n      return [this.x, this.y, this.radius];\n    },\n\n    _accessor: {\n      \n      /**\n       * @property {Number} left\n       * @readonly\n       * キャンバス左端から円の左端までの距離\n       *\n       * 現時点では読み取り専用です。\n       *\n       * ### Example\n       *     circle = phina.geom.Circle(200, 300, 100);\n       *     circle.left; // => 100\n       *     circle.top; // => 200\n       *     circle.right; // => 300\n       *     circle.bottom; // => 400\n       */\n      left: {\n        \"get\": function()   { return this.x - this.radius; },\n        \"set\": function(v)  {\n          // TODO: \n        }\n      },\n      /**\n       * @property {Number} top\n       * @readonly\n       * キャンバス上端から円の上端までの距離\n       *\n       * 現時点では読み取り専用です。\n       */\n      top: {\n        \"get\": function()   { return this.y - this.radius; },\n        \"set\": function(v)  {\n          // TODO: \n        }\n      },\n      /**\n       * @property {Number} right\n       * @readonly\n       * キャンバス右端から円の右端までの距離\n       *\n       * 現時点では読み取り専用です。\n       */\n      right: {\n        \"get\": function()   { return this.x + this.radius; },\n        \"set\": function(v)  {\n          // TODO: \n        }\n      },\n      /**\n       * @property {Number} bottom\n       * @readonly\n       * キャンバス下端から円の下端までの距離\n       *\n       * 現時点では読み取り専用です。\n       */\n      bottom: {\n        \"get\": function()   { return this.y + this.radius; },\n        \"set\": function(v)  {\n          // TODO: \n        }\n      },\n      /**\n       * @property {Number} size\n       * @readonly\n       * 円の直径\n       *\n       * 現時点では読み取り専用です。\n       */\n      size: {\n        \"get\": function()   { return this.radius*2; },\n        \"set\": function(v)  {\n          // TODO: 検討中\n        },\n      },\n    }\n\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.geom.Collision\n   * # 衝突判定用クラス\n   * 衝突判定のためのクラスです。すべてのメソッドがスタティックメソッドです。\n   * \n   */\n  phina.define('phina.geom.Collision', {\n\n    _static: {\n      /**\n       * @method testCircleCircle\n       * @static\n       * 2つの円領域が重なっているかどうかを判定します\n       *\n       * ### Example\n       *     circle1 = phina.geom.Circle(100, 100, 30);\n       *     circle2 = phina.geom.Circle(130, 140, 30);\n       * phina.geom.Collision.testCircleCircle(circle1, circle2); // => true\n       *\n       * @param {phina.geom.Circle} circle1 円領域オブジェクト\n       * @param {phina.geom.Circle} circle2 円領域オブジェクト\n       * @return {Boolean} 領域が重なっているかどうか\n       */\n      testCircleCircle: function(circle0, circle1) {\n        var distanceSquared = phina.geom.Vector2.distanceSquared(circle0, circle1);\n        return distanceSquared <= Math.pow(circle0.radius + circle1.radius, 2);\n      },\n      /**\n       * @method testRectRect\n       * @static\n       * 2つの矩形領域が重なっているかどうかを判定します\n       *\n       * ### Example\n       *     rect1 = phina.geom.Rect(100, 100, 30, 40);\n       *     rect2 = phina.geom.Rect(200, 200, 10, 10);\n       *     phina.geom.Collision.testRectRect(rect1, rect2); // => false\n       *\n       * @param {phina.geom.Rect} rect1 矩形領域オブジェクト\n       * @param {phina.geom.Rect} rect2 矩形領域オブジェクト\n       * @return {Boolean} 領域が重なっているかどうか\n       */\n      testRectRect: function(rect0, rect1) {\n        return (rect0.left < rect1.right) && (rect0.right > rect1.left) &&\n          (rect0.top < rect1.bottom) && (rect0.bottom > rect1.top);\n      },\n      /**\n       * @method testCircleRect\n       * @static\n       * 円領域と矩形領域が重なっているかどうかかを判定します\n       *\n       * ### Example\n       *     circle = phina.geom.Circle(100, 100, 30);\n       *     rect = phina.geom.Rect(100, 100, 30, 40);\n       *     phina.geom.Collision.testCircleRect(circle, rect); // => true\n       *\n       * @param {phina.geom.Circle} circle 円領域オブジェクト\n       * @param {phina.geom.Rect} rect 矩形領域オブジェクト\n       * @return {Boolean} 領域が重なっているかどうか\n       */\n      testCircleRect: function(circle, rect) {\n        // まずは大きな矩形で判定(高速化)\n        var bigRect = phina.geom.Rect(rect.left-circle.radius, rect.top-circle.radius, rect.width+circle.radius*2, rect.height+circle.radius*2);\n        if (bigRect.contains(circle.x, circle.y) === false) {\n          return false;\n        }\n        \n        // 2種類の矩形と衝突判定\n        var r = phina.geom.Rect(rect.left-circle.radius, rect.top, rect.width+circle.radius*2, rect.height);\n        if (r.contains(circle.x, circle.y)) {\n          return true;\n        }\n        r.set(rect.left, rect.top-circle.radius, rect.width, rect.height+circle.radius*2);\n        if (r.contains(circle.x, circle.y)) {\n          return true;\n        }\n        \n        // 円と矩形の４点の判定\n        var c = phina.geom.Circle(circle.x, circle.y, circle.radius);\n        // left top\n        if (c.contains(rect.left, rect.top)) {\n          return true;\n        }\n        // right top\n        if (c.contains(rect.right, rect.top)) {\n          return true;\n        }\n        // right bottom\n        if (c.contains(rect.right, rect.bottom)) {\n          return true;\n        }\n        // left bottom\n        if (c.contains(rect.left, rect.bottom)) {\n          return true;\n        }\n        \n        return false;\n      },\n      /**\n       * @method testCircleLine\n       * @static\n       * 円領域と線分が重なっているかどうかを判定します\n       *\n       * ### Example\n       *     circle = phina.geom.Circle(100, 100, 20);\n       *     p1 = phina.geom.Vector2(0, 0);\n       *     p2 = phina.geom.Vector2(300, 400);\n       *     phina.geom.Collision.testCircleLine(circle, p1, p2); // => true\n       *\n       * @param {phina.geom.Circle} circle 円領域オブジェクト\n       * @param {phina.geom.Vector2} p1 線分の端の座標\n       * @param {phina.geom.Vector2} p2 線分の端の座標\n       * @return {Boolean} 円領域と線分が重なっているかどうか\n       */\n      testCircleLine : function(circle, p1, p2) {\n        // 先に線分端との判定\n        if (circle.contains(p1.x, p1.y) || circle.contains(p2.x, p2.y)) return true;\n        // 半径の2乗\n        var r2 = circle.radius * circle.radius;\n        // 円の中心座標\n        var p3 = phina.geom.Vector2(circle.x, circle.y);\n        // 各ベクトル\n        var p1p2 = phina.geom.Vector2.sub(p1, p2);\n        var p1p3 = phina.geom.Vector2.sub(p1, p3);\n        var p2p3 = phina.geom.Vector2.sub(p2, p3);\n        // 外積\n        var cross = phina.geom.Vector2.cross(p1p2, p1p3);\n        // 外積の絶対値の2乗\n        var cross2 = cross * cross;\n        // p1p2の長さの2乗\n        var length2 = p1p2.lengthSquared();\n        // 円の中心から線分までの垂線の距離の2乗\n        var d2 = cross2 / length2;\n        // 円の半径の2乗より小さいなら重複\n        if (d2 <= r2) {\n          var dot1 = phina.geom.Vector2.dot(p1p3, p1p2);\n          var dot2 = phina.geom.Vector2.dot(p2p3, p1p2);\n          // 通常は内積の乗算\n          if (dot1 * dot2 <= 0) return true;\n        }\n        return false;\n      },\n    }\n\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.util.Support\n   * \n   */\n  phina.define('phina.util.Support', {\n    _static: {\n      canvas: !!phina.global.CanvasRenderingContext2D,\n      webGL: (function() {\n        return !!phina.global.CanvasRenderingContext2D && !!document.createElement('canvas').getContext('webgl');\n      })(),\n      webAudio: !!phina.global.AudioContext || !!phina.global.webkitAudioContext || !!phina.global.mozAudioContext,\n    },\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.util.EventDispatcher\n   * # イベントを扱うためのクラス\n   * イベントを扱うためのメソッドやプロパティを定義しているクラスです。\n   * phina.js が提供するクラスの多くはこの EventDispatcher クラスの子孫となっているため、\n   * ほとんどのオブジェクトで容易にイベントを扱うことができます。\n   *\n   * # 少し説明\n   * this.onxxx = function(){}; でもイベントリスナを設定できるが、あまり推奨しない。\n   * 呼び出される順序は、まず this.onxxxx が呼び出され、あとは on() で登録した順番。\n   */\n  phina.define('phina.util.EventDispatcher', {\n\n    init: function() {\n      this._listeners = {};\n    },\n\n    /**\n     * @method on\n     * @chainable\n     * イベントリスナを登録します。\n     *\n     * １つのイベントに対するイベントリスナはいくつでも登録することができます。\n     *\n     * 標準のイベントを検知するには、オブジェクトの {@link Object2D#interactive} プロパティが true である必要があります。\n     * {@link Object2D#interactive} プロパティを設定するには {@link Object2D#setInteractive} メソッドを呼び出してください。\n     *\n     * また、{@link #flare} や {@link #fire} によって定義したカスタムイベントに対するイベントリスナも登録することが\n     * できます。カスタムイベントのイベントリスナは {@link Object2D#interactive} プロパティによらず呼び出されます。\n     * なおカスタムイベントのオブジェクトは Event オブジェクトとは異なります。\n     *\n     * ###Reference\n     * 標準のイベントの種類は以下を参照してください。  \n     * - [Event reference | MDN]( https://developer.mozilla.org/en-US/docs/Web/Events )\n     *\n     * ### Example\n     *     var shape = CircleShape().addChildTo(this).setInteractive(true).setPosition(50, 50);\n     *     shape.on(\"touchstart\", function(e){\n     *       this.color = \"blue\";\n     *     });\n     *\n     * @param {String} type イベントの種類\n     * @param {Function} listener イベントリスナとなる関数\n     * @param {Object} listener.event Event オブジェクト、またはカスタムイベントのオブジェクト\n     */\n    on: function(type, listener) {\n      if (this._listeners[type] === undefined) {\n        this._listeners[type] = [];\n      }\n\n      this._listeners[type].push(listener);\n      return this;\n    },\n\n    /**\n     * @method off\n     * @chainable\n     * イベントリスナを削除します。\n     *\n     * ある種類のイベントに対するイベントリスナをすべて削除するには {@link #clear} を使用してください。\n     *\n     * @param {String} type イベントの種類\n     * @param {Function} listener イベントリスナ関数\n     */\n    off: function(type, listener) {\n      var listeners = this._listeners[type];\n      var index = listeners.indexOf(listener);\n      if (index != -1) {\n        listeners.splice(index,1);\n      }\n      return this;\n    },\n\n    /**\n     * @method fire\n     * @chainable\n     * カスタムイベントを表すオブジェクトを指定してカスタムイベントを発火します。\n     *\n     * @param {Object} event カスタムイベントを表すオブジェクト\n     * @param {String} event.type カスタムイベントの名前\n     */\n     fire: function(e) {\n      e.target = this;\n      var oldEventName = 'on' + e.type;\n      if (this[oldEventName]) this[oldEventName](e);\n      \n      var listeners = this._listeners[e.type];\n      if (listeners) {\n        var temp = listeners.clone();\n        for (var i=0,len=temp.length; i<len; ++i) {\n            temp[i].call(this, e);\n        }\n      }\n      \n      return this;\n    },\n\n    /**\n     * @method flare\n     * @chainable\n     * イベント名を指定してカスタムイベントを発火します。\n     *\n     * param 引数を指定することによりカスタムイベントに任意のプロパティを設定することができます。  \n     * これにより、呼び出し元がイベントリスナに任意の値を渡すことができます。  \n     * （ただし target プロパティには必ず自分自身が格納されます。）\n     *\n     * ### Example\n     *     //\n     *\n     * @param {String} type カスタムイベントの名前\n     * @param {Object} [param] カスタムイベントにプロパティを設定するためのオブジェクト\n    */\n    flare: function(type, param) {\n      var e = {type:type};\n      if (param) {\n        param.forIn(function(key, val) {\n          e[key] = val;\n        });\n      }\n      this.fire(e);\n\n      return this;\n    },\n\n    /**\n     * @method one\n     * @chainable\n     * 一度だけ実行されるイベントリスナを登録します。\n     *\n     * 指定したイベントリスナが一度実行されると、そのイベントリスナは削除されます。それ以外の挙動は {@link #on} と同じです。\n     *\n     * @param {String} type イベントの種類\n     * @param {Function} listener イベントリスナとなる関数\n     * @param {Object} listener.event Event オブジェクト、またはカスタムイベントのオブジェクト\n     */\n    one: function(type, listener) {\n      var self = this;\n      \n      var func = function() {\n        var result = listener.apply(self, arguments);\n        self.off(type, func);\n        return result;\n      };\n      \n      this.on(type, func);\n      \n      return this;\n    },\n\n    /**\n     * @method has\n     * イベントリスナが登録されているかどうかを調べます。\n     *\n     * 指定したイベントの種類に対するイベントリスナが登録されている場合は true、そうでない場合は false を返します。\n     *\n     * @param {String} type イベントの種類\n     * @return {Boolean} 指定したイベントのイベントリスナが登録されているかどうか\n     */\n    has: function(type) {\n      return (this._listeners[type] !== undefined && this._listeners[type].length !== 0) || !!this['on' + type];\n    },\n\n    /**\n     * @method clear\n     * @chainable\n     * ある種類のイベントに対するイベントリスナをすべて削除します。\n     *\n     * 特定のイベントリスナのみを削除するには {@link #off} を使用してください。\n     *\n     * @param {String} type イベントの種類\n     */\n    clear: function(type) {\n      var oldEventName = 'on' + type;\n      if (this[oldEventName]) delete this[oldEventName];\n      this._listeners[type] = [];\n      return this;\n    },\n  });\n\n  /**\n   * @method addEventListener\n   * {@link #on} のエイリアスです。\n   */\n  /**\n   * @method removeEventListener\n   * {@link #off} のエイリアスです。\n   */\n  /**\n   * @method clearEventListener\n   * {@link #clear} のエイリアスです。\n   */\n  /**\n   * @method hasEventListener\n   * {@link #has} のエイリアスです。\n   */\n  /**\n   * @method dispatchEvent\n   * {@link #fire} のエイリアスです。\n   */\n  /**\n   * @method dispatchEventByType\n   * {@link #flare} のエイリアスです。\n   */\n  (function() {\n    var methodMap = {\n      addEventListener: 'on',\n      removeEventListener: 'off',\n      clearEventListener: 'clear',\n      hasEventListener: 'has',\n      dispatchEvent: 'fire',\n      dispatchEventByType: 'flare',\n    };\n    methodMap.forIn(function(old, name) {\n      phina.util.EventDispatcher.prototype.$method(old, phina.util.EventDispatcher.prototype[name]);\n    });\n  })();\n\n});\n\n\n;(function() {\n\n  /**\n   * @class phina.util.Tween\n   * \n   */\n  phina.define('phina.util.Tween', {\n    superClass: 'phina.util.EventDispatcher',\n\n    /**\n     * @constructor\n     */\n    init: function(target) {\n      this.superInit();\n\n      this.time = 0;\n    },\n\n    fromTo: function(target, beginProps, finishProps, duration, easing) {\n      this.target = target;\n      this.beginProps = beginProps;\n      this.finishProps = finishProps;\n      this.duration = duration || 1000;\n      this.easing = easing;\n\n      // setup\n      this.changeProps = {};\n      for (var key in beginProps) {\n          this.changeProps[key] = finishProps[key] - beginProps[key];\n      }\n\n      return this;\n    },\n\n    to: function(target, finishProps, duration, easing) {\n      var beginProps = {};\n\n      for (var key in finishProps) {\n        beginProps[key] = target[key];\n      }\n\n      this.fromTo(target, beginProps, finishProps, duration, easing);\n\n      return this;\n    },\n\n    from: function(target, beginProps, duration, easing) {\n        var finishProps = {};\n\n        for (var key in beginProps) {\n          finishProps[key] = target[key];\n          target[key] = beginProps[key];\n        }\n\n        this.fromTo(target, beginProps, finishProps, duration, easing);\n\n        return this;\n    },\n\n    by: function(target, props, duration, easing) {\n      var beginProps = {};\n      var finishProps = {};\n\n      for (var key in props) {\n        beginProps[key] = target[key];\n        finishProps[key] = target[key] + props[key];\n      }\n\n      this.fromTo(target, beginProps, finishProps, duration, easing);\n\n      return this;\n    },\n\n    yoyo: function() {\n      var temp = this.beginProps;\n      this.beginProps = this.finishProps;\n      this.finishProps = temp;\n      this.changeProps.forIn(function(key, value, index) {\n        this.changeProps[key] = -value;\n        this.target[key] = this.beginProps[key];\n      }, this);\n      // TODO: easing も反転させる\n      // this.easing = easing;\n      return this;\n    },\n\n    gain: function(time) {\n      this.seek(this.time + time);\n    },\n    forward: function(time) {\n      this.seek(this.time + time);\n    },\n\n    backward: function(time) {\n      this.seek(this.time - time);\n    },\n\n    seek: function(time) {\n      this.time = Math.clamp(time, 0, this.duration);\n\n      this.beginProps.forIn(function(key, value) {\n        var v = this.easing(this.time, value, this.changeProps[key], this.duration);\n        this.target[key] = v;\n      }, this);\n\n      return this;\n    },\n\n    _accessor: {\n      easing: {\n        get: function() {\n          return this._easing;\n        },\n        set: function(v) {\n          this._easing = phina.util.Tween.EASING[v] || phina.util.Tween.EASING.default;\n        },\n      },\n    },\n\n    _static: {\n      /**\n       * @static\n       * イージング\n       * ### Reference\n       * - <http://coderepos.org/share/wiki/JSTweener>\n       * - <http://coderepos.org/share/browser/lang/javascript/jstweener/trunk/src/JSTweener.js>\n       * - <http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js>\n       * - <http://hosted.zeh.com.br/tweener/docs/en-us/misc/transitions.html>\n       */\n      EASING: {\n\n        /** default */\n        \"default\": function(t, b, c, d) {\n          return c*t/d + b;\n        },\n        /** linear */\n        linear: function(t, b, c, d) {\n          return c*t/d + b;\n        },\n        /** swing */\n        swing: function(t, b, c, d) {\n          return -c *(t/=d)*(t-2) + b;\n        },\n        /** easeInQuad */\n        easeInQuad: function(t, b, c, d) {\n          return c*(t/=d)*t + b;\n        },\n        /** easeOutQuad */\n        easeOutQuad: function(t, b, c, d) {\n          return -c *(t/=d)*(t-2) + b;\n        },\n        /** easeInOutQuad */\n        easeInOutQuad: function(t, b, c, d) {\n          if((t/=d/2) < 1) return c/2*t*t + b;\n          return -c/2 *((--t)*(t-2) - 1) + b;\n        },\n        /** defeInCubic */\n        easeInCubic: function(t, b, c, d) {\n          return c*(t/=d)*t*t + b;\n        },\n        /** easeOutCubic */\n        easeOutCubic: function(t, b, c, d) {\n          return c*((t=t/d-1)*t*t + 1) + b;\n        },\n        /** easeInOutCubic */\n        easeInOutCubic: function(t, b, c, d) {\n          if((t/=d/2) < 1) return c/2*t*t*t + b;\n          return c/2*((t-=2)*t*t + 2) + b;\n        },\n        /** easeOutInCubic */\n        easeOutInCubic: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutCubic(t*2, b, c/2, d);\n          return phina.util.Tween.EASING.easeInCubic((t*2)-d, b+c/2, c/2, d);\n        },\n        /** easeInQuart */\n        easeInQuart: function(t, b, c, d) {\n          return c*(t/=d)*t*t*t + b;\n        },\n        /** easeOutQuart */\n        easeOutQuart: function(t, b, c, d) {\n          return -c *((t=t/d-1)*t*t*t - 1) + b;\n        },\n        /** easeInOutQuart */\n        easeInOutQuart: function(t, b, c, d) {\n          if((t/=d/2) < 1) return c/2*t*t*t*t + b;\n          return -c/2 *((t-=2)*t*t*t - 2) + b;\n        },\n        /** easeOutInQuart */\n        easeOutInQuart: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutQuart(t*2, b, c/2, d);\n          return phina.util.Tween.EASING.easeInQuart((t*2)-d, b+c/2, c/2, d);\n        },\n        /** easeInQuint */\n        easeInQuint: function(t, b, c, d) {\n          return c*(t/=d)*t*t*t*t + b;\n        },\n        /** easeOutQuint */\n        easeOutQuint: function(t, b, c, d) {\n          return c*((t=t/d-1)*t*t*t*t + 1) + b;\n        },\n        /** easeInOutQuint */\n        easeInOutQuint: function(t, b, c, d) {\n          if((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n          return c/2*((t-=2)*t*t*t*t + 2) + b;\n        },\n        /** easeOutInQuint */\n        easeOutInQuint: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutQuint(t*2, b, c/2, d);\n          return phina.util.Tween.EASING.easeInQuint((t*2)-d, b+c/2, c/2, d);\n        },\n        /** easeInSine */\n        easeInSine: function(t, b, c, d) {\n          return -c * Math.cos(t/d *(Math.PI/2)) + c + b;\n        },\n        /** easeOutSine */\n        easeOutSine: function(t, b, c, d) {\n          return c * Math.sin(t/d *(Math.PI/2)) + b;\n        },\n        /** easeInOutSine */\n        easeInOutSine: function(t, b, c, d) {\n          return -c/2 *(Math.cos(Math.PI*t/d) - 1) + b;\n        },\n        /** easeOutInSine */\n        easeOutInSine: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutSine(t*2, b, c/2, d);\n          return phina.util.Tween.EASING.easeInSine((t*2)-d, b+c/2, c/2, d);\n        },\n        /** easeInExpo */\n        easeInExpo: function(t, b, c, d) {\n          return(t==0) ? b : c * Math.pow(2, 10 *(t/d - 1)) + b - c * 0.001;\n        },\n        /** easeOutExpo */\n        easeOutExpo: function(t, b, c, d) {\n          return(t==d) ? b+c : c * 1.001 *(-Math.pow(2, -10 * t/d) + 1) + b;\n        },\n        /** easeInOutExpo */\n        easeInOutExpo: function(t, b, c, d) {\n          if(t==0) return b;\n          if(t==d) return b+c;\n          if((t/=d/2) < 1) return c/2 * Math.pow(2, 10 *(t - 1)) + b - c * 0.0005;\n          return c/2 * 1.0005 *(-Math.pow(2, -10 * --t) + 2) + b;\n        },\n        /** easeOutInExpo */\n        easeOutInExpo: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutExpo(t*2, b, c/2, d);\n          return phina.util.Tween.EASING.easeInExpo((t*2)-d, b+c/2, c/2, d);\n        },\n        /** easeInCirc */\n        easeInCirc: function(t, b, c, d) {\n          return -c *(Math.sqrt(1 -(t/=d)*t) - 1) + b;\n        },\n        /** easeOutCirc */\n        easeOutCirc: function(t, b, c, d) {\n          return c * Math.sqrt(1 -(t=t/d-1)*t) + b;\n        },\n        /** easeInOutCirc */\n        easeInOutCirc: function(t, b, c, d) {\n          if((t/=d/2) < 1) return -c/2 *(Math.sqrt(1 - t*t) - 1) + b;\n          return c/2 *(Math.sqrt(1 -(t-=2)*t) + 1) + b;\n        },\n        /** easeOutInCirc */\n        easeOutInCirc: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutCirc(t*2, b, c/2, d);\n          return phina.util.Tween.EASING.easeInCirc((t*2)-d, b+c/2, c/2, d);\n        },\n        /** easeInElastic */\n        easeInElastic: function(t, b, c, d, a, p) {\n          var s;\n          if(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n          if(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n          return -(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n        },\n        /** easeOutElastic */\n        easeOutElastic: function(t, b, c, d, a, p) {\n          var s;\n          if(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n          if(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n          return(a*Math.pow(2,-10*t) * Math.sin((t*d-s)*(2*Math.PI)/p ) + c + b);\n        },\n        /** easeInOutElastic */\n        easeInOutElastic: function(t, b, c, d, a, p) {\n          var s;\n          if(t==0) return b;  if((t/=d/2)==2) return b+c;  if(!p) p=d*(.3*1.5);\n          if(!a || a < Math.abs(c)) { a=c; s=p/4; }       else s = p/(2*Math.PI) * Math.asin(c/a);\n          if(t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n          return a*Math.pow(2,-10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n        },\n        /** easeOutInElastic */\n        easeOutInElastic: function(t, b, c, d, a, p) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutElastic(t*2, b, c/2, d, a, p);\n          return phina.util.Tween.EASING.easeInElastic((t*2)-d, b+c/2, c/2, d, a, p);\n        },\n        /** easeInBack */\n        easeInBack: function(t, b, c, d, s) {\n          if(s == undefined) s = 1.70158;\n          return c*(t/=d)*t*((s+1)*t - s) + b;\n        },\n        /** easeOutBack */\n        easeOutBack: function(t, b, c, d, s) {\n          if(s == undefined) s = 1.70158;\n          return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n        },\n        /** easeInOutBack */\n        easeInOutBack: function(t, b, c, d, s) {\n          if(s == undefined) s = 1.70158;\n          if((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n          return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n        },\n        /** easeOutInBack */\n        easeOutInBack: function(t, b, c, d, s) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutBack(t*2, b, c/2, d, s);\n          return phina.util.Tween.EASING.easeInBack((t*2)-d, b+c/2, c/2, d, s);\n        },\n        /** easeInBounce */\n        easeInBounce: function(t, b, c, d) {\n          return c - phina.util.Tween.EASING.easeOutBounce(d-t, 0, c, d) + b;\n        },\n        /** easeOutBounce */\n        easeOutBounce: function(t, b, c, d) {\n          if((t/=d) <(1/2.75)) {\n            return c*(7.5625*t*t) + b;\n          } else if(t <(2/2.75)) {\n            return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n          } else if(t <(2.5/2.75)) {\n            return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n          } else {\n            return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n          }\n        },\n        /** easeInOutBounce */\n        easeInOutBounce: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeInBounce(t*2, 0, c, d) * .5 + b;\n          else return phina.util.Tween.EASING.easeOutBounce(t*2-d, 0, c, d) * .5 + c*.5 + b;\n        },\n        /** easeOutInBounce */\n        easeOutInBounce: function(t, b, c, d) {\n          if(t < d/2) return phina.util.Tween.EASING.easeOutBounce(t*2, b, c/2, d);\n          return phina.util.Tween.EASING.easeInBounce((t*2)-d, b+c/2, c/2, d);\n        }\n\n      },\n    },\n  });\n\n})();\n\n\n\n;(function() {\n\n  /**\n   * @class phina.util.Ticker\n   * tick management class\n   */\n  phina.define('phina.util.Ticker', {\n    superClass: 'phina.util.EventDispatcher',\n\n    /** 経過フレーム数 */\n    frame: null,\n    /** 1フレームの経過時間 */\n    deltaTime: null,\n    /** 全体の経過時間 */\n    elapsedTime: null,\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n\n      this.fps = 30;\n      this.frame = 0;\n      this.deltaTime = 0;\n      this.elapsedTime = 0;\n    },\n\n    tick: function(func) {\n      this.on('tick', func);\n    },\n\n    run: function() {\n      var now = (new Date()).getTime();\n      // 1フレームに掛かった時間\n      this.deltaTime = now - this.currentTime;\n      // 全体の経過時間\n      this.elapsedTime = now - this.startTime;\n\n      var start = this.currentTime = now;\n      this.flare('tick');\n      var end = (new Date()).getTime();\n\n      // フレームを更新\n      this.frame += 1;\n\n      // calculate elapsed time\n      var elapsed = end-start;\n\n      // calculate next waiting time\n      var delay = Math.max(this.frameTime-elapsed, 0);\n\n      return delay;\n    },\n\n    start: function() {\n      var self = this;\n\n      this.startTime = this.currentTime = (new Date()).getTime();\n\n      var fn = function() {\n        var delay = self.run();\n        setTimeout(fn, delay);\n      };\n      fn();\n\n      return this;\n    },\n\n    resume: function() {\n      // TODO: \n    },\n\n    stop: function() {\n      // TODO: \n    },\n\n    rewind: function() {\n      // TODO: \n    },\n\n    _accessor: {\n      fps: {\n        \"get\": function()   { return this._fps; },\n        \"set\": function(v)  {\n          this._fps = v;\n          this.frameTime = 1000/this._fps;\n        },\n      },\n    },\n  });\n\n})();\n\n;(function() {\n\n  /**\n   * @class phina.util.Grid\n   * tick management class\n   */\n  phina.define('phina.util.Grid', {\n\n    /** 幅 */\n    width: 640,\n    /** 列数 */\n    columns: 12,\n    /** ループ */\n    loop: false,\n    /** オフセット値 */\n    offset: 0,\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      if (typeof arguments[0] === 'object') {\n        var param = arguments[0];\n        var width = param.width || 640;\n        var columns = param.columns || 12;\n        var loop = param.loop || false;\n        var offset = param.offset || 0;\n      }\n      else {\n        var width   = arguments[0] || 640;\n        var columns = arguments[1] || 12;\n        var loop    = arguments[2] || false;\n        var offset = arguments[3] || 0;\n      }\n\n      this.width = width;\n      this.columns = columns;\n      this.loop = loop;\n      this.offset = offset;\n      this.unitWidth = this.width/this.columns;\n    },\n\n    // スパン指定で値を取得(負数もok)\n    span: function(index) {\n      if (this.loop) {\n        index += this.columns;\n        index %= this.columns;\n      }\n      return this.unitWidth * index + this.offset;\n    },\n\n    //\n    unit: function() {\n      return this.unitWidth;\n    },\n\n    center: function(offset) {\n      var index = offset || 0;\n      return (this.width/2) + (this.unitWidth * index);\n    },\n\n  });\n\n})();\n\n\n\n// 監視オブジェクト\n// register で key を登録 (デフォルト値も一緒に？)\n// event dispatcher を継承\n// event dispatcher って util じゃね？\n// register で登録した値を変更したら change イベントが走る\n\n\n// 名前候補\n//  middleman(仲立人)\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.util.ChangeDispatcher\n   */\n  phina.define('phina.util.ChangeDispatcher', {\n    superClass: 'phina.util.EventDispatcher',\n\n    init: function() {\n      this.superInit();\n\n      this._observe = true;\n    },\n\n    register: function(key, defaultValue) {\n      if (arguments.length === 1) {\n        var obj = arguments[0];\n        obj.forIn(function(key, value) {\n          this.register(key, value);\n        }, this);\n      }\n      else {\n        var tempKey = '__' + key;\n        this[tempKey] = defaultValue;\n        this.accessor(key, {\n          get: function() {\n            return this[tempKey];\n          },\n          set: function(v) {\n            this[tempKey] = v;\n            if (this._observe) {\n              this.flare('change');\n            }\n          },\n        });\n      }\n      return this;\n    },\n\n    observe: function() {\n      this._observe = true;\n    },\n    unobserve: function() {\n      this._observe = false;\n    },\n  });\n\n});\n\n;(function() {\n\n  /**\n   * @class phina.util.Flow\n   * tick management class\n   */\n  phina.define('phina.util.Flow', {\n    superClass: 'phina.util.EventDispatcher',\n\n    /**\n     * @constructor\n     */\n    init: function(func, wait) {\n      this.superInit();\n\n      this.status = 'pending';\n      this.resultValue = null;\n      this._queue = [];\n      this.func = func;\n\n      if (wait !== true) {\n        var self = this;\n        var resolve = function() {\n          self.resolve.apply(self, arguments);\n          self.status = 'resolved';\n        };\n        var reject = function() {\n          self.reject.apply(self, arguments);\n          self.status = 'rejected';\n        };\n\n        this.func(resolve, reject);\n      }\n    },\n\n    /*\n     * 成功\n     */\n    resolve: function(arg) {\n      this.resultValue = arg;\n\n      // キューに積まれた関数を実行\n      this._queue.each(function(func) {\n        func(this.resultValue);\n      }, this);\n      this._queue.clear();\n    },\n\n    /*\n     * 失敗\n     */\n    reject: function() {\n\n    },\n\n    /*\n     * 非同期終了時の処理を登録\n     */\n    then: function(func) {\n      var self = this;\n      // 成功ステータスだった場合は即実行\n      if (this.status === 'resolved') {\n        var value = func(this.resultValue);\n        return phina.util.Flow.resolve(value);\n      }\n      else {\n        var flow = phina.util.Flow(function(resolve) {\n          resolve();\n        }, true);\n\n        this._queue.push(function(arg) {\n          var resultValue = func(arg);\n\n          if (resultValue instanceof phina.util.Flow) {\n            resultValue.then(function(value) {\n              flow.resolve(value);\n            });\n          }\n          else {\n            flow.resolve(arg);\n          }\n        });\n\n        return flow;\n      }\n    },\n\n    _static: {\n      resolve: function(value) {\n        if (value instanceof phina.util.Flow) {\n          return value;\n        }\n        else {\n          var flow = phina.util.Flow(function(resolve) {\n            resolve(value);\n          });\n          return flow;\n        }\n      },\n      all: function(flows) {\n        return phina.util.Flow(function(resolve) {\n          var count = 0;\n\n          var args = [];\n\n          flows.each(function(flow) {\n            flow.then(function(d) {\n              ++count;\n              args.push(d);\n\n              if (count >= flows.length) {\n                resolve(args);\n              }\n            });\n          });\n        });\n      },\n    },\n  });\n\n})();\n/*\n * color.js\n */\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.util.Color\n   * カラークラス\n   */\n  phina.define(\"phina.util.Color\", {\n    /** R値 */\n    r: 255,\n    /** G値 */\n    g: 255,\n    /** B値 */\n    b: 255,\n    /** A値 */\n    a: 1.0,\n\n    /**\n     * 初期化\n     */\n    init: function(r, g, b, a) {\n      this.set.apply(this, arguments);\n    },\n\n    /**\n     * セッター.\n     */\n    set: function(r, g, b, a) {\n      this.r = r;\n      this.g = g;\n      this.b = b;\n      this.a = (a !== undefined) ? a : 1.0;\n      return this;\n    },\n\n    /**\n     * 数値によるセッター.\n     */\n    setFromNumber: function(r, g, b, a) {\n      this.r = r;\n      this.g = g;\n      this.b = b;\n      this.a = (a !== undefined) ? a : 1.0;\n      return this;\n    },\n\n    /**\n     * 配列によるセッター\n     */\n    setFromArray: function(arr) {\n      return this.set.apply(this, arr);\n    },\n\n    /**\n     * オブジェクトによるセッター\n     */\n    setFromObject: function(obj) {\n      return this.set(obj.r, obj.g, obj.b, obj.a);\n    },\n\n    /**\n     * 文字列によるセッター\n     */\n    setFromString: function(str) {\n      var color = phina.util.Color.stringToNumber(str);\n      return this.set(color[0], color[1], color[2], color[3]);\n    },\n\n    /**\n     * 賢いセッター\n     */\n    setSmart: function() {\n      var arg = arguments[0];\n      if (arguments.length >= 3) {\n        this.set(arguments.r, arguments.g, arguments.b, arguments.a);\n      } else if (arg instanceof Array) {\n        this.setFromArray(arg);\n      } else if (arg instanceof Object) {\n        this.setFromObject(arg);\n      } else if (typeof(arg) == \"string\") {\n        this.setFromString(arg);\n      }\n      return this;\n    },\n\n    /**\n     * CSS 用 16進数文字列に変換\n     */\n    toStyleAsHex: function() {\n      return \"#{0}{1}{2}\".format(\n        this.r.toString(16).padding(2, '0'),\n        this.g.toString(16).padding(2, '0'),\n        this.b.toString(16).padding(2, '0')\n      );\n    },\n\n    /**\n     * CSS 用 RGB文字列に変換\n     */\n    toStyleAsRGB: function() {\n      return \"rgb({r},{g},{b})\".format({\n        r: ~~this.r,\n        g: ~~this.g,\n        b: ~~this.b\n      });\n    },\n\n\n    /**\n     * CSS 用 RGBA文字列に変換\n     */\n    toStyleAsRGBA: function() {\n      return \"rgba({r},{g},{b},{a})\".format({\n        r: ~~this.r,\n        g: ~~this.g,\n        b: ~~this.b,\n        a: this.a\n      });\n    },\n\n    /**\n     * CSS 用 RGBA 文字列に変換\n     */\n    toStyle: function() {\n      return \"rgba({r},{g},{b},{a})\".format({\n        r: ~~this.r,\n        g: ~~this.g,\n        b: ~~this.b,\n        a: this.a\n      });\n    },\n\n    _static: {\n\n      /**\n       * @static\n       * カラーリスト\n       */\n      COLOR_LIST: {\n        /** @property black */\n        \"black\": [0x00, 0x00, 0x00],\n        /** @property silver */\n        \"silver\": [0xc0, 0xc0, 0xc0],\n        /** @property gray */\n        \"gray\": [0x80, 0x80, 0x80],\n        /** @property white */\n        \"white\": [0xff, 0xff, 0xff],\n        /** @property maroon */\n        \"maroon\": [0x80, 0x00, 0x00],\n        /** @property red */\n        \"red\": [0xff, 0x00, 0x00],\n        /** @property purple */\n        \"purple\": [0x80, 0x00, 0x80],\n        /** @property fuchsia */\n        \"fuchsia\": [0xff, 0x00, 0xff],\n        /** @property green */\n        \"green\": [0x00, 0x80, 0x00],\n        /** @property lime */\n        \"lime\": [0x00, 0xff, 0x00],\n        /** @property olive */\n        \"olive\": [0x80, 0x80, 0x00],\n        /** @property yellow */\n        \"yellow\": [0xff, 0xff, 0x00],\n        /** @property navy */\n        \"navy\": [0x00, 0x00, 0x80],\n        /** @property blue */\n        \"blue\": [0x00, 0x00, 0xff],\n        /** @property teal */\n        \"teal\": [0x00, 0x80, 0x80],\n        /** @property aqua */\n        \"aqua\": [0x00, 0xff, 0xff],\n      },\n\n      /**\n       * @static\n       * @member phina.util.Color\n       * @method strToNum\n       */\n      strToNum: function(str) {\n        return this.stringToNumber(str);\n      },\n      stringToNumber: function(str) {\n        var value = null;\n        var type = null;\n\n        if (str[0] === '#') {\n          type = (str.length == 4) ? \"hex111\" : \"hex222\";\n        } else if (str[0] === 'r' && str[1] === 'g' && str[2] === 'b') {\n          type = (str[3] == 'a') ? \"rgba\" : \"rgb\";\n        } else if (str[0] === 'h' && str[1] === 's' && str[2] === 'l') {\n          type = (str[3] == 'a') ? \"hsla\" : \"hsl\";\n        }\n\n        if (type) {\n          var match_set = MATCH_SET_LIST[type];\n          var m = str.match(match_set.reg);\n          value = match_set.exec(m);\n        } else if (phina.util.Color.COLOR_LIST[str]) {\n          value = phina.util.Color.COLOR_LIST[str];\n        }\n\n        return value;\n      },\n\n      /**\n       * @static\n       * @method\n       * hsl を rgb に変換\n       */\n      HSLtoRGB: function(h, s, l) {\n        var r, g, b;\n\n        h %= 360;\n        h += 360;\n        h %= 360;\n        s *= 0.01;\n        l *= 0.01;\n\n        if (s === 0) {\n          var l = Math.round(l * 255);\n          return [l, l, l];\n        }\n        var m2 = (l < 0.5) ? l * (1 + s) : l + s - l * s;\n        var m1 = l * 2 - m2;\n\n        // red\n        var temp = (h + 120) % 360;\n        if (temp < 60) {\n          r = m1 + (m2 - m1) * temp / 60;\n        } else if (temp < 180) {\n          r = m2;\n        } else {\n          r = m1;\n        }\n\n        // green\n        temp = h;\n        if (temp < 60) {\n          g = m1 + (m2 - m1) * temp / 60;\n        } else if (temp < 180) {\n          g = m2;\n        } else if (temp < 240) {\n          g = m1 + (m2 - m1) * (240 - temp) / 60;\n        } else {\n          g = m1;\n        }\n\n        // blue\n        temp = ((h - 120) + 360) % 360;\n        if (temp < 60) {\n          b = m1 + (m2 - m1) * temp / 60;\n        } else if (temp < 180) {\n          b = m2;\n        } else if (temp < 240) {\n          b = m1 + (m2 - m1) * (240 - temp) / 60;\n        } else {\n          b = m1;\n        }\n\n        return [\n          parseInt(r * 255),\n          parseInt(g * 255),\n          parseInt(b * 255)\n        ];\n      },\n\n      /**\n       * @static\n       * @method\n       * hsla を rgba に変換\n       */\n      HSLAtoRGBA: function(h, s, l, a) {\n        var temp = phina.util.Color.HSLtoRGB(h, s, l);\n        temp[3] = a;\n        return temp;\n      },\n\n      /**\n       * @static\n       * @method\n       * rgb 値を作成\n       */\n      createStyleRGB: function(r, g, b) {\n        return \"rgba(\" + r + \",\" + g + \",\" + b + \")\";\n      },\n\n      /**\n       * @static\n       * @method\n       * rgba 値を作成\n       */\n      createStyleRGBA: function(r, g, b, a) {\n        return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\n      },\n\n      /**\n       * @static\n       * @method\n       * hsl 値を作成\n       */\n      createStyleHSL: function(h, s, l) {\n        return \"hsl(\" + h + \",\" + s + \"%,\" + l + \"%)\";\n      },\n\n      /**\n       * @static\n       * @method\n       * hsla 値を作成\n       */\n      createStyleHSLA: function(h, s, l, a) {\n        return \"hsla(\" + h + \",\" + s + \"%,\" + l + \"%,\" + a + \")\";\n      },\n    }\n  });\n\n\n  var MATCH_SET_LIST = {\n    \"hex111\": {\n      reg: /^#(\\w{1})(\\w{1})(\\w{1})$/,\n      exec: function(m) {\n        return [\n          parseInt(m[1] + m[1], 16),\n          parseInt(m[2] + m[2], 16),\n          parseInt(m[3] + m[3], 16)\n        ];\n      }\n    },\n    \"hex222\": {\n      reg: /^#(\\w{2})(\\w{2})(\\w{2})$/,\n      exec: function(m) {\n        return [\n          parseInt(m[1], 16),\n          parseInt(m[2], 16),\n          parseInt(m[3], 16)\n        ];\n      }\n    },\n    \"rgb\": {\n      reg: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n      exec: function(m) {\n        return [\n          parseInt(m[1]),\n          parseInt(m[2]),\n          parseInt(m[3])\n        ];\n      }\n    },\n    \"rgba\": {\n      reg: /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1}(\\.{1}\\d+)?)\\)$/,\n      exec: function(m) {\n        return [\n          parseInt(m[1]),\n          parseInt(m[2]),\n          parseInt(m[3]),\n          parseFloat(m[4])\n        ];\n      }\n    },\n    \"hsl\": {\n      reg: /^hsl\\((\\d{1,3}),\\s*(\\d{1,3})%,\\s*(\\d{1,3})%\\)$/,\n      exec: function(m) {\n        return phina.util.Color.HSLtoRGB(m[1], m[2], m[3]);\n      }\n    },\n    \"hsla\": {\n      reg: /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1}(\\.{1}\\d+)?)\\)$/,\n      exec: function(m) {\n        return phina.util.Color.HSLAtoRGBA(m[1], m[2], m[3], m[4]);\n      },\n    }\n  };\n\n});\n\n/*\n * random.js\n */\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.util.Random\n   * ランダムクラス\n   */\n  phina.define(\"phina.util.Random\", {\n\n    seed: 1,\n\n    init: function(seed) {\n      this.seed = seed || (Date.now()) || 1;\n    },\n\n    random: function() {\n      var seed = this.seed;\n      seed = seed ^ (seed << 13);\n      seed = seed ^ (seed >>> 17);\n      seed = (seed ^ (seed << 5));\n\n      this.seed = seed;\n\n      return (seed >>> 0) / phina.util.Random.MAX;\n    },\n\n    randint: function(min, max) {\n      return Math.floor( this.random()*(max-min+1) ) + min;\n    },\n    randfloat: function(min, max) {\n      return this.random()*(max-min)+min;\n    },\n    randbool: function() {\n      return this.randint(0, 1) === 1;\n    },\n    randarray: function(len, min, max) {\n      len = len || 100;\n      min = min || 0;\n      max = max || 100;\n\n      return (len).map(function() {\n        return this.randint(min, max);\n      }, this);\n    },\n\n    _accessor: {\n      seed: {\n        get: function() { return this._seed; },\n        set: function (v) { this._seed = (v >>> 0) || 1; },\n      },\n    },\n\n    _static: {\n      MAX: 4294967295,\n\n      seed: (Date.now()),\n\n      getSeed: function() {\n        return this.seed;\n      },\n      setSeed: function(seed) {\n        this.seed = (seed >>> 0) || 1;\n        return this;\n      },\n\n      random: function() {\n        this.seed = this.xor32(this.seed);\n        return (this.seed >>> 0) / phina.util.Random.MAX;\n      },\n\n      randint: function(min, max) {\n        return phina.global.Math.floor( this.random()*(max-min+1) ) + min;\n      },\n      randfloat: function(min, max) {\n        return this.random()*(max-min)+min;\n      },\n      randbool: function() {\n        return this.randint(0, 1) === 1;\n      },\n      randarray: function(len, min, max) {\n        len = len || 100;\n        min = min || 0;\n        max = max || 100;\n\n        return (len).map(function() {\n          return this.randint(min, max);\n        }, this);\n      },\n\n      xor32: function(seed) {\n        seed = seed ^ (seed << 13);\n        seed = seed ^ (seed >>> 17);\n        seed = (seed ^ (seed << 5));\n\n        return seed;\n      },\n\n      /*\n       * http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n       */\n      uuid: function() {\n        var d = new Date().getTime();\n        if(phina.global.performance && typeof phina.global.performance.now === \"function\"){\n          d += performance.now(); //use high-precision timer if available\n        }\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n          var r = (d + Math.random()*16)%16 | 0;\n          d = Math.floor(d/16);\n          return (c=='x' ? r : (r&0x3|0x8)).toString(16);\n        });\n        return uuid;\n      },\n\n    },\n  });\n\n  Math.$method(\"randint\", function(min, max) {\n    return phina.util.Random.randint(min, max);\n  });\n  Math.$method(\"randfloat\", function(min, max) {\n    return phina.util.Random.randfloat(min, max);\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.util.QueryString\n   * \n   */\n  phina.define('phina.util.QueryString', {\n    _static: {\n      parse: function(text, sep, eq, isDecode) {\n        text = text || location.search.substr(1);\n        sep = sep || '&';\n        eq = eq || '=';\n        var decode = (isDecode) ? decodeURIComponent : function(a) { return a; };\n        return text.split(sep).reduce(function(obj, v) {\n          var pair = v.split(eq);\n          obj[pair[0]] = decode(pair[1]);\n          return obj;\n        }, {});\n      },\n      stringify: function(value, sep, eq, isEncode) {\n        sep = sep || '&';\n        eq = eq || '=';\n        var encode = (isEncode) ? encodeURIComponent : function(a) { return a; };\n        return Object.keys(value).map(function(key) {\n          return key + eq + encode(value[key]);\n        }).join(sep);\n      },\n    },\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.util.Ajax\n   * \n   */\n  phina.define('phina.util.Ajax', {\n    _static: {\n      defaults: {\n        type: 'GET',\n        contentType: 'application/x-www-form-urlencoded',\n        responseType: 'json',\n        data: null,\n        url: '',\n      },\n\n      request: function(options) {\n        var data = ({}).$safe(options, this.defaults);\n\n        var xhr = new XMLHttpRequest();\n        var flow = phina.util.Flow(function(resolve) {\n          xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4) {\n              if ([200, 201, 0].indexOf(xhr.status) !== -1) {\n                resolve(xhr.response);\n              }\n            }\n          };\n\n          xhr.open(data.type, data.url);\n          xhr.responseType = data.responseType;\n          xhr.send(null);\n        });\n\n        return flow;\n      },\n      get: function(url) {\n        return this.request({\n          type: 'GET',\n          url: url,\n        });\n      },\n      post: function(url) {\n        return this.request({\n          type: 'POST',\n          url: url,\n        });\n      },\n      put: function(url) {\n        return this.request({\n          type: 'PUT',\n          url: url,\n        });\n      },\n      del: function(url) {\n        return this.request({\n          type: 'DELETE',\n          url: url,\n        });\n      },\n    },\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.Asset\n   * \n   */\n  phina.define('phina.asset.Asset', {\n    superClass: \"phina.util.EventDispatcher\",\n\n    serverError: false,\n    notFound: false,\n    loadError: false,\n\n    /**\n     * @constructor\n     */\n    init: function(src) {\n      this.superInit();\n\n      this.loaded = false;\n    },\n\n    load: function(src) {\n      this.src = src;\n      return phina.util.Flow(this._load.bind(this));\n    },\n\n    isLoaded: function() {\n      return this.loaded;\n    },\n\n    _load: function(resolve) {\n      var self = this;\n      setTimeout(function() {\n        self.loaded = true;\n        resolve();\n      }, 100);\n    },\n\n    // ロード失敗時にダミーをセットする\n    loadDummy: function() { },\n\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.AssetManager\n   * \n   */\n  phina.define('phina.asset.AssetManager', {\n    _static: {\n      assets: {\n        image: {},\n        sound: {},\n        spritesheet: {},\n      },\n      \n      get: function(type, key) {\n        return this.assets[type] && this.assets[type][key];\n      },\n      set: function(type, key, asset) {\n        if (!this.assets[type]) {\n          this.assets[type] = {};\n        }\n        this.assets[type][key] = asset;\n      },\n      contains: function(type, key) {\n        return ;\n      }\n    },\n\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.AssetLoader\n   * \n   */\n  phina.define('phina.asset.AssetLoader', {\n    superClass: \"phina.util.EventDispatcher\",\n\n    /**\n     * @constructor\n     */\n    init: function(params) {\n      this.superInit();\n\n      params = (params || {}).$safe({\n        cache: true,\n      });\n\n      this.assets = {};\n      this.cache = params.cache;\n    },\n\n    load: function(params) {\n      var self = this;\n      var flows = [];\n\n      var counter = 0;\n      var length = 0;\n      params.forIn(function(type, assets) {\n        length += Object.keys(assets).length;\n      });\n      \n      params.forIn(function(type, assets) {\n        assets.forIn(function(key, value) {\n          var func = phina.asset.AssetLoader.assetLoadFunctions[type];\n          var flow = func(key, value);\n          flow.then(function(asset) {\n            if (self.cache) {\n              phina.asset.AssetManager.set(type, key, asset);\n            }\n            self.flare('progress', {\n              key: key,\n              asset: asset,\n              progress: (++counter/length),\n            });\n          });\n          flows.push(flow);\n        });\n      });\n\n\n      if (self.cache) {\n\n        self.on('progress', function(e) {\n          if (e.progress >= 1.0) {\n            // load失敗時、対策\n            params.forIn(function(type, assets) {\n              assets.forIn(function(key, value) {\n                var asset = phina.asset.AssetManager.get(type, key);\n                if (asset.loadError) {\n                  var dummy = phina.asset.AssetManager.get(type, 'dummy');\n                  if (dummy) {\n                    if (dummy.loadError) {\n                      dummy.loadDummy();\n                      dummy.loadError = false;\n                    }\n                    phina.asset.AssetManager.set(type, key, dummy);\n                  } else {\n                    asset.loadDummy();\n                  }\n                }\n              });\n            });\n          }\n        });\n      }\n      return phina.util.Flow.all(flows).then(function(args) {\n        self.flare('load');\n      });\n    },\n\n    _static: {\n      assetLoadFunctions: {\n        image: function(key, path) {\n          var texture = phina.asset.Texture();\n          var flow = texture.load(path);\n          return flow;\n        },\n        sound: function(key, path) {\n          var sound = phina.asset.Sound();\n          var flow = sound.load(path);\n          return flow;\n        },\n        spritesheet: function(key, path) {\n          var ss = phina.asset.SpriteSheet();\n          var flow = ss.load(path);\n          return flow;\n        },\n        script: function(key, path) {\n          var script = phina.asset.Script();\n          return script.load(path);\n        },\n        font: function(key, path) {\n          var font = phina.asset.Font();\n          font.setFontName(key);\n          return font.load(path);\n        },\n        json: function(key, path) {\n          var text = phina.asset.File();\n          return text.load({\n            path: path,\n            dataType: \"json\",\n          });\n        },\n        xml: function(key, path) {\n          var text = phina.asset.File();\n          return text.load({\n            path: path,\n            dataType: \"xml\",\n          });\n        },\n        text: function(key, path) {\n          var text = phina.asset.File();\n          return text.load(path);\n        }\n      },\n      register: function(key, func) {\n        this.assetLoadFunctions[key] = func;\n        return this;\n      },\n    }\n\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.File\n   * \n   */\n  phina.define('phina.asset.File', {\n    superClass: \"phina.asset.Asset\",\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n    },\n\n    _load: function(resolve) {\n\n      var params = {};\n\n      if (typeof this.src === 'string') {\n        params.$extend({\n          path: this.src,\n        });\n      }\n      else if (typeof this.src === 'object') {\n        params.$extend(this.src);\n      }\n\n      params.$safe({\n        path: '',\n        dataType: 'text',\n      });\n\n      // load\n      var self = this;\n      var xml = new XMLHttpRequest();\n      xml.open('GET', params.path);\n      xml.onreadystatechange = function() {\n        if (xml.readyState === 4) {\n          if ([200, 201, 0].indexOf(xml.status) !== -1) {\n            var data = xml.responseText;\n\n            if (params.dataType === 'json') {\n              data = JSON.parse(data);\n            } else if (params.dataType === 'xml') {\n              data = (new DOMParser()).parseFromString(data, \"text/xml\");\n            }\n            self.dataType = params.dataType;\n\n            self.data = data;\n            resolve(self);\n          }\n        }\n      };\n\n      xml.send(null);\n      // this.domElement = new Image();\n      // this.domElement.src = this.src;\n\n      // var self = this;\n      // this.domElement.onload = function() {\n      //   self.loaded = true;\n      //   resolve(self);\n      // };\n    },\n\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.Script\n   * \n   */\n  phina.define('phina.asset.Script', {\n    superClass: \"phina.asset.Asset\",\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n    },\n\n    _load: function(resolve) {\n      var self = this;\n      this.domElement = document.createElement('script');\n      this.domElement.src = this.src;\n\n      this.domElement.onload = function() {\n        resolve(self);\n      }.bind(this);\n\n      document.body.appendChild(this.domElement);\n    },\n\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.Texture\n   *\n   */\n  phina.define('phina.asset.Texture', {\n    superClass: \"phina.asset.Asset\",\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n    },\n\n    _load: function(resolve) {\n      this.domElement = new Image();\n\n      var isLocal = (location.protocol == 'file:');\n      if ( !isLocal && !(/^data:/.test(this.src)) ) {\n        // this.domElement.crossOrigin = 'Anonymous'; // クロスオリジン解除\n      }\n\n      var self = this;\n      this.domElement.onload = function(e) {\n        self.loaded = true;\n        resolve(self);\n      };\n      this.domElement.onerror = function(e) {\n        console.error(\"[phina.js] not found `{0}`!\".format(this.src));\n\n        var key = self.src.split('/').last.replace('.png', '').split('?').first.split('#').first;\n        e.target.onerror = null;\n        e.target.src = \"http://dummyimage.com/128x128/444444/eeeeee&text=\" + key;\n      };\n\n      this.domElement.src = this.src;\n    },\n\n    clone: function () {\n      var image = this.domElement;\n      var canvas = phina.graphics.Canvas().setSize(image.width, image.height);\n      var t = phina.asset.Texture();\n      canvas.context.drawImage(image, 0, 0);\n      t.domElement = canvas.domElement;\n      return t;\n    },\n\n    transmit: function(color) {\n      // imagaオブジェクトをゲット\n      var image = this.domElement;\n      // 新規canvas作成\n      var canvas = phina.graphics.Canvas().setSize(image.width, image.height);\n      // 新規canvasに描画\n      canvas.context.drawImage(image, 0, 0);\n      // canvas全体のイメージデータ配列をゲット\n      var imageData = canvas.context.getImageData(0, 0, canvas.width, canvas.height);\n      var data = imageData.data;\n      // 透過色の指定がなければ左上のrgb値を抽出\n      var r = (color !== undefined) ? color.r : data[0];\n      var g = (color !== undefined) ? color.g : data[1];\n      var b = (color !== undefined) ? color.b : data[2];\n      // 配列を4要素目から4つ飛び（アルファ値）でループ\n      (3).step(data.length, 4, function(i) {\n        // rgb値を逆算でゲットし、左上のrgbと比較\n        if (data[i - 3] === r && data[i - 2] === g && data[i - 1] === b) {\n          // 一致した場合はアルファ値を書き換える\n          data[i] = 0;\n        }\n      });\n      // 書き換えたイメージデータをcanvasに戻す\n      canvas.context.putImageData(imageData, 0, 0);\n\n      this.domElement = canvas.domElement;\n    },\n\n    filter: function (filters) {\n      if (!filters) {\n        return this;\n      }\n      if (!Array.isArray(filters)) {\n        filters = [filters];\n      }\n      var image = this.domElement;\n      var w = image.width;\n      var h = image.height;\n      var canvas = phina.graphics.Canvas().setSize(w, h);\n      var imageData = null;\n\n      canvas.context.drawImage(image, 0, 0);\n      imageData = canvas.context.getImageData(0, 0, w, h);\n      filters.forEach( function (fn) {\n        if (typeof fn == 'function') {\n          h.times( function (y) {\n            w.times( function (x) {\n              var i = (y * w + x) * 4;\n              var pixel = imageData.data.slice(i, i + 4);\n              fn(pixel, i, x, y, imageData);\n            });\n          });\n        }\n      });\n      canvas.context.putImageData(imageData, 0, 0);\n      this.domElement = canvas.domElement;\n      return this;\n    },\n\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.Sound\n   * \n   */\n  phina.define('phina.asset.Sound', {\n    superClass: \"phina.asset.Asset\",\n    \n    _loop: false,\n    _loopStart: 0,\n    _loopEnd: 0,\n    _playbackRate: 1,\n    \n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n      this.context = phina.asset.Sound.getAudioContext();\n      this.gainNode = this.context.createGain();\n    },\n\n    play: function(when, offset, duration) {\n      if (this.source) {\n        // TODO: キャッシュする？\n      }\n\n      var source = this.source = this.context.createBufferSource();\n      var buffer = source.buffer = this.buffer;\n      source.loop = this._loop;\n      source.loopStart = this._loopStart;\n      source.loopEnd = this._loopEnd;\n      source.playbackRate.value = this._playbackRate;\n\n      // connect\n      source.connect(this.gainNode);\n      this.gainNode.connect(phina.asset.Sound.getMasterGain());\n      // play\n      source.start(when ? when + this.context.currentTime : 0, offset || 0, duration);\n      \n      // check play end\n      source.addEventListener('ended', function(){\n        this.flare('ended');\n      }.bind(this));\n\n      return this;\n    },\n\n    stop: function() {\n      // stop\n      if (this.source) {\n        // stop すると source.endedも発火する\n        this.source.stop && this.source.stop(0);\n        this.source = null;\n        this.flare('stop');\n      }\n\n      return this;\n    },\n\n    pause: function() {\n      this.source.playbackRate.value = 0;\n      this.flare('pause');\n      return this;\n    },\n\n    resume: function() {\n      this.source.playbackRate.value = this._playbackRate;\n      this.flare('resume');\n      return this;\n    },\n\n    // 試してみるなう\n    _oscillator: function(type) {\n      var context = this.context;\n\n      var oscillator = context.createOscillator();\n\n      // Sine wave is type = “sine”\n      // Square wave is type = “square”\n      // Sawtooth wave is type = “saw”\n      // Triangle wave is type = “triangle”\n      // Custom wave is type = “custom” \n      oscillator.type = type || 'sine';\n\n      this.source = oscillator;\n      // connect\n      this.source.connect(context.destination);\n    },\n\n    loadFromBuffer: function(buffer) {\n      var context = this.context;\n\n      // set default buffer\n      if (!buffer) {\n        buffer = context.createBuffer( 1, 44100, 44100 );\n        var channel = buffer.getChannelData(0);\n\n        for( var i=0; i < channel.length; i++ )\n        {\n          channel[i] = Math.sin( i / 100 * Math.PI);\n        }\n      }\n\n      // source\n      this.buffer = buffer;\n    },\n\n    setLoop: function(loop) {\n      this.loop = loop;\n      return this;\n    },\n    setLoopStart: function(loopStart) {\n      this.loopStart = loopStart;\n      return this;\n    },\n    setLoopEnd: function(loopEnd) {\n      this.loopEnd = loopEnd;\n      return this;\n    },\n    \n    setPlaybackRate: function(playbackRate) {\n      this.playbackRate = playbackRate;\n      return this;\n    },\n\n    _load: function(r) {\n      if (/^data:/.test(this.src)) {\n        this._loadFromURIScheme(r);\n      }\n      else {\n        this._loadFromFile(r);\n      }\n    },\n\n    _loadFromFile: function(r) {\n      var self = this;\n\n      var xml = new XMLHttpRequest();\n      xml.open('GET', this.src);\n      xml.onreadystatechange = function() {\n        if (xml.readyState === 4) {\n          if ([200, 201, 0].indexOf(xml.status) !== -1) {\n\n            // 音楽バイナリーデータ\n            var data = xml.response;\n\n            // webaudio 用に変換\n            self.context.decodeAudioData(data, function(buffer) {\n              self.loadFromBuffer(buffer);\n              r(self);\n            }, function() {\n              console.warn(\"音声ファイルのデコードに失敗しました。(\" + self.src + \")\");\n              r(self);\n              self.flare('decodeerror');\n            });\n\n          } else if (xml.status === 404) {\n            // not found\n\n            self.loadError = true;\n            self.notFound= true;\n            r(self);\n            self.flare('loaderror');\n            self.flare('notfound');\n\n          } else {\n            // サーバーエラー\n\n            self.loadError = true;\n            self.serverError = true;\n            r(self);\n            self.flare('loaderror');\n            self.flare('servererror');\n          }\n        }\n      };\n\n      xml.responseType = 'arraybuffer';\n\n      xml.send(null);\n    },\n\n    _loadFromURIScheme: function(r) {\n      var byteString = '';\n      if (this.src.split(',')[0].indexOf('base64') >= 0) {\n        byteString = atob(this.src.split(',')[1]);\n      }\n      else {\n        byteString = unescape(this.src.split(',')[1]);\n      }\n\n      var self = this;\n      var len = byteString.length;\n      var buffer = new Uint8Array(len);\n\n      for (var i=0; i<len; ++i) {\n        buffer[i] = byteString.charCodeAt(i);\n      }\n\n      // webaudio 用に変換\n      this.context.decodeAudioData(buffer.buffer, function(buffer) {\n        self.loadFromBuffer(buffer);\n        r(self);\n      }, function() {\n        console.warn(\"音声ファイルのデコードに失敗しました。(\" + self.src + \")\");\n        self.loaded = true;\n        r(self);\n      });\n    },\n\n    loadDummy: function() {\n      this.loadFromBuffer();\n    },\n\n    _accessor: {\n      volume: {\n        get: function()  { return this.gainNode.gain.value; },\n        set: function(v) { this.gainNode.gain.value = v; },\n      },\n      loop: {\n        get: function()  { return this._loop; },\n        set: function(v) {\n          this._loop = v;\n          if (this.source) this.source._loop = v;\n        },\n      },\n      loopStart: {\n        get: function()  { return this._loopStart; },\n        set: function(v) {\n          this._loopStart = v;\n          if (this.source) this.source._loopStart = v;\n        },\n      },\n      loopEnd: {\n        get: function()  { return this._loopEnd; },\n        set: function(v) {\n          this._loopEnd = v;\n          if (this.source) this.source._loopEnd = v;\n        },\n      },\n      playbackRate: {\n        get: function() { return this._playbackRate; },\n        set: function(v) {\n          this._playbackRate = v;\n          if(this.source && this.source.playbackRate.value !== 0){\n            this.source.playbackRate.value = v;\n          }\n        },\n      }\n    },\n\n    _defined: function() {\n      this.accessor('volume', {\n        get: function() {\n          return this.getMasterGain().gain.value;\n        },\n        set: function(v) {\n          this.getMasterGain().gain.value = v;\n        },\n      });\n      \n    },\n    \n    _static: {\n      \n      getMasterGain: function() {\n        if(!this._masterGain) {\n          var context = this.getAudioContext();\n          this._masterGain = context.createGain();\n          this._masterGain.connect(context.destination);\n        }\n        return this._masterGain;\n      },\n      \n      getAudioContext: function() {\n        if (!phina.util.Support.webAudio) return null;\n\n        if (this.context) return this.context;\n\n        var g = phina.global;\n        var context = null;\n\n        if (g.AudioContext) {\n          context = new AudioContext();\n        }\n        else if (g.webkitAudioContext) {\n          context = new webkitAudioContext();\n        }\n        else if (g.mozAudioContext) {\n          context = new mozAudioContext();\n        }\n\n        this.context = context;\n\n        return context;\n      },\n    },\n\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.SoundManager\n   * ### Ref\n   * - http://evolve.reintroducing.com/_source/classes/as3/SoundManager/SoundManager.html\n   * - https://github.com/nicklockwood/SoundManager\n   */\n  phina.define('phina.asset.SoundManager', {\n    _static: {\n      volume: 0.8,\n      musicVolume: 0.8,\n      muteFlag: false,\n      currentMusic: null,\n\n      play: function(name, when, offset, duration) {\n        var sound = phina.asset.AssetManager.get('sound', name);\n\n        sound.volume = this.getVolume();\n        sound.play(when, offset, duration);\n\n        return sound;\n      },\n\n      stop: function() {\n        // TODO: \n      },\n      pause: function() {\n        // TODO: \n      },\n      fade: function() {\n        // TODO: \n      },\n      setVolume: function(volume) {\n        this.volume = volume;\n      },\n      getVolume: function() {\n        return this.volume;\n      },\n\n      /*\n       * ミュート\n       */\n      mute: function() {\n        this.muteFlag = true;\n        if (this.currentMusic) {\n          this.currentMusic.volume = 0;\n        }\n        return this;\n      },\n      /*\n       * ミュート解除\n       */\n      unmute: function() {\n        this.muteFlag = false;\n        if (this.currentMusic) {\n          this.currentMusic.volume = this.getVolumeMusic();\n        }\n        return this;\n      },\n      isMute: function() {\n        return this.muteFlag;\n      },\n\n      playMusic: function(name, fadeTime, loop, when, offset, duration) {\n        loop = (loop !== undefined) ? loop : true;\n\n        if (this.currentMusic) {\n          this.stopMusic(fadeTime);\n        }\n\n        var music = phina.asset.AssetManager.get('sound', name);\n\n        music.setLoop(loop);\n        music.play(when, offset, duration);\n\n        if (fadeTime > 0) {\n          var count = 32;\n          var counter = 0;\n          var unitTime = fadeTime/count;\n          var volume = this.getVolumeMusic();\n\n          music.volume = 0;\n          var id = setInterval(function() {\n            counter += 1;\n            var rate = counter/count;\n            music.volume = rate*volume;\n\n            if (rate >= 1) {\n              clearInterval(id);\n              return false;\n            }\n\n            return true;\n          }, unitTime);\n        }\n        else {\n          music.volume = this.getVolumeMusic();\n        }\n\n        this.currentMusic = music;\n\n        return this.currentMusic;\n      },\n\n      stopMusic: function(fadeTime) {\n        if (!this.currentMusic) { return ; }\n\n        var music = this.currentMusic;\n        this.currentMusic = null;\n\n        if (fadeTime > 0) {\n          var count = 32;\n          var counter = 0;\n          var unitTime = fadeTime/count;\n          var volume = this.getVolumeMusic();\n\n          music.volume = 0;\n          var id = setInterval(function() {\n            counter += 1;\n            var rate = counter/count;\n            music.volume = volume*(1-rate);\n\n            if (rate >= 1) {\n              music.stop();\n              clearInterval(id);\n              return false;\n            }\n\n            return true;\n          }, unitTime);\n        }\n        else {\n          music.stop();\n        }\n      },\n\n      /*\n       * 音楽を一時停止\n       */\n      pauseMusic: function() {\n        if (!this.currentMusic) { return ; }\n        this.currentMusic.pause();\n      },\n      /*\n       * 音楽を再開\n       */\n      resumeMusic: function() {\n        if (!this.currentMusic) { return ; }\n        this.currentMusic.resume();\n      },\n      /*\n       * 音楽のボリュームを設定\n       */\n      setVolumeMusic: function(volume) {\n        this.musicVolume = volume;\n        if (this.currentMusic) {\n          this.currentMusic.volume = volume;\n        }\n\n        return this;\n      },\n      /*\n       * 音楽のボリュームを取得\n       */\n      getVolumeMusic: function() {\n        return this.musicVolume;\n      },\n\n    },\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.SpriteSheet\n   * \n   */\n  phina.define('phina.asset.SpriteSheet', {\n    superClass: \"phina.asset.Asset\",\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n    },\n\n    setup: function(params) {\n      this._setupFrame(params.frame);\n      this._setupAnim(params.animations);\n      return this;\n    },\n\n    _load: function(resolve) {\n\n      var self = this;\n\n      if (typeof this.src === 'string') {\n        var xml = new XMLHttpRequest();\n        xml.open('GET', this.src);\n        xml.onreadystatechange = function() {\n          if (xml.readyState === 4) {\n            if ([200, 201, 0].indexOf(xml.status) !== -1) {\n              var data = xml.responseText;\n              var json = JSON.parse(data);\n\n              self.setup(json);\n\n              resolve(self);\n            }\n          }\n        };\n\n        xml.send(null);\n      }\n      else {\n        this.setup(this.src);\n        resolve(self);\n      }\n\n    },\n\n    _setupFrame: function(frame) {\n      var frames = this.frames = [];\n      var unitWidth = frame.width;\n      var unitHeight = frame.height;\n\n      var count = frame.rows * frame.cols;\n      this.frame = count;\n\n      (count).times(function(i) {\n        var xIndex = i%frame.cols;\n        var yIndex = (i/frame.cols)|0;\n\n        frames.push({\n          x: xIndex*unitWidth,\n          y: yIndex*unitHeight,\n          width: unitWidth,\n          height: unitHeight,\n        });\n      });\n    },\n\n    _setupAnim: function(animations) {\n      this.animations = {};\n\n      // デフォルトアニメーション\n      this.animations[\"default\"] = {\n          name: \"default\",\n          frames: [].range(0, this.frame),\n          next: \"default\",\n          frequency: 1,\n      };\n\n      animations.forIn(function(key, value) {\n        var anim = value;\n\n        if (anim instanceof Array) {\n          this.animations[key] = {\n            name: key,\n            frames: [].range(anim[0], anim[1]),\n            next: anim[2],\n            frequency: anim[3] || 1,\n          };\n        }\n        else {\n          this.animations[key] = {\n            name: key,\n            frames: anim.frames,\n            next: anim.next,\n            frequency: anim.frequency || 1\n          };\n        }\n\n      }, this);\n    },\n\n    /**\n     * フレームを取得\n     */\n    getFrame: function(index) {\n      return this.frames[index];\n    },\n\n    getAnimation: function(name) {\n      name = (name !== undefined) ? name : \"default\";\n      return this.animations[name];\n    },\n\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.asset.Font\n   * \n   */\n  phina.define(\"phina.asset.Font\", {\n    superClass: \"phina.asset.Asset\",\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n      this.fontName = null;\n    },\n\n    load: function(path) {\n      this.src = path;\n\n      var reg = /(.*)(?:\\.([^.]+$))/;\n      var key = this.fontName || path.match(reg)[1].split('/').last;    //フォント名指定が無い場合はpathの拡張子前を使用\n      var type = path.match(reg)[2];\n      var format = \"unknown\";\n      switch (type) {\n        case \"ttf\":\n          format = \"truetype\"; break;\n        case \"otf\":\n          format = \"opentype\"; break;\n        case \"woff\":\n          format = \"woff\"; break;\n        case \"woff2\":\n          format = \"woff2\"; break;\n        default:\n          console.warn(\"サポートしていないフォント形式です。(\" + path + \")\");\n      }\n      this.format = format;\n      this.fontName = key;\n\n      if (format !== \"unknown\") {\n        var text = \"@font-face { font-family: '{0}'; src: url({1}) format('{2}'); }\".format(key, path, format);\n        var e = document.querySelector(\"head\");\n        var fontFaceStyleElement = document.createElement(\"style\");\n        if (fontFaceStyleElement.innerText) {\n          fontFaceStyleElement.innerText = text;\n        } else {\n          fontFaceStyleElement.textContent = text;\n        }\n        e.appendChild(fontFaceStyleElement);\n      }\n\n      return phina.util.Flow(this._load.bind(this));\n    },\n\n    _load: function(resolve) {\n      if (this.format !== \"unknown\") {\n        this._checkLoaded(this.fontName, function() {\n          this.loaded = true;\n          resolve(this);\n        }.bind(this));\n      } else {\n        this.loaded = true;\n        resolve(this);\n      }\n    },\n\n    _checkLoaded: function (font, callback) {\n      var canvas = phina.graphics.Canvas();\n      var DEFAULT_FONT = canvas.context.font.split(' ')[1];\n      canvas.context.font = '40px ' + DEFAULT_FONT;\n\n      var checkText = \"1234567890-^\\\\qwertyuiop@[asdfghjkl;:]zxcvbnm,./\\!\\\"#$%&'()=~|QWERTYUIOP`{ASDFGHJKL+*}ZXCVBNM<>?_１２３４５６７８９０－＾￥ｑｗｅｒｔｙｕｉｏｐａｓｄｆｇｈｊｋｌｚｘｃｖｂｎｍ，．あいうかさたなをん時は金なり\";\n      // 特殊文字対応\n      checkText += String.fromCharCode(\"0xf04b\");\n\n      var before = canvas.context.measureText(checkText).width;\n      canvas.context.font = '40px ' + font + ', ' + DEFAULT_FONT;\n\n      var timeoutCount = 30;\n      var checkLoadFont = function () {\n        var after = canvas.context.measureText(checkText).width;\n        if (after !== before) {\n          setTimeout(function() {\n            callback && callback();\n          }, 100);\n        } else {\n          if (--timeoutCount > 0) {\n            setTimeout(checkLoadFont, 100);\n          }\n          else {\n            callback && callback();\n            console.warn(\"timeout font loading\");\n          }\n        }\n      };\n      checkLoadFont();\n    },\n\n    setFontName: function(name) {\n      if (this.loaded) {\n        console.warn(\"フォント名はLoad前にのみ設定が出来ます(\" + name + \")\");\n        return this;\n      }\n      this.fontName = name;\n      \n      return this;\n    },\n\n    getFontName: function() {\n      return this.fontName;\n    },\n\n  });\n});\n\n\n;(function() {\n  /**\n   * @class phina.input.Input\n   * \n   */\n  phina.define('phina.input.Input', {\n\n    superClass: 'phina.util.EventDispatcher',\n\n    /** domElement */\n    domElement: null,\n\n    /**\n     * @constructor\n     */\n    init: function(domElement) {\n      this.superInit();\n      \n      this.domElement = domElement || window.document;\n\n      this.position = phina.geom.Vector2(0, 0);\n      this.startPosition = phina.geom.Vector2(0, 0);\n      this.deltaPosition = phina.geom.Vector2(0, 0);\n      this.prevPosition = phina.geom.Vector2(0, 0);\n      this._tempPosition = phina.geom.Vector2(0, 0);\n\n      this.maxCacheNum = phina.input.Input.defaults.maxCacheNum;\n      this.minDistance = phina.input.Input.defaults.minDistance;\n      this.maxDistance = phina.input.Input.defaults.maxDistance;\n      this.cachePositions = [];\n      this.flickVelocity = phina.geom.Vector2(0, 0);\n\n      this.flags = 0;\n    },\n\n    update: function() {\n      this.last = this.now;\n      this.now = this.flags;\n      this.start = (this.now ^ this.last) & this.now;\n      this.end   = (this.now ^ this.last) & this.last;\n\n      // 変化値を更新\n      this.deltaPosition.x = this._tempPosition.x - this.position.x;\n      this.deltaPosition.y = this._tempPosition.y - this.position.y;\n\n      if (this.deltaPosition.x === 0 && this.deltaPosition.y === 0) {\n        this._moveFlag = false;\n      }\n      else {\n        this._moveFlag = true;\n      }\n\n      if (this.start) {\n        this.startPosition.set(this.position.x, this.position.y);\n      }\n\n      // 前回の座標を更新\n      this.prevPosition.set(this.position.x, this.position.y);\n\n      // 現在の位置を更新\n      this.position.set(this._tempPosition.x, this._tempPosition.y);\n\n      if (this.cachePositions.length > this.maxCacheNum) {\n        this.cachePositions.shift();\n      }\n      this.cachePositions.push(this.position.clone());\n    },\n\n    _start: function(x, y, flag) {\n      flag = (flag !== undefined) ? flag : 1;\n      this._move(x, y);\n\n      this.flags |= flag;\n\n      var x = this._tempPosition.x;\n      var y = this._tempPosition.y;\n      this.position.set(x, y);\n      this.prevPosition.set(x, y);\n\n      this.flickVelocity.set(0, 0);\n      this.cachePositions.clear();\n    },\n\n    _end: function(flag) {\n      flag = (flag !== undefined) ? flag : 1;\n      this.flags &= ~(flag);\n\n      if (this.cachePositions.length < 2) return;\n\n      var first = this.cachePositions.first;\n      var last = this.cachePositions.last;\n\n      var v = phina.geom.Vector2.sub(last, first);\n\n      var len = v.length();\n\n      if (len > this.minDistance) {\n        var normalLen = len.clamp(this.minDistance, this.maxDistance);\n        v.div(len).mul(normalLen);\n        this.flickVelocity.set(v.x, v.y);\n      }\n\n      this.cachePositions.clear();\n    },\n\n    // スケールを考慮\n    _move: function(x, y) {\n      this._tempPosition.x = x;\n      this._tempPosition.y = y;\n\n      // adjust scale\n      var elm = this.domElement;\n      if (elm.style.width) {\n        this._tempPosition.x *= elm.width / parseInt(elm.style.width);\n      }\n      if (elm.style.height) {\n        this._tempPosition.y *= elm.height / parseInt(elm.style.height);\n      }\n    },\n\n    _accessor: {\n      /**\n       * @property    x\n       * x座標値\n       */\n      x: {\n        \"get\": function()   { return this.position.x; },\n        \"set\": function(v)  { this.position.x = v; }\n      },\n      /**\n       * @property    y\n       * y座標値\n       */\n      y: {\n        \"get\": function()   { return this.position.y; },\n        \"set\": function(v)  { this.position.y = v; }\n      },\n      /**\n       * @property    dx\n       * dx値\n       */\n      dx: {\n        \"get\": function()   { return this.deltaPosition.x; },\n        \"set\": function(v)  { this.deltaPosition.x = v; }\n      },\n      /**\n       * @property    dy\n       * dy値\n       */\n      dy: {\n        \"get\": function()   { return this.deltaPosition.y; },\n        \"set\": function(v)  { this.deltaPosition.y = v; }\n      },\n\n      /**\n       * @property    fx\n       * fx値\n       */\n      fx: {\n        \"get\": function()   { return this.flickVelocity.x; },\n        \"set\": function(v)  { this.flickVelocity.x = v; }\n      },\n      /**\n       * @property    fy\n       * fy値\n       */\n      fy: {\n        \"get\": function()   { return this.flickVelocity.y; },\n        \"set\": function(v)  { this.flickVelocity.y = v; }\n      },\n\n    },\n\n    _static: {\n      defaults: {\n        maxCacheNum: 3,\n        minDistance: 10,\n        maxDistance: 100,\n      },\n    },\n  });\n\n\n})();\n\n;(function() {\n\n  /**\n   * @class phina.input.Mouse\n   * @extends phina.input.Input\n   */\n  phina.define('phina.input.Mouse', {\n\n    superClass: 'phina.input.Input',\n\n    /**\n     * @constructor\n     */\n    init: function(domElement) {\n      this.superInit(domElement);\n\n      this.id = 0;\n\n      var self = this;\n      this.domElement.addEventListener('mousedown', function(e) {\n        self._start(e.pointX, e.pointY, 1<<e.flags);\n      });\n\n      this.domElement.addEventListener('mouseup', function(e) {\n        self._end(1<<e.flags);\n      });\n      this.domElement.addEventListener('mousemove', function(e) {\n        self._move(e.pointX, e.pointY);\n      });\n    },\n\n    /**\n     * ボタン取得\n     */\n    getButton: function(button) {\n      if (typeof(button) == \"string\") {\n        button = BUTTON_MAP[button];\n      }\n      \n      return (this.now & button) != 0;\n    },\n\n    /**\n     * ボタンダウン取得\n     */\n    getButtonDown: function(button) {\n      if (typeof(button) === 'string') {\n        button = BUTTON_MAP[button];\n      }\n\n      return (this.start & button) != 0;\n    },\n        \n    /**\n     * ボタンアップ取得\n     */\n    getButtonUp: function(button) {\n      if (typeof(button) == \"string\") {\n        button = BUTTON_MAP[button];\n      }\n      \n      return (this.end & button) != 0;\n    },\n\n    _static: {\n      /** @static @property */\n      BUTTON_LEFT: 0x1,\n      /** @static @property */\n      BUTTON_MIDDLE: 0x2,\n      /** @static @property */\n      BUTTON_RIGHT: 0x4,\n    }\n  });\n\n  var BUTTON_MAP = {\n    \"left\"  : phina.input.Mouse.BUTTON_LEFT,\n    \"middle\": phina.input.Mouse.BUTTON_MIDDLE,\n    \"right\" : phina.input.Mouse.BUTTON_RIGHT\n  };\n\n  phina.input.Mouse.prototype.getPointing = function() { return this.getButton(\"left\"); };\n  phina.input.Mouse.prototype.getPointingStart = function() { return this.getButtonDown(\"left\"); };\n  phina.input.Mouse.prototype.getPointingEnd = function() { return this.getButtonUp(\"left\"); };\n\n})();\n\n;(function() {\n\n  /**\n   * @class phina.input.Touch\n   * @extends phina.input.Input\n   */\n  phina.define('phina.input.Touch', {\n\n    superClass: 'phina.input.Input',\n\n    /**\n     * @constructor\n     */\n    init: function(domElement, isMulti) {\n      this.superInit(domElement);\n\n      this.id = null;\n\n      if (isMulti === true) {\n        return ;\n      }\n\n      var self = this;\n      this.domElement.addEventListener('touchstart', function(e) {\n        self._start(e.pointX, e.pointY, true);\n      });\n\n      this.domElement.addEventListener('touchend', function(e) {\n        self._end();\n      });\n      this.domElement.addEventListener('touchmove', function(e) {\n        self._move(e.pointX, e.pointY);\n      });\n    },\n\n    /**\n     * タッチしているかを判定\n     */\n    getTouch: function() {\n      return this.now != 0;\n    },\n    \n    /**\n     * タッチ開始時に true\n     */\n    getTouchStart: function() {\n      return this.start != 0;\n    },\n    \n    /**\n     * タッチ終了時に true\n     */\n    getTouchEnd: function() {\n      return this.end != 0;\n    },\n\n  });\n\n  /**\n   * @method\n   * ポインティング状態取得(mouse との差異対策)\n   */\n  phina.input.Touch.prototype.getPointing        = phina.input.Touch.prototype.getTouch;\n  /**\n   * @method\n   * ポインティングを開始したかを取得(mouse との差異対策)\n   */\n  phina.input.Touch.prototype.getPointingStart   = phina.input.Touch.prototype.getTouchStart;\n  /**\n   * @method\n   * ポインティングを終了したかを取得(mouse との差異対策)\n   */\n  phina.input.Touch.prototype.getPointingEnd     = phina.input.Touch.prototype.getTouchEnd;\n\n\n})();\n\n\n;(function() {\n\n  phina.define('phina.input.TouchList', {\n    domElement: null,\n    touchMap: null,\n    touches: null,\n    _id: null,\n\n    init: function(domElement) {\n      this.domElement = domElement;\n\n      this.touches = [];\n      var touchMap = this.touchMap = {};\n\n      // 32bit 周期でIDをループさせる\n      this._id = new Uint32Array(1);\n\n      var self = this;\n      var each = Array.prototype.forEach;\n      this.domElement.addEventListener('touchstart', function(e) {\n        each.call(e.changedTouches, function(t) {\n          var touch = self.getEmpty();\n          touchMap[t.identifier] = touch;\n          touch._start(t.pointX, t.pointY);\n        });\n      });\n\n      this.domElement.addEventListener('touchend', function(e) {\n        each.call(e.changedTouches, function(t) {\n          var id = t.identifier;\n          var touch = touchMap[id];\n          touch._end();\n          delete touchMap[id];\n        });\n      });\n      this.domElement.addEventListener('touchmove', function(e) {\n        each.call(e.changedTouches, function(t) {\n          var touch = touchMap[t.identifier];\n          touch._move(t.pointX, t.pointY);\n        });\n        e.stop();\n      });\n\n      // iPhone では 6本指以上タッチすると強制的にすべてのタッチが解除される\n      this.domElement.addEventListener('touchcancel', function(e) {\n        console.warn('この端末での同時タッチ数の制限を超えました。');\n        each.call(e.changedTouches, function(t) {\n          var id = t.identifier;\n          var touch = touchMap[id];\n          touch._end();\n          delete touchMap[id];\n        });\n        e.stop();\n      });\n    },\n\n    getEmpty: function() {\n      var touch = phina.input.Touch(this.domElement, true);\n    \n      touch.id = this.id;\n      this.touches.push(touch);\n\n      return touch;\n    },\n\n    getTouch: function(id) {\n      return this.touchMap[id];\n    },\n\n\n    removeTouch: function(touch) {\n      var i = this.touches.indexOf(touch);\n      this.touches.splice(i, 1);\n    },\n\n    update: function() {\n      this.touches.forEach(function(touch) {\n        if (!touch.released) {\n          touch.update();\n\n          if (touch.flags === 0) {\n            touch.released = true;\n          }\n        }\n        else {\n          touch.released = false;\n          this.removeTouch(touch);\n        }\n\n      }, this);\n    },\n\n    _accessor: {\n      id: {\n        get: function() {\n          return this._id[0]++;\n        }\n      },\n    },\n  });\n\n})();\n/*\n *\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.input.Keyboard\n   * @extends phina.input.Input\n   */\n  phina.define('phina.input.Keyboard', {\n\n    superClass: 'phina.input.Input',\n\n    /**\n     * @constructor\n     */\n    init: function(domElement) {\n      this.superInit(domElement);\n\n      this.key = {};\n      this.press  = {};\n      this.down   = {};\n      this.up     = {};\n      this.last   = {};\n\n      this._keydown = null;\n      this._keyup = null;\n      this._keypress = null;\n\n      var self = this;\n      this.domElement.addEventListener('keydown', function(e) {\n        self.key[e.keyCode] = true;\n        self._keydown = e.keyCode;\n      });\n\n      this.domElement.addEventListener('keyup', function(e) {\n        self.key[e.keyCode] = false;\n        self._keyup = e.keyCode;\n      });\n      this.domElement.addEventListener('keypress', function(e) {\n        self._keypress = e.keyCode;\n      });\n    },\n\n    /**\n     * 情報更新処理\n     * マイフレーム呼んで下さい.\n     * @private\n     */\n    update: function() {\n      // TODO: 一括ビット演算で行うよう修正する\n      for (var k in this.key) {\n        this.last[k]    = this.press[k];\n        this.press[k]   = this.key[k];\n        \n        this.down[k] = (this.press[k] ^ this.last[k]) & this.press[k];\n        this.up[k] = (this.press[k] ^ this.last[k]) & this.last[k];\n      }\n\n      if (this._keydown) {\n        this.flare('keydown', { keyCode: this._keydown });\n        this._keydown = null;\n      }\n      if (this._keyup) {\n        this.flare('keyup', { keyCode: this._keyup });\n        this._keyup = null;\n      }\n      if (this._keypress) {\n        this.flare('keypress', { keyCode: this._keypress });\n        this._keypress = null;\n      }\n      \n      return this;\n    },\n\n    /**\n     * キーを押しているかをチェック\n     * @param   {Number/String} key keyCode or keyName\n     * @returns {Boolean}   チェック結果\n     */\n    getKey: function(key) {\n      if (typeof(key) === \"string\") {\n        key = phina.input.Keyboard.KEY_CODE[key];\n      }\n      return !!this.press[key] === true;\n    },\n    \n    /**\n     * キーを押したかをチェック\n     * @param   {Number/String} key keyCode or keyName\n     * @returns {Boolean}   チェック結果\n     */\n    getKeyDown: function(key) {\n      if (typeof(key) == \"string\") {\n        key = phina.input.Keyboard.KEY_CODE[key];\n      }\n      return this.down[key] == true;\n    },\n    \n    /**\n     * キーを離したかをチェック\n     * @param   {Number/String} key keyCode or keyName\n     * @returns {Boolean}   チェック結果\n     */\n    getKeyUp: function(key) {\n      if (typeof(key) == \"string\") {\n        key = phina.input.Keyboard.KEY_CODE[key];\n      }\n      return this.up[key] == true;\n    },\n    \n    /**\n     * キーの方向を Angle(Degree) で取得\n     * @returns {Boolean}   角度(Degree)\n     */\n    getKeyAngle: function() {\n      var angle = null;\n      var arrowBit =\n        (this.getKey(\"left\")   << 3) | // 1000\n        (this.getKey(\"up\")     << 2) | // 0100\n        (this.getKey(\"right\")  << 1) | // 0010\n        (this.getKey(\"down\"));         // 0001\n      \n      if (arrowBit !== 0 && phina.input.Keyboard.ARROW_BIT_TO_ANGLE_TABLE.hasOwnProperty(arrowBit)) {\n        angle = phina.input.Keyboard.ARROW_BIT_TO_ANGLE_TABLE[arrowBit];\n      }\n      \n      return angle;\n    },\n\n    /**\n     * キーの押している向きを取得\n     * 正規化されている\n     */\n    getKeyDirection: function() {\n      var direction = phina.geom.Vector2(0, 0);\n\n      if (this.getKey(\"left\")) {\n        direction.x = -1;\n      }\n      else if (this.getKey(\"right\")) {\n        direction.x = 1;\n      }\n      if (this.getKey(\"up\")) {\n        direction.y = -1;\n      }\n      else if (this.getKey(\"down\")) {\n        direction.y = 1;\n      }\n\n      if (direction.x && direction.y) {\n        direction.div(Math.SQRT2);\n      }\n\n      return direction;\n    },\n    \n    /**\n     * キーの状態を設定する\n     */\n    setKey: function(key, flag) {\n      if (typeof(key) == \"string\") {\n        key = phina.input.Keyboard.KEY_CODE[key];\n      }\n      this.key[key] = flag;\n      \n      return this;\n    },\n\n    /**\n     * キーを全て離したことにする\n     */\n    clearKey: function() {\n      this.key = {};\n      \n      return this;\n    },\n\n\n    /*\n     * @enum ARROW_BIT_TO_ANGLE_TABLE\n     * 方向のアングル jsduckでは数字をプロパティに指定できない？\n     * @private\n     */\n    _static: {\n      ARROW_BIT_TO_ANGLE_TABLE: {\n        /* @property 下 */\n        0x01: 270,\n        /* @property 右 */\n        0x02:   0,\n        /* @property 上 */\n        0x04:  90,\n        /* @property 左 */\n        0x08: 180,\n\n        /* @property 右上 */\n        0x06:  45,\n        /* @property 右下 */\n        0x03: 315,\n        /* @property 左上 */\n        0x0c: 135,\n        /* @property 左下 */\n        0x09: 225,\n\n        // 三方向同時押し対応\n        // 想定外の操作だが対応しといたほうが無難\n        /* @property 右上左 */\n        0x0e:  90,\n        /* @property 上左下 */\n        0x0d: 180,\n        /* @property 左下右 */\n        0x0b: 270,\n        /* @property 下右上 */\n        0x07:   0,\n      },\n\n      /*\n       * @enum KEY_CODE\n       * キー番号\n       * @private\n       */\n      KEY_CODE: {\n        /* @property */\n        \"backspace\" : 8,\n        /* @property */\n        \"tab\"       : 9,\n        /* @property */\n        \"enter\"     : 13,\n        /* @property */\n        \"return\"    : 13,\n        /* @property */\n        \"shift\"     : 16,\n        /* @property */\n        \"ctrl\"      : 17,\n        /* @property */\n        \"alt\"       : 18,\n        /* @property */\n        \"pause\"     : 19,\n        /* @property */\n        \"capslock\"  : 20,\n        /* @property */\n        \"escape\"    : 27,\n        /* @property */\n        \"pageup\"    : 33,\n        /* @property */\n        \"pagedown\"  : 34,\n        /* @property */\n        \"end\"       : 35,\n        /* @property */\n        \"home\"      : 36,\n        /* @property */\n        \"left\"      : 37,\n        /* @property */\n        \"up\"        : 38,\n        /* @property */\n        \"right\"     : 39,\n        /* @property */\n        \"down\"      : 40,\n        /* @property */\n        \"insert\"    : 45,\n        /* @property */\n        \"delete\"    : 46,\n        \n        /* @property */\n        \"0\" : 48,\n        /* @property */\n        \"1\" : 49,\n        /* @property */\n        \"2\" : 50,\n        /* @property */\n        \"3\" : 51,\n        /* @property */\n        \"4\" : 52,\n        /* @property */\n        \"5\" : 53,\n        /* @property */\n        \"6\" : 54,\n        /* @property */\n        \"7\" : 55,\n        /* @property */\n        \"8\" : 56,\n        /* @property */\n        \"9\" : 57,\n        /* @property */\n        \n        \"a\" : 65,\n        /* @property */\n        \"A\" : 65,\n        /* @property */\n        \"b\" : 66,\n        /* @property */\n        \"B\" : 66,\n        /* @property */\n        \"c\" : 67,\n        /* @property */\n        \"C\" : 67,\n        /* @property */\n        \"d\" : 68,\n        /* @property */\n        \"D\" : 68,\n        /* @property */\n        \"e\" : 69,\n        /* @property */\n        \"E\" : 69,\n        /* @property */\n        \"f\" : 70,\n        /* @property */\n        \"F\" : 70,\n        /* @property */\n        \"g\" : 71,\n        /* @property */\n        \"G\" : 71,\n        /* @property */\n        \"h\" : 72,\n        /* @property */\n        \"H\" : 72,\n        /* @property */\n        \"i\" : 73,\n        /* @property */\n        \"I\" : 73,\n        /* @property */\n        \"j\" : 74,\n        /* @property */\n        \"J\" : 74,\n        /* @property */\n        \"k\" : 75,\n        /* @property */\n        \"K\" : 75,\n        /* @property */\n        \"l\" : 76,\n        /* @property */\n        \"L\" : 76,\n        /* @property */\n        \"m\" : 77,\n        /* @property */\n        \"M\" : 77,\n        /* @property */\n        \"n\" : 78,\n        /* @property */\n        \"N\" : 78,\n        /* @property */\n        \"o\" : 79,\n        /* @property */\n        \"O\" : 79,\n        /* @property */\n        \"p\" : 80,\n        /* @property */\n        \"P\" : 80,\n        /* @property */\n        \"q\" : 81,\n        /* @property */\n        \"Q\" : 81,\n        /* @property */\n        \"r\" : 82,\n        /* @property */\n        \"R\" : 82,\n        /* @property */\n        \"s\" : 83,\n        /* @property */\n        \"S\" : 83,\n        /* @property */\n        \"t\" : 84,\n        /* @property */\n        \"T\" : 84,\n        /* @property */\n        \"u\" : 85,\n        /* @property */\n        \"U\" : 85,\n        /* @property */\n        \"v\" : 86,\n        /* @property */\n        \"V\" : 86,\n        /* @property */\n        \"w\" : 87,\n        /* @property */\n        \"W\" : 87,\n        /* @property */\n        \"x\" : 88,\n        /* @property */\n        \"X\" : 88,\n        /* @property */\n        \"y\" : 89,\n        /* @property */\n        \"Y\" : 89,\n        /* @property */\n        \"z\" : 90,\n        /* @property */\n        \"Z\" : 90,\n        \n        /* @property */\n        \"numpad0\" : 96,\n        /* @property */\n        \"numpad1\" : 97,\n        /* @property */\n        \"numpad2\" : 98,\n        /* @property */\n        \"numpad3\" : 99,\n        /* @property */\n        \"numpad4\" : 100,\n        /* @property */\n        \"numpad5\" : 101,\n        /* @property */\n        \"numpad6\" : 102,\n        /* @property */\n        \"numpad7\" : 103,\n        /* @property */\n        \"numpad8\" : 104,\n        /* @property */\n        \"numpad9\" : 105,\n        /* @property */\n        \"multiply\"      : 106,\n        /* @property */\n        \"add\"           : 107,\n        /* @property */\n        \"subtract\"      : 109,\n        /* @property */\n        \"decimalpoint\"  : 110,\n        /* @property */\n        \"divide\"        : 111,\n\n        /* @property */\n        \"f1\"    : 112,\n        /* @property */\n        \"f2\"    : 113,\n        /* @property */\n        \"f3\"    : 114,\n        /* @property */\n        \"f4\"    : 115,\n        /* @property */\n        \"f5\"    : 116,\n        /* @property */\n        \"f6\"    : 117,\n        /* @property */\n        \"f7\"    : 118,\n        /* @property */\n        \"f8\"    : 119,\n        /* @property */\n        \"f9\"    : 120,\n        /* @property */\n        \"f10\"   : 121,\n        /* @property */\n        \"f11\"   : 122,\n        /* @property */\n        \"f12\"   : 123,\n        \n        /* @property */\n        \"numlock\"   : 144,\n        /* @property */\n        \"scrolllock\": 145,\n        /* @property */\n        \"semicolon\" : 186,\n        /* @property */\n        \"equalsign\" : 187,\n        /* @property */\n        \"comma\"     : 188,\n        /* @property */\n        \"dash\"      : 189,\n        /* @property */\n        \"period\"    : 190,\n        /* @property */\n        \"forward slash\" : 191,\n        /* @property */\n        \"/\": 191,\n        /* @property */\n        \"grave accent\"  : 192,\n        /* @property */\n        \"open bracket\"  : 219,\n        /* @property */\n        \"back slash\"    : 220,\n        /* @property */\n        \"close bracket\"  : 221,\n        /* @property */\n        \"single quote\"  : 222,\n        /* @property */\n        \"space\"         : 32\n\n      },\n    }\n  });\n\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.input.GamepadManager\n   * ゲームパッドマネージャー.\n   * ゲームパッド接続状況の監視、個々のゲームパッドの入力状態の更新を行う.\n   */\n  phina.define('phina.input.GamepadManager', {\n    superClass: 'phina.util.EventDispatcher',\n\n    /**\n     * 作成済みphina.input.Gamepadオブジェクトのリスト\n     *\n     * @type {Object.<number, phina.input.Gamepad>}\n     */\n    gamepads: null,\n\n    /**\n     * 作成済みゲームパッドのindexのリスト\n     *\n     * @type {number[]}\n     * @private\n     */\n    _created: null,\n\n    /**\n     * ラップ前Gamepadのリスト\n     * @type {phina.input.Gamepad[]}\n     * @private\n     */\n    _rawgamepads: null,\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n\n      this.gamepads = {};\n      this._created = [];\n      this._rawgamepads = [];\n\n      this._prevTimestamps = {};\n\n      this._getGamepads = null;\n      var navigator = phina.global.navigator;\n      if (navigator && navigator.getGamepads) {\n        this._getGamepads = navigator.getGamepads.bind(navigator);\n      } else if (navigator && navigator.webkitGetGamepads) {\n        this._getGamepads = navigator.webkitGetGamepads.bind(navigator);\n      } else {\n        this._getGamepads = function() {};\n      }\n\n      phina.global.addEventListener('gamepadconnected', function(e) {\n        var gamepad = this.get(e.gamepad.index);\n        gamepad.connected = true;\n        this.flare('connected', {\n          gamepad: gamepad,\n        });\n      }.bind(this));\n\n      phina.global.addEventListener('gamepaddisconnected', function(e) {\n        var gamepad = this.get(e.gamepad.index);\n        gamepad.connected = false;\n        this.flare('disconnected', {\n          gamepad: gamepad,\n        });\n      }.bind(this));\n    },\n\n    /**\n     * 情報更新処理\n     * マイフレーム呼んで下さい.\n     */\n    update: function() {\n      this._poll();\n\n      for (var i = 0, end = this._created.length; i < end; i++) {\n        var index = this._created[i];\n        var rawgamepad = this._rawgamepads[index];\n\n        if (!rawgamepad) {\n          continue;\n        }\n\n        if (rawgamepad.timestamp && (rawgamepad.timestamp === this._prevTimestamps[i])) {\n          this.gamepads[index]._updateStateEmpty();\n          continue;\n        }\n\n        this._prevTimestamps[i] = rawgamepad.timestamp;\n        this.gamepads[index]._updateState(rawgamepad);\n      }\n    },\n\n    /**\n     * 指定されたindexのGamepadオブジェクトを返す.\n     *\n     * 未作成の場合は作成して返す.\n     */\n    get: function(index) {\n      index = index || 0;\n\n      if (!this.gamepads[index]) {\n        this._created.push(index);\n        this.gamepads[index] = phina.input.Gamepad(index);\n      }\n\n      return this.gamepads[index];\n    },\n\n    /**\n     * 指定されたindexのGamepadオブジェクトを破棄する.\n     * 破棄されたGamepadオブジェクトは以降更新されない.\n     */\n    dispose: function(index) {\n      if (this._created.contains(index)) {\n        var gamepad = this.get(index);\n        delete this.gamepad[gamepad];\n        this._created.erase(index);\n\n        gamepad.connected = false;\n      }\n    },\n\n    /**\n     * 指定されたindexのゲームパッドが接続中かどうかを返す.\n     *\n     * Gamepadオブジェクトが未作成の場合でも動作する.\n     */\n    isConnected: function(index) {\n      index = index || 0;\n\n      return this._rawgamepads[index] && this._rawgamepads[index].connected;\n    },\n\n    /**\n     * @private\n     */\n    _poll: function() {\n      var rawGamepads = this._getGamepads();\n      if (rawGamepads) {\n        this._rawgamepads.clear();\n\n        for (var i = 0, end = rawGamepads.length; i < end; i++) {\n          if (rawGamepads[i]) {\n            this._rawgamepads.push(rawGamepads[i]);\n          }\n        }\n      }\n    },\n\n    _static: {\n      /** ブラウザがGamepad APIに対応しているか. */\n      isAvailable: (function() {\n        var nav = phina.global.navigator;\n        if (!nav) return false;\n\n        return (!!nav.getGamepads) || (!!nav.webkitGetGamepads);\n      })(),\n    },\n\n  });\n\n  /**\n   * @class phina.input.Gamepad\n   * ゲームパッド\n   *\n   * 直接インスタンス化せず、phina.input.GamepadManagerオブジェクトから取得して使用する.\n   */\n  phina.define(\"phina.input.Gamepad\", {\n\n    index: null,\n    buttons: null,\n    /** @type {Array.<phina.geom.Vector2>} */\n    sticks: null,\n\n    id: null,\n    connected: false,\n    mapping: null,\n    timestamp: null,\n\n    init: function(index) {\n      this.index = index || 0;\n\n      this.buttons = Array.range(0, 16).map(function() {\n        return {\n          value: 0,\n          pressed: false,\n          last: false,\n          down: false,\n          up: false,\n        };\n      });\n      this.sticks = Array.range(0, 2).map(function() {\n        return phina.geom.Vector2(0, 0);\n      });\n    },\n\n    /**\n     * ボタンが押されているか.\n     */\n    getKey: function(button) {\n      if (typeof(button) === 'string') {\n        button = phina.input.Gamepad.BUTTON_CODE[button];\n      }\n      if (this.buttons[button]) {\n        return this.buttons[button].pressed;\n      } else {\n        return false;\n      }\n    },\n\n    /**\n     * ボタンを押した.\n     */\n    getKeyDown: function(button) {\n      if (typeof(button) === 'string') {\n        button = phina.input.Gamepad.BUTTON_CODE[button];\n      }\n      if (this.buttons[button]) {\n        return this.buttons[button].down;\n      } else {\n        return false;\n      }\n    },\n\n    /**\n     * ボタンを離した.\n     */\n    getKeyUp: function(button) {\n      if (typeof(button) === 'string') {\n        button = phina.input.Gamepad.BUTTON_CODE[button];\n      }\n      if (this.buttons[button]) {\n        return this.buttons[button].up;\n      } else {\n        return false;\n      }\n    },\n\n    /**\n     * 十字キーの入力されている方向.\n     */\n    getKeyAngle: function() {\n      var angle = null;\n      var arrowBit =\n        (this.getKey('left') << 3) | // 1000\n        (this.getKey('up') << 2) | // 0100\n        (this.getKey('right') << 1) | // 0010\n        (this.getKey('down')); // 0001\n\n      if (arrowBit !== 0 && ARROW_BIT_TO_ANGLE_TABLE.hasOwnProperty(arrowBit)) {\n        angle = ARROW_BIT_TO_ANGLE_TABLE[arrowBit];\n      }\n\n      return angle;\n    },\n\n    /**\n     * 十字キーの入力されている方向をベクトルで.\n     * 正規化されている.\n     */\n    getKeyDirection: function() {\n      var direction = phina.geom.Vector2(0, 0);\n\n      if (this.getKey('left')) {\n        direction.x = -1;\n      } else if (this.getKey('right')) {\n        direction.x = 1;\n      }\n      if (this.getKey('up')) {\n        direction.y = -1;\n      } else if (this.getKey('down')) {\n        direction.y = 1;\n      }\n\n      if (direction.x && direction.y) {\n        direction.div(Math.SQRT2);\n      }\n\n      return direction;\n    },\n\n    /**\n     * スティックの入力されている方向.\n     */\n    getStickAngle: function(stickId) {\n      stickId = stickId || 0;\n      var stick = this.sticks[stickId];\n      return stick ? Math.atan2(-stick.y, stick.x) : null;\n    },\n\n    /**\n     * スティックの入力されている方向をベクトルで.\n     */\n    getStickDirection: function(stickId) {\n      stickId = stickId || 0;\n      return this.sticks ? this.sticks[stickId].clone() : phina.geom.Vector2(0, 0);\n    },\n\n    /**\n     * @private\n     */\n    _updateState: function(gamepad) {\n      this.id = gamepad.id;\n      this.connected = gamepad.connected;\n      this.mapping = gamepad.mapping;\n      this.timestamp = gamepad.timestamp;\n\n      for (var i = 0, iend = gamepad.buttons.length; i < iend; i++) {\n        this._updateButton(gamepad.buttons[i], i);\n      }\n\n      for (var j = 0, jend = gamepad.axes.length; j < jend; j += 2) {\n        this._updateStick(gamepad.axes[j + 0], j / 2, 'x');\n        this._updateStick(gamepad.axes[j + 1], j / 2, 'y');\n      }\n    },\n\n    /**\n     * @private\n     */\n    _updateStateEmpty: function() {\n      for (var i = 0, iend = this.buttons.length; i < iend; i++) {\n        this.buttons[i].down = false;\n        this.buttons[i].up = false;\n      }\n    },\n\n    /**\n     * @private\n     */\n    _updateButton: function(value, buttonId) {\n      if (this.buttons[buttonId] === undefined) {\n        this.buttons[buttonId] = {\n          value: 0,\n          pressed: false,\n          last: false,\n          down: false,\n          up: false,\n        };\n      }\n      \n      var button = this.buttons[buttonId];\n\n      button.last = button.pressed;\n\n      if (typeof value === 'object') {\n        button.value = value.value;\n        button.pressed = value.pressed;\n      } else {\n        button.value = value;\n        button.pressed = value > phina.input.Gamepad.ANALOGUE_BUTTON_THRESHOLD;\n      }\n\n      button.down = (button.pressed ^ button.last) & button.pressed;\n      button.up = (button.pressed ^ button.last) & button.last;\n    },\n\n    /**\n     * @private\n     */\n    _updateStick: function(value, stickId, axisName) {\n      if (this.sticks[stickId] === undefined) {\n        this.sticks[stickId] = phina.geom.Vector2(0, 0);\n      }\n      this.sticks[stickId][axisName] = value;\n    },\n\n    _static: {\n      /** ブラウザがGamepad APIに対応しているか. */\n      isAvailable: (function() {\n        var nav = phina.global.navigator;\n        if (!nav) return false;\n\n        return (!!nav.getGamepads) || (!!nav.webkitGetGamepads);\n      })(),\n\n      /** アナログ入力対応のボタンの場合、どの程度まで押し込むとonになるかを表すしきい値. */\n      ANALOGUE_BUTTON_THRESHOLD: 0.5,\n\n      /** ボタン名とボタンIDのマップ. */\n      BUTTON_CODE: {\n        'a': 0,\n        'b': 1,\n        'x': 2,\n        'y': 3,\n\n        'l1': 4,\n        'r1': 5,\n        'l2': 6,\n        'r2': 7,\n\n        'select': 8,\n        'start': 9,\n\n        'l3': 10,\n        'r3': 11,\n\n        'up': 12,\n        'down': 13,\n        'left': 14,\n        'right': 15,\n\n        'special': 16,\n\n        'A': 0,\n        'B': 1,\n        'X': 2,\n        'Y': 3,\n\n        'L1': 4,\n        'R1': 5,\n        'L2': 6,\n        'R2': 7,\n\n        'SELECT': 8,\n        'START': 9,\n\n        'L3': 10,\n        'R3': 11,\n\n        'UP': 12,\n        'DOWN': 13,\n        'LEFT': 14,\n        'RIGHT': 15,\n\n        'SPECIAL': 16,\n      },\n    },\n  });\n\n  var ARROW_BIT_TO_ANGLE_TABLE = {\n    0x00: null,\n\n    /* @property 下 */\n    0x01: 270,\n    /* @property 右 */\n    0x02: 0,\n    /* @property 上 */\n    0x04: 90,\n    /* @property 左 */\n    0x08: 180,\n\n    /* @property 右上 */\n    0x06: 45,\n    /* @property 右下 */\n    0x03: 315,\n    /* @property 左上 */\n    0x0c: 135,\n    /* @property 左下 */\n    0x09: 225,\n\n    // 三方向同時押し対応\n    // 想定外の操作だが対応しといたほうが無難\n    /* @property 右上左 */\n    0x0e: 90,\n    /* @property 上左下 */\n    0x0d: 180,\n    /* @property 左下右 */\n    0x0b: 270,\n    /* @property 下右上 */\n    0x07: 0,\n  };\n\n});\n\n/*\n *\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.input.Accelerometer\n   * スマートフォンのセンサー情報\n   */\n  phina.define('phina.input.Accelerometer', {\n\n    /** @property  gravity 重力センサー */\n    /** @property  acceleration 加速度センサー */\n    /** @property  rotation 回転加速度センサー */\n    /** @property  orientation スマートフォンの傾き */\n\n    /**\n     * @constructor\n     */\n    init: function() {\n\n      var self = this;\n      \n      this.gravity        = phina.geom.Vector3(0, 0, 0);\n      this.acceleration   = phina.geom.Vector3(0, 0, 0);\n      this.rotation       = phina.geom.Vector3(0, 0, 0);\n      this.orientation    = phina.geom.Vector3(0, 0, 0);\n\n      if (phina.isMobile()) {\n        phina.global.addEventListener(\"devicemotion\", function(e) {\n          var acceleration = self.acceleration;\n          var gravity = self.gravity;\n          var rotation = self.rotation;\n          \n          if (e.acceleration) {\n            acceleration.x = e.acceleration.x;\n            acceleration.y = e.acceleration.y;\n            acceleration.z = e.acceleration.z;\n          }\n          if (e.accelerationIncludingGravity) {\n            gravity.x = e.accelerationIncludingGravity.x;\n            gravity.y = e.accelerationIncludingGravity.y;\n            gravity.z = e.accelerationIncludingGravity.z;\n          }\n          if (e.rotationRate) {\n            rotation.x = rotation.beta  = e.rotationRate.beta;\n            rotation.y = rotation.gamma = e.rotationRate.gamma;\n            rotation.z = rotation.alpha = e.rotationRate.alpha;\n          }\n        });\n        \n        phina.global.addEventListener(\"deviceorientation\", function(e) {\n          var orientation = self.orientation;\n          orientation.alpha   = e.alpha;  // z(0~360)\n          orientation.beta    = e.beta;   // x(-180~180)\n          orientation.gamma   = e.gamma;  // y(-90~90)\n        });\n      }\n    },\n\n  });\n\n});\n\nphina.namespace(function() {\n\n\n  phina.define('phina.app.Updater', {\n\n    init: function(app) {\n      this.app = app;\n    },\n\n    update: function(root) {\n      this._updateElement(root);\n    },\n\n    _updateElement: function(element) {\n      var app = this.app;\n\n      // 更新するかを判定\n      if (element.awake === false) return ;\n\n      // エンターフレームイベント\n      if (element.has('enterframe')) {\n        element.flare('enterframe', {\n          app: this.app,\n        });\n      }\n\n      // 更新\n      if (element.update) element.update(app);\n\n      // タッチ判定\n      // this._checkPoint(element);\n\n      // 子供を更新\n      var len = element.children.length;\n      if (element.children.length > 0) {\n        var tempChildren = element.children.slice();\n        for (var i=0; i<len; ++i) {\n          this._updateElement(tempChildren[i]);\n        }\n      }\n    },\n\n    _checkPoint: function(obj) {\n\n      this.app.pointers.forEach(function(p) {\n        if (p.id !== null) {\n          this.__checkPoint(obj, p);\n        }\n      }, this);\n    },\n\n    __checkPoint: function(obj, p) {\n      if (!obj.interactive) return ;\n\n      var prevOverFlag = obj._overFlags[p.id];\n      var overFlag = obj.hitTest2(p.x, p.y);\n      obj._overFlags[p.id] = overFlag;\n\n      if (!prevOverFlag && overFlag) {\n        obj.flare('pointover', {\n          pointer: p,\n        });\n      }\n      if (prevOverFlag && !overFlag) {\n        obj.flare('pointout');\n      }\n\n      if (overFlag) {\n        if (p.getPointingStart()) {\n          obj._touchFlags[p.id] = true;\n          obj.flare('pointstart');\n        }\n      }\n\n      if (obj._touchFlags[p.id]) {\n        obj.flare('pointstay');\n        if (p._moveFlag) {\n          obj.flare('pointmove');\n        }\n      }\n\n      if (obj._touchFlags[p.id]===true && p.getPointingEnd()) {\n        obj._touchFlags[p.id] = false;\n        obj.flare('pointend');\n\n        if (obj._overFlags[p.id]) {\n          obj._overFlags[p.id] = false;\n          obj.flare('pointout');\n        }\n      }\n    },\n\n  });\n\n  \n});\n\nphina.namespace(function() {\n\n\n  phina.define('phina.app.Interactive', {\n\n    init: function(app) {\n      this.app = app;\n      this._enable = true;\n      this.multiTouch = true;\n      this.cursor = {\n        normal: '',\n        hover: 'pointer',\n      };\n\n      this._holds = [];\n      this.app.on('changescene', function() {\n        this._holds.clear();\n      }.bind(this));\n    },\n\n    enable: function() {\n      this._enable = true;\n      return this;\n    },\n    disable: function() {\n      this._enable = false;\n      return this;\n    },\n\n    check: function(root) {\n      // カーソルのスタイルを反映\n      if (this.app.domElement) {\n        if (this._holds.length > 0) {\n          this.app.domElement.style.cursor = this.cursor.hover;\n        }\n        else {\n          this.app.domElement.style.cursor = this.cursor.normal;\n        }\n      }\n\n      if (!this._enable || !this.app.pointers) return ;\n      this._checkElement(root);\n    },\n\n    _checkElement: function(element) {\n      var app = this.app;\n\n      // 更新するかを判定\n      if (element.awake === false) return ;\n\n      // 子供を更新\n      var len = element.children.length;\n      if (element.children.length > 0) {\n        var tempChildren = element.children.slice();\n        for (var i=0; i<len; ++i) {\n          this._checkElement(tempChildren[i]);\n        }\n      }\n\n      // タッチ判定\n      this._checkPoint(element);\n    },\n\n    _checkPoint: function(obj) {\n      if (this.multiTouch) {\n        this.app.pointers.forEach(function(p) {\n          if (p.id !== null) {\n            this.__checkPoint(obj, p);\n          }\n        }, this);\n      }\n      else {\n        this.__checkPoint(obj, this.app.pointer);\n      }\n    },\n\n    __checkPoint: function(obj, p) {\n      if (!obj.interactive) return ;\n\n      var prevOverFlag = obj._overFlags[p.id];\n      var overFlag = obj.hitTest(p.x, p.y);\n      obj._overFlags[p.id] = overFlag;\n\n      var e = {\n        pointer: p,\n        interactive: this,\n        over: overFlag,\n      };\n\n      if (!prevOverFlag && overFlag) {\n        obj.flare('pointover', e);\n\n        if (obj.boundingType && obj.boundingType !== 'none') {\n          this._holds.push(obj);\n        }\n      }\n      if (prevOverFlag && !overFlag) {\n        obj.flare('pointout', e);\n        this._holds.erase(obj);\n      }\n\n      if (overFlag) {\n        if (p.getPointingStart()) {\n          obj._touchFlags[p.id] = true;\n          obj.flare('pointstart', e);\n          // クリックフラグを立てる\n          obj._clicked = true;\n        }\n      }\n\n      if (obj._touchFlags[p.id]) {\n        obj.flare('pointstay', e);\n        if (p._moveFlag) {\n          obj.flare('pointmove', e);\n        }\n      }\n\n      if (obj._touchFlags[p.id]===true && p.getPointingEnd()) {\n        obj._touchFlags[p.id] = false;\n        obj.flare('pointend', e);\n\n        if (obj._overFlags[p.id]) {\n          obj._overFlags[p.id] = false;\n          obj.flare('pointout', e);\n        }\n      }\n    },\n  });\n\n  \n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.app.BaseApp\n   * ベースとなるアプリケーションクラス\n   */\n  phina.define('phina.app.BaseApp', {\n    superClass: 'phina.util.EventDispatcher',\n\n    /** awake */\n    awake: null,\n    /** fps */\n    fps: null,\n    /** frame */\n    frame: null,\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n      this._scenes = [phina.app.Scene()];\n      this._sceneIndex = 0;\n\n      this.updater = phina.app.Updater(this);\n      this.interactive = phina.app.Interactive(this);\n\n      this.awake = true;\n      this.ticker = phina.util.Ticker();\n    },\n\n    run: function() {\n      var self = this;\n\n      this.ticker.tick(function() {\n        self._loop();\n      });\n\n      this.ticker.start();\n\n      return this;\n    },\n\n    replaceScene: function(scene) {\n      this.flare('replace');\n      this.flare('changescene');\n\n      var e = null;\n      if (this.currentScene) {\n        this.currentScene.app = null;\n      }\n      this.currentScene = scene;\n      this.currentScene.app = this;\n      this.currentScene.flare('enter', {\n        app: this,\n      });\n\n      return this;\n    },\n\n    pushScene: function(scene) {\n      this.flare('push');\n      this.flare('changescene');\n\n      this.currentScene.flare('pause', {\n        app: this,\n      });\n      \n      this._scenes.push(scene);\n      ++this._sceneIndex;\n\n      this.flare('pushed');\n      \n      scene.app = this;\n      scene.flare('enter', {\n        app: this,\n      });\n\n      return this;\n    },\n\n    /**\n     * シーンをポップする(ポーズやオブション画面などで使用)\n     */\n    popScene: function() {\n      this.flare('pop');\n      this.flare('changescene');\n\n      var scene = this._scenes.pop();\n      --this._sceneIndex;\n\n      scene.flare('exit', {\n        app: this,\n      });\n      scene.app = null;\n\n      this.flare('poped');\n      \n      // \n      this.currentScene.flare('resume', {\n        app: this,\n        prevScene: scene,\n      });\n      \n      return scene;\n    },\n\n    /**\n     * シーンのupdateを実行するようにする\n     */\n    start: function() {\n      this.awake = true;\n\n      return this;\n    },\n    \n    /**\n     * シーンのupdateを実行しないようにする\n     */\n    stop: function() {\n      this.awake = false;\n\n      return this;\n    },\n\n    enableStats: function() {\n      if (phina.global.Stats) {\n        this.stats = new Stats();\n        document.body.appendChild(this.stats.domElement);\n      }\n      else {\n        // console.warn(\"not defined stats.\");\n        var STATS_URL = 'https://cdnjs.cloudflare.com/ajax/libs/stats.js/r14/Stats.js';\n        var script = document.createElement('script');\n        script.src = STATS_URL;\n        document.body.appendChild(script);\n        script.onload = function() {\n          this.enableStats();\n        }.bind(this);\n      }\n      return this;\n    },\n\n    enableDatGUI: function(callback) {\n      if (phina.global.dat) {\n        var gui = new phina.global.dat.GUI();\n        callback(gui);\n      }\n      else {\n        // console.warn(\"not defined dat.GUI.\");\n        var URL = 'https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5.1/dat.gui.js';\n        var script = document.createElement('script');\n        script.src = URL;\n        document.body.appendChild(script);\n        script.onload = function() {\n          var gui = new phina.global.dat.GUI();\n          callback(gui);\n        }.bind(this);\n      }\n      return this;\n    },\n\n    _loop: function() {\n      this._update();\n      this._draw();\n\n      this.interactive.check(this.currentScene);\n\n      // stats update\n      if (this.stats) this.stats.update();\n    },\n\n    _update: function() {\n      if (this.awake) {\n        // エンターフレームイベント\n        if (this.has('enterframe')) {\n          this.flare('enterframe');\n        }\n\n        this.update && this.update();\n        this.updater.update(this.currentScene);\n      }\n    },\n\n    /**\n     * 描画用仮想関数\n     * @private\n     */\n    _draw: function() {},\n\n    _accessor: {\n      currentScene: {\n        \"get\": function()   { return this._scenes[this._sceneIndex]; },\n        \"set\": function(v)  { this._scenes[this._sceneIndex] = v; },\n      },\n\n      rootScene: {\n        \"get\": function()   { return this._scenes[0]; },\n        \"set\": function(v)  { this._scenes[0] = v; },\n      },\n\n      frame: {\n        \"get\": function () { return this.ticker.frame; },\n        \"set\": function (v) { this.ticker.frame = v; },\n      },\n\n      fps: {\n        \"get\": function () { return this.ticker.fps; },\n        \"set\": function (v) { this.ticker.fps = v; },\n      },\n\n      deltaTime: {\n        \"get\": function () { return this.ticker.deltaTime; },\n      },\n\n      elapsedTime: {\n        \"get\": function () { return this.ticker.elapsedTime; },\n      },\n\n      currentTime: {\n        \"get\": function () { return this.ticker.currentTime; },\n      },\n\n      startTime: {\n        \"get\": function () { return this.ticker.startTime; },\n      },\n    },\n\n  });\n\n  \n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.app.Element\n   * @extends phina.util.EventDispatcher\n   */\n  phina.define('phina.app.Element', {\n    superClass: 'phina.util.EventDispatcher',\n\n    /// 親\n    parent: null,\n\n    /// 子供\n    children: null,\n\n    /// 有効化どうか\n    awake: true,\n\n    /**\n     * @constructor\n     */\n    init: function() {\n      this.superInit();\n      this.children = [];\n    },\n\n    addChild: function(child) {\n      if (child.parent) child.remove();\n\n      child.parent = this;\n      this.children.push(child);\n\n      child.has('added') && child.flare('added');\n\n      return child;\n    },\n\n    addChildTo: function(parent) {\n      parent.addChild(this);\n\n      return this;\n    },\n\n    addChildAt: function(child, index) {\n      if (child.parent) child.remove();\n\n      child.parent = this;\n      this.children.splice(index, 0, child);\n\n      child.has('added') && child.flare('added');\n\n      return child;\n    },\n\n    getChildAt: function(index) {\n      return this.children.at(index);\n    },\n\n    getChildByName: function(name) {\n      // TODO: \n    },\n\n    getChildIndex: function(child) {\n      return this.children.indexOf(child);\n    },\n\n    getParent: function() {\n      return this.parent;\n    },\n\n    getRoot: function() {\n      var elm = this;\n      for (elm=this.parent; elm.parent != null; elm = elm.parent) {\n\n      }\n      return elm;\n    },\n\n    removeChild: function(child) {\n      var index = this.children.indexOf(child);\n      if (index !== -1) {\n        this.children.splice(index, 1);\n        child.has('removed') && child.flare('removed');\n      }\n      return this;\n    },\n\n    remove: function() {\n      if (!this.parent) return ;\n\n      this.parent.removeChild(this);\n      this.parent = null;\n      \n      return this;\n    },\n\n    isAwake: function() {\n      return this.awake;\n    },\n\n    wakeUp: function() {\n      this.awake = true;\n      return this;\n    },\n\n    sleep: function() {\n      this.awake = false;\n      return this;\n    },\n\n    fromJSON: function(json) {\n\n      var createChildren = function(name, data) {\n        // \n        var args = data.arguments;\n        args = (args instanceof Array) ? args : [args];\n        // \n        var _class = phina.using(data.className);\n        // \n        var element = _class.apply(null, args);\n        \n        element.name = name;\n        this[name] = element;\n\n        element.fromJSON(data);\n        element.addChildTo(this)\n      }.bind(this);\n\n      json.forIn(function(key, value) {\n        if (key === 'children') {\n          value.forIn(function(name, data) {\n            createChildren(name, data);\n          });\n        }\n        else {\n          if (key !== 'type' && key !== 'className') {\n            this[key] = value;\n          }\n        }\n      }, this);\n\n      return this;\n    },\n\n    toJSON: function() {\n      var keys = Object.keys(phina.using(this.className).defaults || {});\n\n      this._hierarchies.forEach(function(e) {\n        var d = e.defaults;\n        if (d) {\n          Object.keys(d).forEach(function(k) {\n            if (keys.indexOf(k) === -1) {\n              keys.push(k);\n            }\n          });\n        }\n      });\n      \n      keys.push('name', 'className');\n      \n      var json = {};\n      keys.each(function(key) {\n        json[key] = this[key];\n      }, this);\n\n      var children = this.children.map(function(child) {\n        return child.toJSON();\n      });\n\n      if (children.length) {\n        json.children = {};\n        children.each(function(child, i) {\n          json.children[child.name || (child.className + '_' + i)] = child;\n        });\n      }\n\n      return json;\n    },\n  });\n  \n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.app.Object2D\n   * Object2D\n   * @extends phina.app.Element\n   */\n  phina.define('phina.app.Object2D', {\n    superClass: 'phina.app.Element',\n\n    /** 位置 */\n    position: null,\n    /** 回転 */\n    rotation: 0,\n    /** スケール */\n    scale: null,\n    /** 基準位置 */\n    origin: null,\n\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      this.superInit();\n\n      options = ({}).$safe(options, phina.app.Object2D.defaults);\n\n      this.position = phina.geom.Vector2(options.x, options.y);\n      this.scale    = phina.geom.Vector2(options.scaleX, options.scaleY);\n      this.rotation = options.rotation;\n      this.origin   = phina.geom.Vector2(options.originX, options.originY);\n\n      this._matrix = phina.geom.Matrix33().identity();\n      this._worldMatrix = phina.geom.Matrix33().identity();\n\n      this.interactive = false;\n      this._overFlags = {};\n      this._touchFlags = {};\n\n      this.width = options.width;\n      this.height = options.height;\n      this.radius = options.radius;\n      this.boundingType = options.boundingType;\n    },\n\n    /**\n     * 点と衝突しているかを判定\n     * @param {Number} x\n     * @param {Number} y\n     */\n    hitTest: function(x, y) {\n      if (this.boundingType === 'rect') {\n        return this.hitTestRect(x, y);\n      }\n      else if (this.boundingType === 'circle') {\n        return this.hitTestCircle(x, y);\n      }\n      else {\n        // none の場合\n        return true;\n      }\n    },\n\n    hitTestRect: function(x, y) {\n      var p = this.globalToLocal(phina.geom.Vector2(x, y));\n\n      var left   = -this.width*this.originX;\n      var right  = +this.width*(1-this.originX);\n      var top    = -this.height*this.originY;\n      var bottom = +this.height*(1-this.originY);\n\n      return ( left < p.x && p.x < right ) && ( top  < p.y && p.y < bottom );\n    },\n\n    hitTestCircle: function(x, y) {\n      // 円判定\n      var p = this.globalToLocal(phina.geom.Vector2(x, y));\n      if (((p.x)*(p.x)+(p.y)*(p.y)) < (this.radius*this.radius)) {\n          return true;\n      }\n      return false;\n    },\n\n    /**\n     * 要素と衝突しているかを判定\n     * @param {Object} elm\n     */\n    hitTestElement: function(elm) {\n      var rect0 = this;\n      var rect1 = elm;\n      return (rect0.left < rect1.right) && (rect0.right > rect1.left) &&\n             (rect0.top < rect1.bottom) && (rect0.bottom > rect1.top);\n    },\n\n\n    globalToLocal: function(p) {\n      var matrix = this._worldMatrix.clone();\n      matrix.invert();\n      // matrix.transpose();\n\n      var temp = matrix.multiplyVector2(p);\n\n      return temp;\n    },\n\n    setInteractive: function(flag, type) {\n      this.interactive = flag;\n      if (type) {\n        this.boundingType = type;\n      }\n\n      return this;\n    },\n\n    /**\n     * X 座標値をセット\n     * @param {Number} x\n     */\n    setX: function(x) {\n      this.position.x = x;\n      return this;\n    },\n    \n    /**\n     * Y 座標値をセット\n     * @param {Number} y\n     */\n    setY: function(y) {\n      this.position.y = y;\n      return this;\n    },\n    \n    /**\n     * XY 座標をセット\n     * @param {Number} x\n     * @param {Number} y\n     */\n    setPosition: function(x, y) {\n      this.position.x = x;\n      this.position.y = y;\n      return this;\n    },\n\n    /**\n     * 回転をセット\n     * @param {Number} rotation\n     */\n    setRotation: function(rotation) {\n      this.rotation = rotation;\n      return this;\n    },\n\n    /**\n     * スケールをセット\n     * @param {Number} x\n     * @param {Number} y\n     */\n    setScale: function(x, y) {\n      this.scale.x = x;\n      if (arguments.length <= 1) {\n          this.scale.y = x;\n      } else {\n          this.scale.y = y;\n      }\n      return this;\n    },\n    \n    /**\n     * 基準点をセット\n     * @param {Number} x\n     * @param {Number} y\n     */\n    setOrigin: function(x, y) {\n      this.origin.x = x;\n      this.origin.y = y;\n      return this;\n    },\n    \n    /**\n     * 幅をセット\n     * @param {Number} width\n     */\n    setWidth: function(width) {\n      this.width = width;\n      return this;\n    },\n    \n    /**\n     * 高さをセット\n     * @param {Number} height\n     */\n    setHeight: function(height) {\n      this.height = height;\n      return this;\n    },\n    \n    /**\n     * サイズ(幅, 高さ)をセット\n     * @param {Number} width\n     * @param {Number} height\n     */\n    setSize: function(width, height) {\n      this.width  = width;\n      this.height = height;\n      return this;\n    },\n\n    setBoundingType: function(type) {\n      this.boundingType = type;\n      return this;\n    },\n\n    moveTo: function(x, y) {\n      this.position.x = x;\n      this.position.y = y;\n      return this;\n    },\n\n    moveBy: function(x, y) {\n      this.position.x += x;\n      this.position.y += y;\n      return this;\n    },\n\n    _calcWorldMatrix: function() {\n      if (!this.parent) return ;\n\n      // cache check\n      if (this.rotation != this._cachedRotation) {\n        this._cachedRotation = this.rotation;\n\n        var r = this.rotation*(Math.PI/180);\n        this._sr = Math.sin(r);\n        this._cr = Math.cos(r);\n      }\n\n      var local = this._matrix;\n      var parent = this.parent._worldMatrix || phina.geom.Matrix33.IDENTITY;\n      var world = this._worldMatrix;\n\n      // ローカルの行列を計算\n      local.m00 = this._cr * this.scale.x;\n      local.m01 =-this._sr * this.scale.y;\n      local.m10 = this._sr * this.scale.x;\n      local.m11 = this._cr * this.scale.y;\n      local.m02 = this.position.x;\n      local.m12 = this.position.y;\n\n      // cache\n      var a00 = local.m00; var a01 = local.m01; var a02 = local.m02;\n      var a10 = local.m10; var a11 = local.m11; var a12 = local.m12;\n      var b00 = parent.m00; var b01 = parent.m01; var b02 = parent.m02;\n      var b10 = parent.m10; var b11 = parent.m11; var b12 = parent.m12;\n\n      // 親の行列と掛け合わせる\n      world.m00 = b00 * a00 + b01 * a10;\n      world.m01 = b00 * a01 + b01 * a11;\n      world.m02 = b00 * a02 + b01 * a12 + b02;\n\n      world.m10 = b10 * a00 + b11 * a10;\n      world.m11 = b10 * a01 + b11 * a11;\n      world.m12 = b10 * a02 + b11 * a12 + b12;\n\n      return this;\n    },\n\n    _accessor: {\n      /**\n       * @property    x\n       * x座標値\n       */\n      x: {\n        \"get\": function()   { return this.position.x; },\n        \"set\": function(v)  { this.position.x = v; }\n      },\n      /**\n       * @property    y\n       * y座標値\n       */\n      y: {\n        \"get\": function()   { return this.position.y; },\n        \"set\": function(v)  { this.position.y = v; }\n      },\n\n      /**\n       * @property    originX\n       * x座標値\n       */\n      originX: {\n        \"get\": function()   { return this.origin.x; },\n        \"set\": function(v)  { this.origin.x = v; }\n      },\n      \n      /**\n       * @property    originY\n       * y座標値\n       */\n      originY: {\n        \"get\": function()   { return this.origin.y; },\n        \"set\": function(v)  { this.origin.y = v; }\n      },\n      \n      /**\n       * @property    scaleX\n       * スケールX値\n       */\n      scaleX: {\n        \"get\": function()   { return this.scale.x; },\n        \"set\": function(v)  { this.scale.x = v; }\n      },\n      \n      /**\n       * @property    scaleY\n       * スケールY値\n       */\n      scaleY: {\n        \"get\": function()   { return this.scale.y; },\n        \"set\": function(v)  { this.scale.y = v; }\n      },\n      \n      /**\n       * @property    width\n       * width\n       */\n      width: {\n        \"get\": function()   {\n          return (this.boundingType === 'rect') ?\n            this._width : this._diameter;\n        },\n        \"set\": function(v)  { this._width = v; }\n      },\n      /**\n       * @property    height\n       * height\n       */\n      height: {\n        \"get\": function()   {\n          return (this.boundingType === 'rect') ?\n            this._height : this._diameter;\n        },\n        \"set\": function(v)  { this._height = v; }\n      },\n\n      /**\n       * @property    radius\n       * 半径\n       */\n      radius: {\n        \"get\": function()   {\n          return (this.boundingType === 'rect') ?\n            (this.width+this.height)/4 : this._radius;\n        },\n        \"set\": function(v)  {\n          this._radius = v;\n          this._diameter = v*2;\n        },\n      },\n      \n      /**\n       * @property    top\n       * 左\n       */\n      top: {\n        \"get\": function()   { return this.y - this.height*this.originY; },\n        \"set\": function(v)  { this.y = v + this.height*this.originY; },\n      },\n   \n      /**\n       * @property    right\n       * 左\n       */\n      right: {\n        \"get\": function()   { return this.x + this.width*(1-this.originX); },\n        \"set\": function(v)  { this.x = v - this.width*(1-this.originX); },\n      },\n   \n      /**\n       * @property    bottom\n       * 左\n       */\n      bottom: {\n        \"get\": function()   { return this.y + this.height*(1-this.originY); },\n        \"set\": function(v)  { this.y = v - this.height*(1-this.originY); },\n      },\n   \n      /**\n       * @property    left\n       * 左\n       */\n      left: {\n        \"get\": function()   { return this.x - this.width*this.originX; },\n        \"set\": function(v)  { this.x = v + this.width*this.originX; },\n      },\n\n      /**\n       * @property    centerX\n       * centerX\n       */\n      centerX: {\n        \"get\": function()   { return this.x + this.width/2 - this.width*this.originX; },\n        \"set\": function(v)  {\n          // TODO: どうしようかな??\n        }\n      },\n   \n      /**\n       * @property    centerY\n       * centerY\n       */\n      centerY: {\n        \"get\": function()   { return this.y + this.height/2 - this.height*this.originY; },\n        \"set\": function(v)  {\n          // TODO: どうしようかな??\n        }\n      },\n    },\n    _static: {\n      defaults: {\n        x: 0,\n        y: 0,\n        scaleX: 1,\n        scaleY: 1,\n        rotation: 0,\n        originX: 0.5,\n        originY: 0.5,\n        \n        width: 64,\n        height: 64,\n        radius: 32,\n        boundingType: 'rect',\n      },\n    },\n\n  });\n\n  \n});\n\nphina.namespace(function() {\n\n\n  phina.define('phina.app.Scene', {\n    superClass: 'phina.app.Element',\n\n    init: function() {\n      this.superInit();\n    },\n\n    exit: function(nextLabel, nextArguments) {\n      if (!this.app) return ;\n\n      if (arguments.length > 0) {\n        if (typeof arguments[0] === 'object') {\n          nextLabel = arguments[0].nextLabel || this.nextLabel;\n          nextArguments = arguments[0];\n        }\n\n        this.nextLabel = nextLabel;\n        this.nextArguments = nextArguments;\n      }\n\n      this.app.popScene();\n\n      return this;\n    },\n  });\n  \n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.accessory.Accessory\n   */\n  phina.define('phina.accessory.Accessory', {\n    superClass: 'phina.util.EventDispatcher',\n\n    /**\n     * @constructor\n     */\n    init: function(target) {\n      this.superInit();\n\n      this.target = target;\n    },\n    setTarget: function(target) {\n      if (this.target === target) return ;\n\n      this.target = target;\n      return this;\n    },\n    getTarget: function() {\n      return this.target;\n    },\n    isAttached: function() {\n      return !!this.target;\n    },\n    attachTo: function(element) {\n      element.attach(this);\n      this.setTarget(element);\n      return this;\n    },\n    remove: function() {\n      this.target.detach(this);\n      this.target = null;\n    },\n  });\n\n  phina.app.Element.prototype.$method('attach', function(accessory) {\n    if (!this.accessories) {\n      this.accessories = [];\n      this.on('enterframe', function(e) {\n        this.accessories.each(function(accessory) {\n          accessory.update && accessory.update(e.app);\n        });\n      });\n    }\n\n    this.accessories.push(accessory);\n    accessory.setTarget(this);\n    accessory.flare('attached');\n\n    return this;\n  });\n\n  phina.app.Element.prototype.$method('detach', function(accessory) {\n    if (this.accessories) {\n      this.accessories.erase(accessory);\n      accessory.setTarget(null);\n      accessory.flare('detached');\n    }\n\n    return this;\n  });\n\n});\n\n\n\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.accessory.Tweener\n   * Tweener\n   */\n  var Tweener = phina.define('phina.accessory.Tweener', {\n    superClass: 'phina.accessory.Accessory',\n\n    updateType: 'normal',\n\n    /**\n     * @constructor\n     */\n    init: function(target) {\n      this.superInit(target);\n\n      this._init();\n    },\n\n    _init: function() {\n      this._loop = false;\n      this._tasks = [];\n      this._index = 0;\n      this.playing = true;\n      this._update = this._updateTask;\n    },\n\n    update: function(app) {\n      this._update(app);\n    },\n\n    setUpdateType: function(type) {\n      this.updateType = type;\n      return this;\n    },\n\n    to: function(props, duration, easing) {\n      this._add({\n        type: 'tween',\n        mode: 'to',\n        props: props,\n        duration: duration,\n        easing: easing,\n      });\n      return this;\n    },\n\n    by: function(props, duration, easing) {\n      this._add({\n        type: 'tween',\n        mode: 'by',\n        props: props,\n        duration: duration,\n        easing: easing,\n      });\n\n      return this;\n    },\n\n    from: function(props, duration, easing) {\n      this._add({\n        type: 'tween',\n        mode: 'from',\n        props: props,\n        duration: duration,\n        easing: easing,\n      });\n      return this;\n    },\n\n    wait: function(time) {\n      this._add({\n        type: 'wait',\n        data: {\n          limit: time,\n        },\n      });\n      return this;\n    },\n\n    call: function(func, self, args) {\n      this._add({\n        type: 'call',\n        data: {\n          func: func,\n          self: self || this,\n          args: args,\n        },\n      });\n      return this;\n    },\n\n    /**\n     * プロパティをセット\n     * @param {Object} key\n     * @param {Object} value\n     */\n    set: function(key, value) {\n      var values = null;\n      if (arguments.length == 2) {\n        values = {};\n        values[key] = value;\n      }\n      else {\n        values = key;\n      }\n      this._tasks.push({\n        type: \"set\",\n        data: {\n          values: values\n        }\n      });\n\n      return this;\n    },\n\n    moveTo: function(x, y, duration, easing) {\n      return this.to({ x: x, y: y }, duration, easing);\n    },\n    moveBy: function(x, y, duration, easing) {\n      return this.by({ x: x, y: y }, duration, easing);\n    },\n\n    rotateTo: function(rotation, duration, easing) {\n      return this.to({ rotation: rotation }, duration, easing);\n    },\n    rotateBy: function(rotation, duration, easing) {\n      return this.by({ rotation: rotation }, duration, easing);\n    },\n\n    scaleTo: function(scale, duration, easing) {\n      return this.to({ scaleX: scale, scaleY: scale }, duration, easing);\n    },\n    scaleBy: function(scale, duration, easing) {\n      return this.by({ scaleX: scale, scaleY: scale }, duration, easing);\n    },\n\n    fade: function(value, duration, easing) {\n      return this.to({ alpha: value }, duration, easing);\n    },\n\n    fadeOut: function(duration, easing) {\n      return this.fade(0.0, duration, easing);\n    },\n\n    fadeIn: function(duration, easing) {\n      return this.fade(1.0, duration, easing);\n    },\n\n    /**\n     * アニメーション開始\n     */\n    play: function() {\n      this.playing = true;\n      return this;\n    },\n\n    /**\n     * アニメーションを一時停止\n     */\n    pause: function() {\n      this.playing = false;\n      return this;\n    },\n\n    stop: function() {\n      this.playing = false;\n      this.rewind();\n      return this;\n    },\n\n    /**\n     * アニメーションを巻き戻す\n     */\n    rewind: function() {\n      this._update = this._updateTask;\n      this._index = 0;\n      return this;\n    },\n\n    yoyo: function() {\n      // TODO: 最初の値が分からないので反転できない...\n      this._update = this._updateTask;\n      this._index = 0;\n      this._tasks.each(function(task) {\n        if (task.type === 'tween') {\n\n        }\n      });\n      this.play();\n\n      return this;\n    },\n\n    /**\n     * アニメーションループ設定\n     * @param {Boolean} flag\n     */\n    setLoop: function(flag) {\n      this._loop = flag;\n      return this;\n    },\n\n    /**\n     * アニメーションをクリア\n     */\n    clear: function() {\n      this._init();\n      return this;\n    },\n\n    fromJSON: function(json) {\n      if (json.loop !== undefined) {\n        this.setLoop(json.loop);\n      }\n\n      json.tweens.each(function(t) {\n        t = t.clone();\n        var method = t.shift();\n        this[method].apply(this, t);\n      }, this);\n\n      return this;\n    },\n\n    _add: function(params) {\n      this._tasks.push(params);\n    },\n\n    _updateTask: function(app) {\n      if (!this.playing) return ;\n\n      var task = this._tasks[this._index];\n      if (!task) {\n        if (this._loop) {\n          this.rewind();\n          this._update(app);\n        }\n        else {\n          this.playing = false;\n        }\n        return ;\n      }\n      else {\n        ++this._index;\n      }\n\n      if (task.type === 'tween') {\n        this._tween = phina.util.Tween();\n\n        var duration = task.duration || this._getDefaultDuration();\n        if (task.mode === 'to') {\n          this._tween.to(this.target, task.props, duration, task.easing);\n        }\n        else if (task.mode === 'by') {\n          this._tween.by(this.target, task.props, duration, task.easing);\n        }\n        else {\n          this._tween.from(this.target, task.props, duration, task.easing);\n        }\n        this._update = this._updateTween;\n        this._update(app);\n      }\n      else if (task.type === 'wait') {\n        this._wait = {\n          time: 0,\n          limit: task.data.limit,\n        };\n\n        this._update = this._updateWait;\n        this._update(app);\n      }\n      else if (task.type === 'call') {\n        task.data.func.apply(task.data.self, task.data.args);\n        // 1フレーム消費しないよう再帰\n        this._update(app);\n      }\n      else if (task.type === 'set') {\n        this.target.$extend(task.data.values);\n        // 1フレーム消費しないよう再帰\n        this._update(app);\n      }\n    },\n\n    _updateTween: function(app) {\n      var tween = this._tween;\n      var time = this._getUnitTime(app);\n\n      tween.forward(time);\n      this.flare('tween');\n\n      if (tween.time >= tween.duration) {\n        delete this._tween;\n        this._tween = null;\n        this._update = this._updateTask;\n      }\n    },\n\n    _updateWait: function(app) {\n      var wait = this._wait;\n      var time = this._getUnitTime(app);\n      wait.time += time;\n\n      if (wait.time >= wait.limit) {\n        delete this._wait;\n        this._wait = null;\n        this._update = this._updateTask;\n      }\n    },\n\n    _getUnitTime: function(app) {\n      var obj = UPDATE_MAP[this.updateType];\n      if (obj) {\n        return obj.func(app);\n      }\n      else {\n        return 1000 / app.fps;\n      }\n    },\n\n    _getDefaultDuration: function() {\n      var obj = UPDATE_MAP[this.updateType];\n      return obj && obj.duration;\n    },\n\n    _static: {\n      UPDATE_MAP: {\n        normal: {\n          func: function(app) {\n            return 1000 / app.fps;\n          },\n          duration: 1000,\n        },\n\n        delta: {\n          func: function(app) {\n            return app.ticker.deltaTime;\n          },\n          duration: 1000,\n        },\n\n        fps: {\n          func: function(app) {\n            return 1;\n          },\n          duration: 30,\n        },\n\n      }\n    }\n  });\n\n  var UPDATE_MAP = Tweener.UPDATE_MAP;\n\n  phina.app.Element.prototype.getter('tweener', function() {\n    if (!this._tweener) {\n      this._tweener = phina.accessory.Tweener().attachTo(this);\n    }\n    return this._tweener;\n  });\n  \n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.accessory.Draggable\n   * Draggable\n   */\n  phina.define('phina.accessory.Draggable', {\n    superClass: 'phina.accessory.Accessory',\n\n    /**\n     * @constructor\n     */\n    init: function(target) {\n      this.superInit(target);\n\n      this.initialPosition = phina.geom.Vector2(0, 0);\n      var self = this;\n\n      this.on('attached', function() {\n        this.target.setInteractive(true);\n\n        this._dragging = false;\n\n        this.target.on('pointstart', function(e) {\n          if (phina.accessory.Draggable._lock) return ;\n\n          this._dragging = true;\n          self.initialPosition.x = this.x;\n          self.initialPosition.y = this.y;\n          self.flare('dragstart');\n          this.flare('dragstart');\n        });\n        this.target.on('pointmove', function(e) {\n          if (!this._dragging) return ;\n\n          this.x += e.pointer.dx;\n          this.y += e.pointer.dy;\n          self.flare('drag');\n          this.flare('drag');\n        });\n\n        this.target.on('pointend', function(e) {\n          if (!this._dragging) return ;\n\n          this._dragging = false;\n          self.flare('dragend');\n          this.flare('dragend');\n        });\n      });\n    },\n\n    back: function(time, easing) {\n      if (time) {\n        var t = this.target;\n        t.setInteractive(false);\n        var tweener = phina.accessory.Tweener().attachTo(t);\n        tweener\n          .to({\n            x: this.initialPosition.x,\n            y: this.initialPosition.y,\n          }, time, easing || 'easeOutElastic')\n          .call(function() {\n            tweener.remove();\n\n            t.setInteractive(true);\n            this.flare('backend');\n          }, this);\n      }\n      else {\n        this.target.x = this.initialPosition.x;\n        this.target.y = this.initialPosition.y;\n        this.flare('backend');\n      }\n    },\n\n    enable: function() {\n      this._enable = true;\n    },\n\n    _static: {\n      _lock: false,\n      lock: function() {\n        this._lock = true;\n      },\n      unlock: function() {\n        this._lock = false;\n      },\n    }\n\n  });\n\n  phina.app.Element.prototype.getter('draggable', function() {\n    if (!this._draggable) {\n      this._draggable = phina.accessory.Draggable().attachTo(this);\n    }\n    return this._draggable;\n  });\n  \n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.accessory.Flickable\n   * Flickable\n   */\n  phina.define('phina.accessory.Flickable', {\n    superClass: 'phina.accessory.Accessory',\n\n    /**\n     * @constructor\n     */\n    init: function(target) {\n      this.superInit(target);\n\n      this.initialPosition = phina.geom.Vector2(0, 0);\n      var self = this;\n\n      this.friction = 0.9;\n      this.velocity = phina.geom.Vector2(0, 0);\n      this.vertical = true;\n      this.horizontal = true;\n\n      this.cacheList = [];\n\n      this.on('attached', function() {\n        this.target.setInteractive(true);\n\n        this.target.on('pointstart', function(e) {\n          self.initialPosition.set(this.x, this.y);\n          self.velocity.set(0, 0);\n        });\n        this.target.on('pointstay', function(e) {\n          if (self.horizontal) {\n            this.x += e.pointer.dx;\n          }\n          if (self.vertical) {\n            this.y += e.pointer.dy;\n          }\n\n          if (self.cacheList.length > 3) self.cacheList.shift();\n          self.cacheList.push(e.pointer.deltaPosition.clone());\n        });\n\n        this.target.on('pointend', function(e) {\n          // 動きのある delta position を後ろから検索　\n          var delta = self.cacheList.reverse().find(function(v) {\n            return v.lengthSquared() > 10;\n          });\n          self.cacheList.clear();\n\n          if (delta) {\n            self.velocity.x = delta.x;\n            self.velocity.y = delta.y;\n\n            self.flare('flickstart', {\n              direction: delta.normalize(),\n            });\n          }\n          else {\n            self.flare('flickcancel');\n          }\n\n          // self.flare('flick');\n          // self.flare('flickend');\n        });\n      });\n    },\n\n    update: function() {\n      if (!this.target) return ;\n\n      this.velocity.x *= this.friction;\n      this.velocity.y *= this.friction;\n\n      if (this.horizontal) {\n        this.target.position.x += this.velocity.x;\n      }\n      if (this.vertical) {\n        this.target.position.y += this.velocity.y;\n      }\n    },\n\n    cancel: function() {\n      this.target.x = this.initialPosition.x;\n      this.target.y = this.initialPosition.y;\n      this.velocity.set(0, 0);\n\n      // TODO: \n      // this.setInteractive(false);\n      // this.tweener.clear()\n      //     .move(this.initialX, this.initialY, 500, \"easeOutElastic\")\n      //     .call(function () {\n      //         this.setInteractive(true);\n      //         this.fire(tm.event.Event(\"backend\"));\n      //     }.bind(this));\n    },\n\n    enable: function() {\n      this._enable = true;\n    },\n\n  });\n\n  phina.app.Element.prototype.getter('flickable', function() {\n    if (!this._flickable) {\n      this._flickable = phina.accessory.Flickable().attachTo(this);\n    }\n    return this._flickable;\n  });\n  \n});\n/*\n * frameanimation.js\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.accessory.FrameAnimation\n   * FrameAnimation\n   */\n  phina.define('phina.accessory.FrameAnimation', {\n    superClass: 'phina.accessory.Accessory',\n\n    /**\n     * @constructor\n     */\n    init: function(ss) {\n      this.superInit();\n\n      this.ss = phina.asset.AssetManager.get('spritesheet', ss);\n      this.paused = true;\n      this.finished = false;\n      this.fit = true;\n    },\n\n    update: function() {\n      if (this.paused) return ;\n      if (!this.currentAnimation) return ;\n\n      if (this.finished) {\n        this.finished = false;\n        this.currentFrameIndex = 0;\n        return ;\n      }\n\n      ++this.frame;\n      if (this.frame%this.currentAnimation.frequency === 0) {\n        ++this.currentFrameIndex;\n        this._updateFrame();\n      }\n    },\n\n    gotoAndPlay: function(name) {\n      this.frame = 0;\n      this.currentFrameIndex = 0;\n      this.currentAnimation = this.ss.getAnimation(name);\n      this._updateFrame();\n\n      this.paused = false;\n\n      return this;\n    },\n\n    gotoAndStop: function(name) {\n      this.frame = 0;\n      this.currentFrameIndex = 0;\n      this.currentAnimation = this.ss.getAnimation(name);\n      this._updateFrame();\n\n      this.paused = true;\n\n      return this;\n    },\n\n    _updateFrame: function() {\n      var anim = this.currentAnimation;\n      if (anim) {\n        if (this.currentFrameIndex >= anim.frames.length) {\n          if (anim.next) {\n            this.gotoAndPlay(anim.next);\n            return ;\n          }\n          else {\n            this.paused = true;\n            this.finished = true;\n            return ;\n          }\n        }\n      }\n\n      var index = anim.frames[this.currentFrameIndex];\n      var frame = this.ss.getFrame(index);\n      this.target.srcRect.set(frame.x, frame.y, frame.width, frame.height);\n\n      if (this.fit) {\n        this.target.width = frame.width;\n        this.target.height = frame.height;\n      }\n    },\n    \n    _accessor: {\n      currentAnimationName: {\n        get: function() {\n          if (this.currentAnimation) {\n            return this.currentAnimation.name;\n          } else {\n            return nul;\n          }\n        },\n        set: function(name) {return this;}\n      },\n    },\n  });\n});\n/*\n *\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.accessory.Physical\n   * 本物ではないので名前変えるかも*\n   * FakePhysical or MarioPhysical or LiePhysical\n   * RetroPysical or PysicaLike\n   */\n  phina.define('phina.accessory.Physical', {\n    superClass: 'phina.accessory.Accessory',\n\n    /**\n     * @constructor\n     */\n    init: function(target) {\n      this.superInit(target);\n\n      this.velocity = phina.geom.Vector2(0, 0);\n      this.gravity = phina.geom.Vector2(0, 0);\n\n      this.friction = 1.0;\n    },\n\n    update: function() {\n      var t = this.target;\n\n      this.velocity.x *= this.friction;\n      this.velocity.y *= this.friction;\n\n      this.velocity.x += this.gravity.x;\n      this.velocity.y += this.gravity.y;\n\n      t.position.x += this.velocity.x;\n      t.position.y += this.velocity.y;\n    },\n\n    force: function(x, y) {\n      this.velocity.set(x, y);\n      return this;\n    },\n\n    addForce: function(x, y) {\n      this.velocity.x += x;\n      this.velocity.y += y;\n      return this;\n    },\n\n    setGravity: function(x, y) {\n      this.gravity.set(x, y);\n      return this;\n    },\n\n    setFriction: function(fr) {\n      this.friction = fr;\n      return this;\n    },\n  });\n\n  phina.app.Element.prototype.getter('physical', function() {\n    if (!this._physical) {\n      this._physical = phina.accessory.Physical().attachTo(this);\n    }\n    return this._physical;\n  });\n\n\n});\n\n\n\n\n\n(function() {\n\n  if (!phina.global.Event) return ;\n\n  /**\n   * @class global.Event\n   * 既存のEventオブジェクト拡張\n   */\n    \n  /**\n   * @method stop\n   * イベントのデフォルト処理 & 伝達を止める\n   */\n  Event.prototype.stop = function() {\n    // イベントキャンセル\n    this.preventDefault();\n    // イベント伝達を止める\n    this.stopPropagation();\n  };\n\n})();\n\n(function() {\n\n  if (!phina.global.MouseEvent) return ;\n\n  /**\n   * @class global.MouseEvent\n   * MouseEvent クラス\n   */\n  \n  /**\n   * @method    pointX\n   * マウスのX座標.\n   */\n  MouseEvent.prototype.getter(\"pointX\", function() {\n    return this.clientX - this.target.getBoundingClientRect().left;\n    // return this.pageX - this.target.getBoundingClientRect().left - window.scrollX;\n  });\n  \n  /**\n   * @method    pointY\n   * マウスのY座標.\n   */\n  MouseEvent.prototype.getter(\"pointY\", function() {\n    return this.clientY - this.target.getBoundingClientRect().top;\n    // return this.pageY - this.target.getBoundingClientRect().top - window.scrollY;\n  });\n    \n})();\n\n\n(function() {\n    \n  if (!phina.global.TouchEvent) return ;\n  \n  \n  /**\n   * @class global.TouchEvent\n   * TouchEvent クラス\n   */\n  \n  /**\n   * @method    pointX\n   * タッチイベント.\n   */\n  TouchEvent.prototype.getter(\"pointX\", function() {\n      return this.touches[0].clientX - this.target.getBoundingClientRect().left;\n      // return this.touches[0].pageX - this.target.getBoundingClientRect().left - tm.global.scrollX;\n  });\n  \n  /**\n   * @method    pointY\n   * タッチイベント.\n   */\n  TouchEvent.prototype.getter(\"pointY\", function() {\n      return this.touches[0].clientY - this.target.getBoundingClientRect().top;\n      // return this.touches[0].pageY - this.target.getBoundingClientRect().top - tm.global.scrollY;\n  });  \n    \n})();\n\n\n(function() {\n    \n  if (!phina.global.Touch) return ;\n  \n  /**\n   * @class global.Touch\n   * TouchEvent クラス\n   */\n  \n  /**\n   * @method    pointX\n   * タッチイベント.\n   */\n  Touch.prototype.getter(\"pointX\", function() {\n      return this.clientX - this.target.getBoundingClientRect().left;\n  });\n\n  /**\n   * @method    pointY\n   * タッチイベント.\n   */\n  Touch.prototype.getter(\"pointY\", function() {\n      return this.clientY - this.target.getBoundingClientRect().top;\n  });\n    \n})();\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.graphics.Canvas\n   * キャンバス拡張クラス\n   */\n  phina.define('phina.graphics.Canvas', {\n    domElement: null,\n    canvas: null,\n    context: null,\n\n    /**\n     * 初期化\n     */\n    init: function(canvas) {\n      if (typeof canvas === 'string') {\n        this.canvas = document.querySelector(canvas);\n      }\n      else {\n        this.canvas = canvas || document.createElement('canvas');\n      }\n\n      this.domElement = this.canvas;\n      this.context = this.canvas.getContext('2d');\n      this.context.lineCap = 'round';\n      this.context.lineJoin = 'round';\n    },\n\n    /**\n     * サイズをセット\n     */\n    setSize: function(width, height) {\n      this.canvas.width   = width;\n      this.canvas.height  = height;\n      return this;\n    },\n\n    setSizeToScreen: function() {\n      this.canvas.style.position  = \"fixed\";\n      this.canvas.style.margin    = \"0px\";\n      this.canvas.style.padding   = \"0px\";\n      this.canvas.style.left      = \"0px\";\n      this.canvas.style.top       = \"0px\";\n      return this.setSize(window.innerWidth, window.innerHeight);\n    },\n\n    fitScreen: function(isEver) {\n      isEver = isEver === undefined ? true : isEver;\n\n      var _fitFunc = function() {\n        var e = this.domElement;\n        var s = e.style;\n        \n        s.position = \"absolute\";\n        s.margin = \"auto\";\n        s.left = \"0px\";\n        s.top  = \"0px\";\n        s.bottom = \"0px\";\n        s.right = \"0px\";\n\n        var rateWidth = e.width/window.innerWidth;\n        var rateHeight= e.height/window.innerHeight;\n        var rate = e.height/e.width;\n        \n        if (rateWidth > rateHeight) {\n          s.width  = Math.floor(innerWidth)+\"px\";\n          s.height = Math.floor(innerWidth*rate)+\"px\";\n        }\n        else {\n          s.width  = Math.floor(innerHeight/rate)+\"px\";\n          s.height = Math.floor(innerHeight)+\"px\";\n        }\n      }.bind(this);\n      \n      // 一度実行しておく\n      _fitFunc();\n\n      // リサイズ時のリスナとして登録しておく\n      if (isEver) {\n        phina.global.addEventListener(\"resize\", _fitFunc, false);\n      }\n    },\n\n    /**\n     * クリア\n     */\n    clear: function(x, y, width, height) {\n      x = x || 0;\n      y = y || 0;\n      width = width || this.width;\n      height= height|| this.height;\n      this.context.clearRect(x, y, width, height);\n      return this;\n    },\n\n    clearColor: function(fillStyle, x, y, width, height) {\n      x = x || 0;\n      y = y || 0;\n      width = width || this.width;\n      height= height|| this.height;\n\n      var context = this.context;\n\n      context.save();\n      context.setTransform(1.0, 0.0, 0.0, 1.0, 0.0, 0.0); // 行列初期化\n      context.fillStyle = fillStyle;     // 塗りつぶしスタイルセット\n      context.fillRect(x, y, width, height);\n      context.restore();\n\n      return this;\n    },\n\n\n    /**\n     * パスを開始(リセット)\n     */\n    beginPath: function() {\n      this.context.beginPath();\n      return this;\n    },\n\n    /**\n     *  パスを閉じる\n     */\n    closePath: function() {\n      this.context.closePath();\n      return this;\n    },\n\n\n    /**\n     *  新規パス生成\n     */\n    moveTo: function(x, y) {\n      this.context.moveTo(x, y);\n      return this;\n    },\n\n    /**\n     * パスに追加\n     */\n    lineTo: function(x, y) {\n      this.context.lineTo(x, y);\n      return this;\n    },\n\n    quadraticCurveTo: function() {\n      this.context.quadraticCurveTo.apply(this.context, arguments);\n      return this;\n    },\n\n    bezierCurveTo: function() {\n      this.context.bezierCurveTo.apply(this.context, arguments);\n      return this;\n    },\n\n    /**\n     * パス内を塗りつぶす\n     */\n    fill: function() {\n      this.context.fill();\n      return this;\n    },\n\n    /**\n     * パス上にラインを引く\n     */\n    stroke: function() {\n      this.context.stroke();\n      return this;\n    },\n\n    /**\n     * クリップ\n     */\n    clip: function() {\n      this.context.clip();\n      return this;\n    },\n\n        \n    /**\n     * 点描画\n     */\n    drawPoint: function(x, y) {\n      return this.strokeRect(x, y, 1, 1);\n    },\n\n    /**\n     * ラインパスを作成\n     */\n    line: function(x0, y0, x1, y1) {\n      return this.moveTo(x0, y0).lineTo(x1, y1);\n    },\n    \n    /**\n     * ラインを描画\n     */\n    drawLine: function(x0, y0, x1, y1) {\n      return this.beginPath().line(x0, y0, x1, y1).stroke();\n    },\n\n    /**\n     * ダッシュラインを描画\n     */\n    drawDashLine: function(x0, y0, x1, y1, pattern) {\n      var patternTable = null;\n      if (typeof(pattern) == \"string\") {\n        patternTable = pattern;\n      }\n      else {\n        pattern = pattern || 0xf0f0;\n        patternTable = pattern.toString(2);\n      }\n      patternTable = patternTable.padding(16, '1');\n      \n      var vx = x1-x0;\n      var vy = y1-y0;\n      var len = Math.sqrt(vx*vx + vy*vy);\n      vx/=len; vy/=len;\n      \n      var x = x0;\n      var y = y0;\n      for (var i=0; i<len; ++i) {\n        if (patternTable[i%16] == '1') {\n          this.drawPoint(x, y);\n          // this.fillRect(x, y, this.context.lineWidth, this.context.lineWidth);\n        }\n        x += vx;\n        y += vy;\n      }\n      \n      return this;\n    },\n\n    /**\n     * v0(x0, y0), v1(x1, y1) から角度を求めて矢印を描画\n     * http://hakuhin.jp/as/rotation.html\n     */\n    drawArrow: function(x0, y0, x1, y1, arrowRadius) {\n      var vx = x1-x0;\n      var vy = y1-y0;\n      var angle = Math.atan2(vy, vx)*180/Math.PI;\n      \n      this.drawLine(x0, y0, x1, y1);\n      this.fillPolygon(x1, y1, arrowRadius || 5, 3, angle);\n      \n      return this;\n    },\n\n\n    /**\n     * lines\n     */\n    lines: function() {\n      this.moveTo(arguments[0], arguments[1]);\n      for (var i=1,len=arguments.length/2; i<len; ++i) {\n        this.lineTo(arguments[i*2], arguments[i*2+1]);\n      }\n      return this;\n    },\n\n    /**\n     * ラインストローク描画\n     */\n    strokeLines: function() {\n      this.beginPath();\n      this.lines.apply(this, arguments);\n      this.stroke();\n      return this;\n    },\n\n    /**\n     * ライン塗りつぶし描画\n     */\n    fillLines: function() {\n      this.beginPath();\n      this.lines.apply(this, arguments);\n      this.fill();\n      return this;\n    },\n    \n    /**\n     * 四角形パスを作成する\n     */\n    rect: function(x, y, width, height) {\n      this.context.rect.apply(this.context, arguments);\n      return this;\n    },\n    \n    /**\n     * 四角形塗りつぶし描画\n     */\n    fillRect: function() {\n      this.context.fillRect.apply(this.context, arguments);\n      return this;\n    },\n    \n    /**\n     * 四角形ライン描画\n     */\n    strokeRect: function() {\n      this.context.strokeRect.apply(this.context, arguments);\n      return this;\n    },\n    \n    /**\n     * 角丸四角形パス\n     */\n    roundRect: function(x, y, width, height, radius) {\n      var l = x + radius;\n      var r = x + width - radius;\n      var t = y + radius;\n      var b = y + height - radius;\n      \n      /*\n      var ctx = this.context;\n      ctx.moveTo(l, y);\n      ctx.lineTo(r, y);\n      ctx.quadraticCurveTo(x+width, y, x+width, t);\n      ctx.lineTo(x+width, b);\n      ctx.quadraticCurveTo(x+width, y+height, r, y+height);\n      ctx.lineTo(l, y+height);\n      ctx.quadraticCurveTo(x, y+height, x, b);\n      ctx.lineTo(x, t);\n      ctx.quadraticCurveTo(x, y, l, y);\n      /**/\n      \n      this.context.arc(l, t, radius,     -Math.PI, -Math.PI*0.5, false);  // 左上\n      this.context.arc(r, t, radius, -Math.PI*0.5,            0, false);  // 右上\n      this.context.arc(r, b, radius,            0,  Math.PI*0.5, false);  // 右下\n      this.context.arc(l, b, radius,  Math.PI*0.5,      Math.PI, false);  // 左下\n      this.closePath();\n      \n      return this;\n    },\n\n    /**\n     * 角丸四角形塗りつぶし\n     */\n    fillRoundRect: function(x, y, width, height, radius) {\n      return this.beginPath().roundRect(x, y, width, height, radius).fill();\n    },\n\n    /**\n     * 角丸四角形ストローク描画\n     */\n    strokeRoundRect: function(x, y, width, height, radius) {\n      return this.beginPath().roundRect(x, y, width, height, radius).stroke();\n    },\n\n    /**\n     * 円のパスを設定\n     */\n    circle: function(x, y, radius) {\n      this.context.arc(x, y, radius, 0, Math.PI*2, false);\n      return this;\n    },\n    \n    /**\n     * 塗りつぶし円を描画\n     */\n    fillCircle: function(x, y, radius) {\n      var c = this.context;\n      c.beginPath();\n      c.arc(x, y, radius, 0, Math.PI*2, false);\n      c.closePath();\n      c.fill();\n      return this;\n    },\n    \n    /**\n     * ストローク円を描画\n     */\n    strokeCircle: function(x, y, radius) {\n      var c = this.context;\n      c.beginPath();\n      c.arc(x, y, radius, 0, Math.PI*2, false);\n      c.closePath();\n      c.stroke();\n      return this;\n    },\n\n    /**\n     * 円弧のパスを設定\n     */\n    arc: function(x, y, radius, startAngle, endAngle, anticlockwise) {\n      this.context.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n      return this;\n    },\n    \n    /**\n     * 塗りつぶし円弧を描画\n     */\n    fillArc: function(x, y, radius, startAngle, endAngle, anticlockwise) {\n      return this.beginPath().arc(x, y, radius, startAngle, endAngle, anticlockwise).fill();\n    },\n    \n    /**\n     * ストローク円弧を描画\n     */\n    strokeArc: function(x, y, radius, startAngle, endAngle, anticlockwise) {\n      return this.beginPath().arc(x, y, radius, startAngle, endAngle, anticlockwise).stroke();\n    },\n\n\n    pie: function(x, y, radius, startAngle, endAngle, anticlockwise) {\n      var context = this.context;\n      context.beginPath();\n      context.moveTo(0, 0);\n      context.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n      context.closePath();\n      return this;\n    },\n    fillPie: function(x, y, radius, startAngle, endAngle, anticlockwise) {\n      return this.beginPath().pie(x, y, radius, startAngle, endAngle, anticlockwise).fill();\n    },\n    strokePie: function(x, y, radius, startAngle, endAngle, anticlockwise) {\n      return this.beginPath().pie(x, y, radius, startAngle, endAngle, anticlockwise).stroke();\n    },\n\n    \n    /**\n     * ポリゴンパス\n     */\n    polygon: function(x, y, size, sides, offsetAngle) {\n      var radDiv = (Math.PI*2)/sides;\n      var radOffset = (offsetAngle!==undefined) ? offsetAngle*Math.PI/180 : -Math.PI/2;\n      \n      this.moveTo(x + Math.cos(radOffset)*size, y + Math.sin(radOffset)*size);\n      for (var i=1; i<sides; ++i) {\n        var rad = radDiv*i+radOffset;\n        this.lineTo(\n          x + Math.cos(rad)*size,\n          y + Math.sin(rad)*size\n        );\n      }\n      this.closePath();\n      return this;\n    },\n    /**\n     * ポリゴン塗りつぶし\n     */\n    fillPolygon: function(x, y, radius, sides, offsetAngle) {\n      return this.beginPath().polygon(x, y, radius, sides, offsetAngle).fill();\n    },\n    /**\n     * ポリゴンストローク描画\n     */\n    strokePolygon: function(x, y, radius, sides, offsetAngle) {\n      return this.beginPath().polygon(x, y, radius, sides, offsetAngle).stroke();\n    },\n    \n    /**\n     * star\n     */\n    star: function(x, y, radius, sides, sideIndent, offsetAngle) {\n      var x = x || 0;\n      var y = y || 0;\n      var radius = radius || 64;\n      var sides = sides || 5;\n      var sideIndentRadius = radius * (sideIndent || 0.38);\n      var radOffset = (offsetAngle) ? offsetAngle*Math.PI/180 : -Math.PI/2;\n      var radDiv = (Math.PI*2)/sides/2;\n\n      this.moveTo(\n        x + Math.cos(radOffset)*radius,\n        y + Math.sin(radOffset)*radius\n      );\n      for (var i=1; i<sides*2; ++i) {\n        var rad = radDiv*i + radOffset;\n        var len = (i%2) ? sideIndentRadius : radius;\n        this.lineTo(\n          x + Math.cos(rad)*len,\n          y + Math.sin(rad)*len\n        );\n      }\n      this.closePath();\n\n      return this;\n    },\n\n    /**\n     * 星を塗りつぶし描画\n     */\n    fillStar: function(x, y, radius, sides, sideIndent, offsetAngle) {\n      this.beginPath().star(x, y, radius, sides, sideIndent, offsetAngle).fill();\n      return this;\n    },\n\n    /**\n     * 星をストローク描画\n     */\n    strokeStar: function(x, y, radius, sides, sideIndent, offsetAngle) {\n      this.beginPath().star(x, y, radius, sides, sideIndent, offsetAngle).stroke();\n      return this;\n    },\n\n    /*\n     * heart\n     */\n    heart: function(x, y, radius, angle) {\n      var half_radius = radius*0.5;\n      var rad = (angle === undefined) ? Math.PI/4 : Math.degToRad(angle);\n\n      // 半径 half_radius の角度 angle 上の点との接線を求める\n      var p = Math.cos(rad)*half_radius;\n      var q = Math.sin(rad)*half_radius;\n\n      // 円の接線の方程式 px + qy = r^2 より y = (r^2-px)/q\n      var x2 = -half_radius;\n      var y2 = (half_radius*half_radius-p*x2)/q;\n\n      // 中心位置調整\n      var height = y2 + half_radius;\n      var offsetY = half_radius-height/2;\n\n      // パスをセット\n      this.moveTo(0+x, y2+y+offsetY);\n\n      this.arc(-half_radius+x, 0+y+offsetY, half_radius, Math.PI-rad, Math.PI*2);\n      this.arc(half_radius+x, 0+y+offsetY, half_radius, Math.PI, rad);\n      this.closePath();\n\n      return this;\n    },\n\n    /*\n     * fill heart\n     */\n    fillHeart: function(x, y, radius, angle) {\n      return this.beginPath().heart(x, y, radius, angle).fill();\n    },\n\n    /*\n     * stroke heart\n     */\n    strokeHeart: function(x, y, radius, angle) {\n      return this.beginPath().heart(x, y, radius, angle).stroke();\n    },\n\n    /*\n     * http://stackoverflow.com/questions/14169234/the-relation-of-the-bezier-curve-and-ellipse\n     */\n    ellipse: function(x, y, w, h) {\n      var ctx = this.context;\n      var kappa = 0.5522848;\n\n      var ox = (w / 2) * kappa; // control point offset horizontal\n      var oy = (h / 2) * kappa; // control point offset vertical\n      var xe = x + w;           // x-end\n      var ye = y + h;           // y-end\n      var xm = x + w / 2;       // x-middle\n      var ym = y + h / 2;       // y-middle\n\n      ctx.moveTo(x, ym);\n      ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n      ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n      ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n      ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n      // ctx.closePath();\n\n      return this;\n    },\n\n    fillEllipse: function(x, y, width, height) {\n      return this.beginPath().ellipse(x, y, width, height).fill();\n    },\n    strokeEllipse: function(x, y, width, height) {\n      return this.beginPath().ellipse(x, y, width, height).stroke();\n    },\n\n    fillText: function() {\n      this._context.fillText.apply(this._context, arguments);\n      return this;\n    },\n\n    strokeText: function() {\n      this._context.strokeText.apply(this._context, arguments);\n      return this;\n    },\n\n    /*\n     * 画像を描画\n     */\n    drawImage: function() {\n      this.context.drawImage.apply(this.context, arguments);\n    },\n\n    /**\n     * 行列をセット\n     */\n    setTransform: function(m11, m12, m21, m22, dx, dy) {\n      this.context.setTransform(m11, m12, m21, m22, dx, dy);\n      return this;\n    },\n\n    /**\n     * 行列をリセット\n     */\n    resetTransform: function() {\n      this.setTransform(1.0, 0.0, 0.0, 1.0, 0.0, 0.0);\n      return this;\n    },\n    /**\n     * 中心に移動\n     */\n    transformCenter: function() {\n      this.context.setTransform(1, 0, 0, 1, this.width/2, this.height/2);\n      return this;\n    },\n\n    /**\n     * 移動\n     */\n    translate: function(x, y) {\n      this.context.translate(x, y);\n      return this;\n    },\n    \n    /**\n     * 回転\n     */\n    rotate: function(rotation) {\n      this.context.rotate(rotation);\n      return this;\n    },\n    \n    /**\n     * スケール\n     */\n    scale: function(scaleX, scaleY) {\n      this.context.scale(scaleX, scaleY);\n      return this;\n    },\n\n    /**\n     * 状態を保存\n     */\n    save: function() {\n      this.context.save();\n      return this;\n    },\n\n    /**\n     * 状態を復元\n     */\n    restore: function() {\n      this.context.restore();\n      return this;\n    },\n\n    /**\n     * 画像として保存\n     */\n    saveAsImage: function(mime_type) {\n      mime_type = mime_type || \"image/png\";\n      var data_url = this.canvas.toDataURL(mime_type);\n      // data_url = data_url.replace(mime_type, \"image/octet-stream\");\n      window.open(data_url, \"save\");\n      \n      // toDataURL を使えば下記のようなツールが作れるかも!!\n      // TODO: プログラムで絵をかいて保存できるツール\n    },\n\n\n    _accessor: {\n      /**\n       * 幅\n       */\n      width: {\n        \"get\": function()   { return this.canvas.width; },\n        \"set\": function(v)  { this.canvas.width = v; }\n      },\n\n      /**\n       * 高さ\n       */\n      height: {\n        \"get\": function()   { return this.canvas.height; },\n        \"set\": function(v)  { this.canvas.height = v; }\n      },\n\n      fillStyle: {\n        \"get\": function()   { return this.context.fillStyle; },\n        \"set\": function(v)  { this.context.fillStyle = v; }\n      },\n\n      strokeStyle: {\n        \"get\": function()   { return this.context.strokeStyle; },\n        \"set\": function(v)  { this.context.strokeStyle = v; }\n      },\n\n      globalAlpha: {\n        \"get\": function()   { return this.context.globalAlpha; },\n        \"set\": function(v)  { this.context.globalAlpha = v; }\n      },\n\n      globalCompositeOperation: {\n        \"get\": function()   { return this.context.globalCompositeOperation; },\n        \"set\": function(v)  { this.context.globalCompositeOperation = v; }\n      },\n\n      shadowBlur: {\n        \"get\": function()   { return this.context.shadowBlur; },\n        \"set\": function(v)  { this.context.shadowBlur = v; }\n      },\n\n      shadowColor: {\n        \"get\": function()   { return this.context.shadowColor; },\n        \"set\": function(v)  { this.context.shadowColor = v; }\n      },\n\n      shadowOffsetX: {\n        \"get\": function()   { return this.context.shadowOffsetX; },\n        \"set\": function(v)  { this.context.shadowOffsetX = v; }\n      },\n\n      shadowOffsetY: {\n        \"get\": function()   { return this.context.shadowOffsetY; },\n        \"set\": function(v)  { this.context.shadowOffsetY = v; }\n      },\n\n      lineCap: {\n        \"get\": function()   { return this.context.lineCap; },\n        \"set\": function(v)  { this.context.lineCap = v; }\n      },\n\n      lineJoin: {\n        \"get\": function()   { return this.context.lineJoin; },\n        \"set\": function(v)  { this.context.lineJoin = v; }\n      },\n\n      miterLimit: {\n        \"get\": function()   { return this.context.miterLimit; },\n        \"set\": function(v)  { this.context.miterLimit = v; }\n      },\n\n      lineWidth: {\n        \"get\": function()   { return this.context.lineWidth; },\n        \"set\": function(v)  { this.context.lineWidth = v; }\n      },\n\n      font: {\n        \"get\": function()   { return this.context.font; },\n        \"set\": function(v)  { this.context.font = v; }\n      },\n\n      textAlign: {\n        \"get\": function()   { return this.context.textAlign; },\n        \"set\": function(v)  { this.context.textAlign = v; }\n      },\n\n      textBaseline: {\n        \"get\": function()   { return this.context.textBaseline; },\n        \"set\": function(v)  { this.context.textBaseline = v; }\n      },\n\n      imageSmoothingEnabled: {\n        \"get\": function()   { return this.context.imageSmoothingEnabled; },\n        \"set\": function(v)  {\n          this.context.imageSmoothingEnabled = v;\n          this.context.webkitImageSmoothingEnabled = v;\n          this.context.mozImageSmoothingEnabled = v;\n        }\n      },\n    },\n\n    _static: {\n      _context: (function() {\n        if (phina.util.Support.canvas) {\n          return document.createElement('canvas').getContext('2d');\n        }\n        else {\n          return null;\n        }\n      })(),\n\n      measureText: function(font, text) {\n        this._context.font = font;\n        return this._context.measureText(text);\n      },\n\n      createLinearGradient: function() {\n        return this._context.createLinearGradient.apply(this._context, arguments);\n      },\n\n      createRadialGradient: function() {\n        return this._context.createRadialGradient.apply(this._context, arguments);\n      },\n    },\n  });\n});\n\n/*\n *\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.graphics.CanvasRecorder\n   * Reference <https://github.com/jnordberg/gif.js/>\n   */\n  phina.define('phina.graphics.CanvasRecorder', {\n\n    superClass: 'phina.util.EventDispatcher',\n\n    _id: null,\n    objectURL: null,\n\n    init: function(canvas, options) {\n      this.superInit();\n\n      this.canvas = canvas;\n\n      this.gif = new GIF((options || {}).$safe({\n        workers: 4,\n        quality: 10,\n        width: canvas.width,\n        height: canvas.height,\n      }));\n\n      this.gif.on('finished', function(blob) {\n        this.objectURL = URL.createObjectURL(blob);\n        this.flare('finished');\n      }.bind(this));\n    },\n\n    /**\n     * key と value はアクセサを参照\n     */\n    setOption: function(key, value) {\n      this.gif.setOption(key, value);\n      return this;\n    },\n\n    /**\n     * key と value はアクセサを参照\n     */\n    setOptions: function(options) {\n      this.gif.setOptions(options);\n      return this;\n    },\n\n    start: function(fps, recordingTime) {\n      fps = fps || 30;\n      recordingTime = recordingTime || 2000;\n      var frameTime = 1000 / fps;\n      var time = 0;\n      this._id = setInterval(function() {\n        var ctx = this.canvas.context;\n        this.gif.addFrame(ctx, {\n          copy: true,\n          delay: frameTime,\n        });\n\n        time += frameTime;\n\n        if (time > recordingTime) {\n          this.stop();\n        }\n      }.bind(this), frameTime);\n\n      return this;\n    },\n\n    stop: function() {\n      if (this._id === null) return this;\n      clearInterval(this._id);\n\n      // レンダリング\n      this.gif.render();\n      this._id = null;\n      return this;\n    },\n\n    open: function() {\n      window.open(this.objectURL);\n    },\n\n    _accessor: {\n\n      width: {\n        get: function() {\n          return this.gif.options.width || this.canvas.width;\n        },\n        set: function(width) {\n          this.setOption('width', width);\n        },\n      },\n\n      height: {\n        get: function() {\n          return this.gif.options.height || this.canvas.height;\n        },\n        set: function(height) {\n          this.setOption('height', height);\n        },\n      },\n\n      // GIF のクオリティ。低いほどハイクオリティ\n      quality: {\n        get: function() {\n          return this.gif.options.quality;\n        },\n        set: function(quality) {\n          this.setOption('quality', quality);\n        },\n      },\n\n      // Worker の URL デフォルトで gif.worker.js\n      workerScript: {\n        get: function() {\n          return this.gif.options.workerScript;\n        },\n        set: function(workerScript) {\n          this.setOption('workerScript', workerScript);\n        },\n      },\n\n      // 起動する Worker の数\n      workers: {\n        get: function() {\n          return this.gif.options.workers;\n        },\n        set: function(workers) {\n          this.setOption('workers', workers);\n        },\n      },\n\n      // ループするか 0 でループ -1 でループしない\n      repeat: {\n        get: function() {\n          return this.gif.options.repeat;\n        },\n        set: function(repeat) {\n          this.setOption('repeat', repeat);\n        },\n      },\n\n      // true で ループ false でループしない\n      loop: {\n        get: function() {\n          return this.gif.options.repeat === 0;\n        },\n        set: function(loop) {\n          this.setOption('repeat', loop ? 0 : -1);\n        },\n      },\n\n      // 透過する色 ? transparent hex color, 0x00FF00 = green\n      transparent: {\n        get: function() {\n          return this.gif.options.transparent;\n        },\n        set: function(transparent) {\n          this.setOption('transparent', transparent);\n        },\n      },\n\n      // background color where source image is transparent\n      background: {\n        get: function() {\n          return this.gif.options.background;\n        },\n        set: function(background) {\n          this.setOption('background', background);\n        },\n      },\n    }\n  });\n\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.DisplayElement\n   * \n   */\n  phina.define('phina.display.DisplayElement', {\n    superClass: 'phina.app.Object2D',\n\n    /** 表示フラグ */\n    visible: true,\n    /** アルファ */\n    alpha: 1.0,\n    /** ブレンドモード */\n    blendMode: \"source-over\",\n\n    /** 子供を 自分のCanvasRenderer で描画するか */\n    renderChildBySelf: false,\n\n    init: function(options) {\n      options = (options || {});\n      \n      this.superInit(options);\n\n      this.visible = true;\n      this.alpha = 1.0;\n      this._worldAlpha = 1.0;\n    },\n\n    /**\n     * 表示/非表示をセット\n     */\n    setVisible: function(flag) {\n      this.visible = flag;\n      return this;\n    },\n\n    /**\n     * 表示\n     */\n    show: function() {\n      this.visible = true;\n      return this;\n    },\n\n    /**\n     * 非表示\n     */\n    hide: function() {\n      this.visible = false;\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _calcWorldAlpha: function() {\n      if (!this.parent) {\n        this._worldAlpha = this.alpha;\n        return ;\n      }\n      else {\n        var worldAlpha = (this.parent._worldAlpha !== undefined) ? this.parent._worldAlpha : 1.0; \n        // alpha\n        this._worldAlpha = worldAlpha * this.alpha;\n      }\n    },\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.PlainElement\n   *\n   */\n  phina.define('phina.display.PlainElement', {\n    superClass: 'phina.display.DisplayElement',\n\n    init: function(options) {\n      this.superInit(options);\n      this.canvas = phina.graphics.Canvas();\n      this.canvas.setSize(this.width, this.height);\n    },\n\n    draw: function(canvas) {\n      var image = this.canvas.domElement;\n      var w = image.width;\n      var h = image.height;\n\n      var x = -w*this.origin.x;\n      var y = -h*this.origin.y;\n\n      canvas.context.drawImage(image,\n        0, 0, w, h,\n        x, y, w, h\n        );\n    },\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.Shape\n   *\n   */\n  var Shape = phina.define('phina.display.Shape', {\n    superClass: 'phina.display.PlainElement',\n\n    init: function(options) {\n      options = ({}).$safe(options, {\n        width: 64,\n        height: 64,\n        padding: 8,\n\n        backgroundColor: '#aaa',\n        fill: '#00a',\n        stroke: '#aaa',\n        strokeWidth: 4,\n\n        shadow: false,\n        shadowBlur: 4,\n      });\n      this.superInit(options);\n\n      this.padding = options.padding;\n\n      this.backgroundColor = options.backgroundColor;\n      this.fill = options.fill;\n      this.stroke = options.stroke;\n      this.strokeWidth = options.strokeWidth;\n\n      this.shadow = options.shadow;\n      this.shadowBlur = options.shadowBlur;\n\n      this.watchDraw = true;\n      this._dirtyDraw = true;\n\n      this.on('enterframe', function() {\n        // render\n        if (this.watchDraw && this._dirtyDraw === true) {\n          this.render(this.canvas);\n          this._dirtyDraw = false;\n        }\n      });\n    },\n\n    calcCanvasWidth: function() {\n      return this.width + this.padding*2;\n    },\n\n    calcCanvasHeight: function() {\n      return this.height + this.padding*2;\n    },\n\n    calcCanvasSize: function () {\n      return {\n        width: this.calcCanvasWidth(),\n        height: this.calcCanvasHeight(),\n      };\n    },\n\n    isStrokable: function() {\n      return this.stroke && 0 < this.strokeWidth;\n    },\n\n    prerender: function(canvas) {\n\n    },\n    postrender: function(canvas) {\n\n    },\n    renderFill: function(canvas) {\n      canvas.fill();\n    },\n    renderStroke: function(canvas) {\n      canvas.stroke();\n    },\n\n    render: function(canvas) {\n      var context = canvas.context;\n      // リサイズ\n      var size = this.calcCanvasSize();\n      canvas.setSize(size.width, size.height);\n      // クリアカラー\n      canvas.clearColor(this.backgroundColor);\n      // 中心に座標を移動\n      canvas.transformCenter();\n\n      // 描画前処理\n      this.prerender(this.canvas);\n\n      // ストローク描画\n      if (this.isStrokable()) {\n        context.strokeStyle = this.stroke;\n        context.lineWidth = this.strokeWidth;\n        context.lineJoin = \"round\";\n        context.shadowBlur = 0;\n        this.renderStroke(canvas);\n      }\n\n      // 塗りつぶし描画\n      if (this.fill) {\n        context.fillStyle = this.fill;\n\n        // shadow の on/off\n        if (this.shadow) {\n          context.shadowColor = this.shadow;\n          context.shadowBlur = this.shadowBlur;\n        }\n        else {\n          context.shadowBlur = 0;\n        }\n\n        this.renderFill(canvas);\n      }\n\n      // 描画後処理\n      this.postrender(this.canvas);\n\n      return this;\n    },\n\n    _static: {\n      watchRenderProperty: function(key) {\n        this.prototype.$watch(key, function(newVal, oldVal) {\n          if (newVal !== oldVal) {\n            this._dirtyDraw = true;\n          }\n        });\n      },\n      watchRenderProperties: function(keys) {\n        var watchRenderProperty = this.watchRenderProperty || Shape.watchRenderProperty;\n        keys.each(function(key) {\n          watchRenderProperty.call(this, key);\n        }, this);\n      },\n    },\n\n    _defined: function() {\n      this.watchRenderProperties([\n        'width',\n        'height',\n        'radius',\n        'padding',\n        'backgroundColor',\n        'fill',\n        'stroke',\n        'strokeWidth',\n        'shadow',\n        'shadowBlur',\n      ]);\n    },\n  });\n\n});\n\nphina.namespace(function() {\n  /**\n   * @class phina.display.RectangleShape\n   *\n   */\n  phina.define('phina.display.RectangleShape', {\n    superClass: 'phina.display.Shape',\n    init: function(options) {\n      options = ({}).$safe(options, {\n        backgroundColor: 'transparent',\n        fill: 'blue',\n        stroke: '#aaa',\n        strokeWidth: 4,\n\n        cornerRadius: 0,\n      });\n      this.superInit(options);\n\n      this.cornerRadius = options.cornerRadius;\n    },\n\n    prerender: function(canvas) {\n      canvas.roundRect(-this.width/2, -this.height/2, this.width, this.height, this.cornerRadius);\n    },\n\n    _defined: function() {\n      phina.display.Shape.watchRenderProperty.call(this, 'cornerRadius');\n    },\n  });\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.CircleShape\n   *\n   */\n  phina.define('phina.display.CircleShape', {\n    superClass: 'phina.display.Shape',\n\n    init: function(options) {\n      options = ({}).$safe(options, {\n        backgroundColor: 'transparent',\n        fill: 'red',\n        stroke: '#aaa',\n        strokeWidth: 4,\n        radius: 32,\n      });\n      this.superInit(options);\n\n      this.setBoundingType('circle');\n    },\n\n    prerender: function(canvas) {\n      canvas.circle(0, 0, this.radius);\n    },\n  });\n});\n\nphina.namespace(function() {\n  /**\n   * @class phina.display.TriangleShape\n   *\n   */\n  phina.define('phina.display.TriangleShape', {\n    superClass: 'phina.display.Shape',\n\n    init: function(options) {\n      options = ({}).$safe(options, {\n        backgroundColor: 'transparent',\n        fill: 'green',\n        stroke: '#aaa',\n        strokeWidth: 4,\n\n        radius: 32,\n      });\n      this.superInit(options);\n\n      this.setBoundingType('circle');\n    },\n\n    prerender: function(canvas) {\n      canvas.polygon(0, 0, this.radius, 3);\n    },\n\n  });\n\n});\n\nphina.namespace(function() {\n  /**\n   * @class phina.display.StarShape\n   *\n   */\n  phina.define('phina.display.StarShape', {\n    superClass: 'phina.display.Shape',\n    init: function(options) {\n      options = ({}).$safe(options, {\n        backgroundColor: 'transparent',\n        fill: 'yellow',\n        stroke: '#aaa',\n        strokeWidth: 4,\n\n        radius: 32,\n        sides: 5,\n        sideIndent: 0.38,\n      });\n      this.superInit(options);\n\n      this.setBoundingType('circle');\n      this.sides = options.sides;\n      this.sideIndent = options.sideIndent;\n    },\n\n    prerender: function(canvas) {\n      canvas.star(0, 0, this.radius, this.sides, this.sideIndent);\n    },\n\n    _defined: function() {\n      phina.display.Shape.watchRenderProperty.call(this, 'sides');\n      phina.display.Shape.watchRenderProperty.call(this, 'sideIndent');\n    },\n  });\n\n});\n\nphina.namespace(function() {\n  /**\n   * @class phina.display.PolygonShape\n   *\n   */\n  phina.define('phina.display.PolygonShape', {\n    superClass: 'phina.display.Shape',\n    init: function(options) {\n      options = ({}).$safe(options, {\n        backgroundColor: 'transparent',\n        fill: 'cyan',\n        stroke: '#aaa',\n        strokeWidth: 4,\n\n        radius: 32,\n        sides: 5,\n      });\n      this.superInit(options);\n\n      this.setBoundingType('circle');\n      this.sides = options.sides;\n    },\n\n    prerender: function(canvas) {\n      canvas.polygon(0, 0, this.radius, this.sides);\n    },\n\n    _defined: function() {\n      phina.display.Shape.watchRenderProperty.call(this, 'sides');\n    },\n  });\n\n});\n\n\nphina.namespace(function() {\n  /**\n   * @class phina.display.HeartShape\n   *\n   */\n  phina.define('phina.display.HeartShape', {\n    superClass: 'phina.display.Shape',\n    init: function(options) {\n      options = ({}).$safe(options, {\n        backgroundColor: 'transparent',\n        fill: 'pink',\n        stroke: '#aaa',\n        strokeWidth: 4,\n\n        radius: 32,\n        cornerAngle: 45,\n      });\n      this.superInit(options);\n\n      this.setBoundingType('circle');\n      this.cornerAngle = options.cornerAngle;\n    },\n\n    prerender: function(canvas) {\n      canvas.heart(0, 0, this.radius, this.cornerAngle);\n    },\n\n    _defined: function() {\n      phina.display.Shape.watchRenderProperty.call(this, 'cornerAngle');\n    },\n  });\n\n});\n\nphina.namespace(function () {\n\n  var PathShape = phina.define('phina.display.PathShape', {\n    superClass: 'phina.display.Shape',\n    paths: null,\n\n    init: function (options) {\n      options = ({}).$safe(options || {}, PathShape.defaults);\n\n      this.superInit(options);\n      this.paths = options.paths || [];\n      this.lineJoin = options.lineJoin;\n      this.lineCap = options.lineCap;\n    },\n    \n    setPaths: function (paths) {\n      this.paths = paths;\n      this._dirtyDraw = true;\n      return this;\n    },\n\n    clear: function () {\n      this.paths.length = 0;\n      this._dirtyDraw = true;\n      return this;\n    },\n\n    addPaths: function (paths) {\n      [].push.apply(this.paths, paths);\n      this._dirtyDraw = true;\n      return this;\n    },\n\n    addPath: function (x, y) {\n      this.paths.push(phina.geom.Vector2(x, y));\n      this._dirtyDraw = true;\n      return this;\n    },\n\n    getPath: function (i) {\n      return this.paths[i];\n    },\n\n    getPaths: function () {\n      return this.paths;\n    },\n\n    changePath: function (i, x, y) {\n      this.paths[i].set(x, y);\n      this._dirtyDraw = true;\n      return this;\n    },\n\n    calcCanvasSize: function () {\n      var paths = this.paths;\n      if (paths.length === 0) {\n        return {\n          width: this.padding * 2,\n          height:this.padding * 2,\n        };\n      }\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n      var minX = Infinity;\n      var minY = Infinity;\n\n      for (var i = 0, len = paths.length; i < len; ++i) {\n        var path = paths[i];\n        if (maxX < path.x) { maxX = path.x; }\n        if (minX > path.x) { minX = path.x; }\n        if (maxY < path.y) { maxY = path.y; }\n        if (minY > path.y) { minY = path.y; }\n      }\n      return {\n        width: Math.max(Math.abs(maxX), Math.abs(minX)) * 2 + this.padding * 2,\n        height: Math.max(Math.abs(maxY), Math.abs(minY)) * 2 + this.padding * 2,\n      };\n    },\n\n    calcCanvasWidth: function () {\n      return this.calcCanvasSize().width;\n    },\n\n    calcCanvasHeight: function () {\n      return this.calcCanvasSize().height;\n    },\n\n    prerender: function (canvas) {\n      canvas.lineCap = this.lineCap;\n      canvas.lineJoin = this.lineJoin;\n      var paths = this.paths;\n      if (paths.length > 1) {\n        var c = canvas.context;\n        var p = paths[0];\n        c.beginPath();\n        c.moveTo(p.x, p.y);\n        for (var i = 1, len = paths.length; i < len; ++i) {\n          p = paths[i];\n          c.lineTo(p.x, p.y);\n        }\n      }\n    },\n\n    _defined: function () {\n      phina.display.Shape.watchRenderProperties.call(this, [\n        'lineCap',\n        'lineJoin'\n      ]);\n    },\n\n    _static: {\n      defaults: {\n        fill: false,\n        backgroundColor: 'transparent',\n        lineCap: 'round',\n        lineJoin:'round',\n      },\n    }\n\n  });\n\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.Sprite\n   * \n   */\n  phina.define('phina.display.Sprite', {\n    superClass: 'phina.display.DisplayElement',\n\n    init: function(image, width, height) {\n      this.superInit();\n\n      this.srcRect = phina.geom.Rect();\n      this.setImage(image, width, height);\n    },\n\n    draw: function(canvas) {\n      var image = this.image.domElement;\n\n      // canvas.context.drawImage(image,\n      //   0, 0, image.width, image.height,\n      //   -this.width*this.origin.x, -this.height*this.origin.y, this.width, this.height\n      //   );\n\n      var srcRect = this.srcRect;\n      canvas.context.drawImage(image,\n        srcRect.x, srcRect.y, srcRect.width, srcRect.height,\n        -this._width*this.originX, -this._height*this.originY, this._width, this._height\n        );\n    },\n\n    setImage: function(image, width, height) {\n      if (typeof image === 'string') {\n        image = phina.asset.AssetManager.get('image', image);\n      }\n      this._image = image;\n      this.width = this._image.domElement.width;\n      this.height = this._image.domElement.height;\n\n      if (width) { this.width = width; }\n      if (height) { this.height = height; }\n\n      this.frameIndex = 0;\n\n      return this;\n    },\n\n    setFrameIndex: function(index, width, height) {\n      var tw  = width || this._width;      // tw\n      var th  = height || this._height;    // th\n      var row = ~~(this.image.domElement.width / tw);\n      var col = ~~(this.image.domElement.height / th);\n      var maxIndex = row*col;\n      index = index%maxIndex;\n      \n      var x = index%row;\n      var y = ~~(index/row);\n      this.srcRect.x = x*tw;\n      this.srcRect.y = y*th;\n      this.srcRect.width  = tw;\n      this.srcRect.height = th;\n\n      this._frameIndex = index;\n\n      return this;\n    },\n\n    _accessor: {\n      image: {\n        get: function() {return this._image;},\n        set: function(v) {\n          this.setImage(v);\n          return this;\n        }\n      },\n      frameIndex: {\n        get: function() {return this._frameIndex;},\n        set: function(idx) {\n          this.setFrameIndex(idx);\n          return this;\n        }\n      },\n    },\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.Label\n   * \n   */\n  phina.define('phina.display.Label', {\n    superClass: 'phina.display.Shape',\n\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      if (typeof arguments[0] !== 'object') {\n        options = { text: arguments[0], };\n        if (arguments[1] === 'object') {\n            options.$safe(arguments[1]);\n        }\n      }\n      else {\n        options = arguments[0];\n      }\n\n      options = ({}).$safe(options, phina.display.Label.defaults);\n\n      this.superInit(options);\n\n      this.text = options.text;\n      this.fontSize = options.fontSize;\n      this.fontWeight = options.fontWeight;\n      this.fontFamily = options.fontFamily;\n      this.align = options.align;\n      this.baseline = options.baseline;\n      this.lineHeight = options.lineHeight;\n    },\n\n    calcCanvasWidth: function() {\n      var width = 0;\n      var canvas = this.canvas;\n      canvas.context.font = this.font;\n      this._lines.forEach(function(line) {\n        var w = canvas.context.measureText(line).width;\n        if (width < w) {\n          width = w;\n        }\n      }, this);\n      if (this.align !== 'center') width*=2;\n\n      return width + this.padding*2;\n    },\n\n    calcCanvasHeight: function() {\n      var height = this.fontSize * this._lines.length;\n      if (this.baseline !== 'middle') height*=2;\n      return height*this.lineHeight + this.padding*2;\n    },\n\n    prerender: function(canvas) {\n      var context = canvas.context;\n      context.font = this.font;\n      context.textAlign = this.align;\n      context.textBaseline = this.baseline;\n\n      var lines = this._lines;\n      this.lineSize = this.fontSize*this.lineHeight;\n      this._offset = -Math.floor(lines.length/2)*this.lineSize;\n      this._offset += ((lines.length+1)%2) * (this.lineSize/2);\n    },\n\n    renderFill: function(canvas) {\n      var context = canvas.context;\n      this._lines.forEach(function(line, i) {\n        context.fillText(line, 0, i*this.lineSize+this._offset);\n      }, this);\n    },\n\n    renderStroke: function(canvas) {\n      var context = canvas.context;\n      this._lines.forEach(function(line, i) {\n        context.strokeText(line, 0, i*this.lineSize+this._offset);\n      }, this);\n    },\n\n    _accessor: {\n      /**\n       * text\n       */\n      text: {\n        get: function() { return this._text; },\n        set: function(v) {\n          this._text = v;\n          this._lines = (this.text + '').split('\\n');\n        },\n      },\n\n      font: {\n        get: function() {\n          return \"{fontWeight} {fontSize}px {fontFamily}\".format(this);\n        },\n      }\n    },\n\n    _static: {\n      defaults: {\n        backgroundColor: 'transparent',\n\n        fill: 'black',\n        stroke: null,\n        strokeWidth: 2,\n\n        // \n        text: 'Hello, world!',\n        // \n        fontSize: 32,\n        fontWeight: '',\n        fontFamily: \"'HiraKakuProN-W3'\", // Hiragino or Helvetica,\n        // \n        align: 'center',\n        baseline: 'middle',\n        lineHeight: 1.2,\n      },\n    },\n\n    _defined: function() {\n      var Shape = phina.display.Shape;\n      Shape.watchRenderProperty.call(this, 'text');\n      Shape.watchRenderProperty.call(this, 'fontSize');\n      Shape.watchRenderProperty.call(this, 'fontWeight');\n      Shape.watchRenderProperty.call(this, 'fontFamily');\n      Shape.watchRenderProperty.call(this, 'align');\n      Shape.watchRenderProperty.call(this, 'baseline');\n      Shape.watchRenderProperty.call(this, 'lineHeight');\n    },\n  });\n\n});\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class\n   */\n  phina.define('phina.display.DisplayScene', {\n    superClass: 'phina.app.Scene',\n\n    init: function(params) {\n      this.superInit();\n\n      params = ({}).$safe(params, phina.display.DisplayScene.defaults);\n\n      this.canvas = phina.graphics.Canvas();\n      this.canvas.setSize(params.width, params.height);\n      this.renderer = phina.display.CanvasRenderer(this.canvas);\n      this.backgroundColor = (params.backgroundColor) ? params.backgroundColor : null;\n      \n      this.width = params.width;\n      this.height = params.height;\n      this.gridX = phina.util.Grid(params.width, 16);\n      this.gridY = phina.util.Grid(params.height, 16);\n\n      // TODO: 一旦むりやり対応\n      this.interactive = true;\n      this.setInteractive = function(flag) {\n        this.interactive = flag;\n      };\n      this._overFlags = {};\n      this._touchFlags = {};\n    },\n\n    hitTest: function() {\n      return true;\n    },\n\n    _update: function() {\n      if (this.update) {\n        this.update();\n      }\n    },\n\n    _render: function() {\n      this.renderer.render(this);\n    },\n\n    _static: {\n      defaults: {\n        width: 640,\n        height: 960,\n      },\n    }\n\n  });\n\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.Layer\n   */\n  phina.define('phina.display.Layer', {\n    superClass: 'phina.display.DisplayElement',\n\n    /** 子供を 自分の CanvasRenderer で描画するか */\n    renderChildBySelf: true,\n\n    init: function(options) {\n      options = ({}).$safe(options, {\n        width: 640,\n        height: 960,\n      });\n      this.superInit(options);\n      this.width = options.width;\n      this.height = options.height;\n      this.gridX = phina.util.Grid(options.width, 16);\n      this.gridY = phina.util.Grid(options.height, 16);\n    },\n\n    draw: function(canvas) {\n      if (!this.domElement) return ;\n\n      var image = this.domElement;\n      canvas.context.drawImage(image,\n        0, 0, image.width, image.height,\n        -this.width*this.originX, -this.height*this.originY, this.width, this.height\n        );\n    },\n  });\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.Layer\n   */\n  phina.define('phina.display.CanvasLayer', {\n    superClass: 'phina.display.Layer',\n\n    init: function(options) {\n      this.superInit(options);\n      this.canvas = phina.graphics.Canvas();\n      this.canvas.width  = this.width;\n      this.canvas.height = this.height;\n\n      this.renderer = phina.display.CanvasRenderer(this.canvas);\n      this.domElement = this.canvas.domElement;\n\n      this.on('enterframe', function() {\n        var temp = this._worldMatrix;\n        this._worldMatrix = null;\n        this.renderer.render(this);\n        this._worldMatrix = temp;\n      });\n    },\n\n    draw: function(canvas) {\n      var image = this.domElement;\n      canvas.context.drawImage(image,\n        0, 0, image.width, image.height,\n        -this.width*this.originX, -this.height*this.originY, this.width, this.height\n        );\n    },\n  });\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class\n   */\n  phina.define('phina.display.ThreeLayer', {\n    superClass: 'phina.display.Layer',\n\n    scene: null,\n    camera: null,\n    light: null,\n    renderer: null,\n\n    init: function(options) {\n      this.superInit(options);\n\n      this.scene = new THREE.Scene();\n\n      this.camera = new THREE.PerspectiveCamera( 75, options.width / options.height, 1, 10000 );\n      this.camera.position.z = 1000;\n\n      this.light = new THREE.DirectionalLight( 0xffffff, 1 );\n      this.light.position.set( 1, 1, 1 ).normalize();\n      this.scene.add( this.light );\n\n      this.renderer = new THREE.WebGLRenderer();\n      this.renderer.setClearColor( 0xf0f0f0 );\n      this.renderer.setSize( options.width, options.height );\n\n      this.on('enterframe', function() {\n        this.renderer.render( this.scene, this.camera );\n      });\n\n      this.domElement = this.renderer.domElement;\n    },\n  });\n});\n\n\n\n\nphina.namespace(function() {\n  \n  phina.define('phina.display.CanvasRenderer', {\n\n    init: function(canvas) {\n      this.canvas = canvas;\n      this._context = this.canvas.context;\n    },\n    render: function(scene) {\n      this.canvas.clear();\n      if (scene.backgroundColor) {\n        this.canvas.clearColor(scene.backgroundColor);\n      }\n      \n      this._context.save();\n      this.renderChildren(scene);\n      this._context.restore();\n    },\n    \n    renderChildren: function(obj) {\n      // 子供たちも実行\n      if (obj.children.length > 0) {\n        var tempChildren = obj.children.slice();\n        for (var i=0,len=tempChildren.length; i<len; ++i) {\n          this.renderObject(tempChildren[i]);\n        }\n      }\n    },\n\n    renderObject: function(obj) {\n      if (obj.visible === false) return ;\n\n      obj._calcWorldMatrix && obj._calcWorldMatrix();\n      obj._calcWorldAlpha && obj._calcWorldAlpha();\n\n      var context = this.canvas.context;\n\n      context.globalAlpha = obj._worldAlpha;\n      context.globalCompositeOperation = obj.blendMode;\n\n      if (obj._worldMatrix) {\n        // 行列をセット\n        var m = obj._worldMatrix;\n        context.setTransform( m.m00, m.m10, m.m01, m.m11, m.m02, m.m12 );\n      }\n\n      if (obj.clip) {\n\n        context.save();\n\n        obj.clip(this.canvas);\n        context.clip();\n\n        if (obj.draw) obj.draw(this.canvas);\n\n        // 子供たちも実行\n        if (obj.renderChildBySelf === false && obj.children.length > 0) {\n            var tempChildren = obj.children.slice();\n            for (var i=0,len=tempChildren.length; i<len; ++i) {\n                this.renderObject(tempChildren[i]);\n            }\n        }\n\n        context.restore();\n      }\n      else {\n        if (obj.draw) obj.draw(this.canvas);\n\n        // 子供たちも実行\n        if (obj.renderChildBySelf === false && obj.children.length > 0) {\n          var tempChildren = obj.children.slice();\n          for (var i=0,len=tempChildren.length; i<len; ++i) {\n            this.renderObject(tempChildren[i]);\n          }\n        }\n\n      }\n    },\n\n  });\n\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.DomApp\n   * @extends phina.app.BaseApp\n   */\n  phina.define('phina.display.DomApp', {\n    superClass: 'phina.app.BaseApp',\n\n    domElement: null,\n\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      this.superInit(options);\n\n      if (options.domElement) {\n        this.domElement = options.domElement;\n      }\n      else {\n        if (options.query) {\n          this.domElement = document.querySelector(options.query);\n        }\n        else {\n          console.assert('error');\n        }\n      }\n\n      if (options.fps !== undefined) {\n        this.fps = options.fps;\n      }\n\n      this.mouse = phina.input.Mouse(this.domElement);\n      this.touch = phina.input.Touch(this.domElement);\n      this.touchList = phina.input.TouchList(this.domElement, 5);\n      this.keyboard = phina.input.Keyboard(document);\n      // 加速度センサーを生成\n      this.accelerometer = phina.input.Accelerometer();\n\n      // ポインタをセット(PC では Mouse, Mobile では Touch)\n      this.pointer = this.touch;\n      this.pointers = this.touchList.touches;\n\n      this.domElement.addEventListener(\"touchstart\", function () {\n        this.pointer = this.touch;\n        this.pointers = this.touchList.touches;\n      }.bind(this));\n      this.domElement.addEventListener(\"mouseover\", function () {\n        this.pointer = this.mouse;\n        this.pointers = [this.mouse];\n      }.bind(this));\n\n      // keyboard event\n      this.keyboard.on('keydown', function(e) {\n        this.currentScene && this.currentScene.flare('keydown', {\n          keyCode: e.keyCode,\n        });\n      }.bind(this));\n      this.keyboard.on('keyup', function(e) {\n        this.currentScene && this.currentScene.flare('keyup', {\n          keyCode: e.keyCode,\n        });\n      }.bind(this));\n      this.keyboard.on('keypress', function(e) {\n        this.currentScene && this.currentScene.flare('keypress', {\n          keyCode: e.keyCode,\n        });\n      }.bind(this));\n\n      // click 対応\n      var eventName = phina.isMobile() ? 'touchend' : 'mouseup';\n      this.domElement.addEventListener(eventName, this._checkClick.bind(this));\n\n      // 決定時の処理をオフにする(iPhone 時のちらつき対策)\n      this.domElement.addEventListener(\"touchstart\", function(e) { e.stop(); });\n      this.domElement.addEventListener(\"touchmove\", function(e) { e.stop(); });\n\n      // ウィンドウフォーカス時イベントリスナを登録\n      phina.global.addEventListener('focus', function() {\n        this.flare('focus');\n        this.currentScene.flare('focus');\n      }.bind(this), false);\n      // ウィンドウブラー時イベントリスナを登録\n      phina.global.addEventListener('blur', function() {\n        this.flare('blur');\n        this.currentScene.flare('blur');\n      }.bind(this), false);\n\n      // 更新関数を登録\n      this.on('enterframe', function() {\n        this.mouse.update();\n        this.touch.update();\n        this.touchList.update();\n        this.keyboard.update();\n      });\n    },\n\n    _checkClick: function(e) {\n      var _check = function(element) {\n        if (element.children.length > 0) {\n          element.children.each(function(child) {\n            _check(child);\n          });\n        }\n        if (element._clicked && element.has('click')) {\n          element.flare('click');\n        }\n        element._clicked = false;\n      };\n\n      _check(this.currentScene);\n    },\n\n  });\n\n  \n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.display.CanvasApp\n   * \n   */\n  phina.define('phina.display.CanvasApp', {\n    superClass: 'phina.display.DomApp',\n\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      options = (options || {}).$safe(phina.display.CanvasApp.defaults);\n      \n      if (!options.query && !options.domElement) {\n        options.domElement = document.createElement('canvas');\n        if (options.append) {\n          document.body.appendChild(options.domElement);\n        }\n      }\n      this.superInit(options);\n\n\n      this.gridX = phina.util.Grid({\n        width: options.width,\n        columns: options.columns,\n      });\n      this.gridY = phina.util.Grid({\n        width: options.height,\n        columns: options.columns,\n      });\n\n      this.canvas = phina.graphics.Canvas(this.domElement);\n      this.canvas.setSize(options.width, options.height);\n\n      this.backgroundColor = (options.backgroundColor !== undefined) ? options.backgroundColor : 'white';\n\n      this.replaceScene(phina.display.DisplayScene({\n        width: options.width,\n        height: options.height,\n      }));\n\n      if (options.fit) {\n        this.fitScreen();\n      }\n\n      if (options.pixelated) {\n        // チラつき防止\n        // https://drafts.csswg.org/css-images/#the-image-rendering\n        this.domElement.style.imageRendering = 'pixelated';\n      }\n\n      // pushScene, popScene 対策\n      this.on('push', function() {\n        // onenter 対策で描画しておく\n        if (this.currentScene.canvas) {\n          this._draw();\n        }\n      });\n    },\n\n    _draw: function() {\n      if (this.backgroundColor) {\n        this.canvas.clearColor(this.backgroundColor);\n      } else {\n        this.canvas.clear();\n      }\n\n      if (this.currentScene.canvas) {\n        this.currentScene._render();\n\n        this._scenes.each(function(scene) {\n          var c = scene.canvas;\n          if (c) {\n            this.canvas.context.drawImage(c.domElement, 0, 0, c.width, c.height);\n          }\n        }, this);\n      }\n    },\n\n    fitScreen: function() {\n      this.canvas.fitScreen();\n    },\n\n    _static: {\n      defaults: {\n        width: 640,\n        height: 960,\n        columns: 12,\n        fit: true,\n        append: true,\n      },\n    },\n\n  });\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.effect.Wave\n   * Button\n   */\n  phina.define('phina.effect.Wave', {\n    superClass: 'phina.display.CircleShape',\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      options = (options || {}).$safe({\n        fill: 'white',\n        stroke: false,\n      });\n\n      this.superInit(options);\n\n      var tweener = phina.accessory.Tweener().attachTo(this);\n      tweener\n        .to({scaleX:2, scaleY:2, alpha:0}, 500)\n        .call(function() {\n          this.remove();\n        }, this);\n    },\n  });\n\n});\n\n\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.ui.Button\n   * Button\n   */\n  phina.define('phina.ui.Button', {\n    superClass: 'phina.display.Shape',\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      options = (options || {}).$safe(phina.ui.Button.defaults);\n      this.superInit(options);\n\n      this.cornerRadius = options.cornerRadius;\n      this.text         = options.text;\n      this.fontColor    = options.fontColor;\n      this.fontSize     = options.fontSize;\n      this.fontWeight     = options.fontWeight;\n      this.fontFamily   = options.fontFamily;\n\n      this.setInteractive(true);\n      this.on('pointend', function() {\n        this.flare('push');\n      });\n    },\n    prerender: function(canvas) {\n      canvas.roundRect(-this.width/2, -this.height/2, this.width, this.height, this.cornerRadius);\n    },\n\n    postrender: function(canvas) {\n      var context = canvas.context;\n      // text\n      var font = \"{fontWeight} {fontSize}px {fontFamily}\".format(this);\n      context.font = font;\n      context.textAlign = 'center';\n      context.textBaseline = 'middle';\n      context.fillStyle = this.fontColor;\n      context.fillText(this.text, 0, 0);\n    },\n\n    _static: {\n      defaults: {\n        width: 200,\n        height: 80,\n        backgroundColor: 'transparent',\n        fill: 'hsl(200, 80%, 60%)',\n        stroke: null,\n\n        cornerRadius: 8,\n        text: 'Hello',\n        fontColor: 'white',\n        fontSize: 32,\n        fontWeight: '',\n        fontFamily: \"'HiraKakuProN-W3'\", // Hiragino or Helvetica,\n      },\n    },\n\n    _defined: function() {\n      phina.display.Shape.watchRenderProperty.call(this, 'cornerRadius');\n      phina.display.Shape.watchRenderProperty.call(this, 'text');\n      phina.display.Shape.watchRenderProperty.call(this, 'fontColor');\n      phina.display.Shape.watchRenderProperty.call(this, 'fontSize');\n      phina.display.Shape.watchRenderProperty.call(this, 'fontFamily');\n    },\n\n  });\n\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.ui.Gauge\n   * \n   */\n  phina.define('phina.ui.Gauge', {\n    superClass: 'phina.display.Shape',\n\n    init: function(options) {\n      options = ({}).$safe(options, {\n        width: 256,\n        height: 32,\n        backgroundColor: 'transparent',\n        fill: 'white',\n        stroke: '#aaa',\n        strokeWidth: 4,\n\n        value: 100,\n        maxValue: 100,\n        gaugeColor: '#44f',\n        cornerRadius: 0,\n      });\n\n      this.superInit(options);\n\n      this._value = options.value;\n      this.maxValue = options.maxValue;\n      this.gaugeColor = options.gaugeColor;\n      this.cornerRadius = options.cornerRadius;\n\n      this.visualValue = options.value;\n      this.animation = true;\n      this.animationTime = 1*1000;\n    },\n\n    /**\n     * 満タンかをチェック\n     */\n    isFull: function() {\n      return this.value === this.maxValue;\n    },\n\n    /**\n     * 空っぽかをチェック\n     */\n    isEmpty: function() {\n      return this.value === 0;\n    },\n\n    setValue: function(value) {\n      value = Math.clamp(value, 0, this._maxValue);\n\n      // end when now value equal value of argument\n      if (this.value === value) return ;\n\n      // fire value change event\n      this.flare('change');\n\n      this._value = value;\n\n      if (this.animation) {\n        var range = Math.abs(this.visualValue-value);\n        var time = (range/this.maxValue)*this.animationTime;\n\n        this.tweener.ontween = function() {\n          this._dirtyDraw = true;\n        }.bind(this);\n        this.tweener\n          .clear()\n          .to({'visualValue': value}, time)\n          .call(function() {\n            this.flare('changed');\n            if (this.isEmpty()) {\n              this.flare('empty');\n            }\n            else if (this.isFull()) {\n              this.flare('full');\n            }\n          }, this);\n      }\n      else {\n        this.visualValue = value;\n        this.flare('changed');\n        if (this.isEmpty()) {\n          this.flare('empty');\n        }\n        else if (this.isFull()) {\n          this.flare('full');\n        }\n      }\n    },\n\n    getRate: function() {\n      var rate = this.visualValue/this.maxValue;\n      return rate;\n    },\n\n    prerender: function(canvas) {\n      canvas.roundRect(-this.width/2, -this.height/2, this.width, this.height, this.cornerRadius);\n    },\n\n    postrender: function(canvas) {\n      var rate = this.getRate();\n      canvas.context.fillStyle = this.gaugeColor;\n      canvas.context.save();\n      canvas.context.clip();\n      canvas.fillRect(-this.width/2, -this.height/2, this.width*rate, this.height);\n      canvas.context.restore();\n    },\n\n    _accessor: {\n      value: {\n        get: function() {\n          return this._value;\n        },\n        set: function(v) {\n          this.setValue(v);\n        },\n      },\n    },\n\n    _defined: function() {\n      phina.display.Shape.watchRenderProperty.call(this, 'value');\n      phina.display.Shape.watchRenderProperty.call(this, 'maxValue');\n      phina.display.Shape.watchRenderProperty.call(this, 'gaugeColor');\n      phina.display.Shape.watchRenderProperty.call(this, 'cornerRadius');\n    },\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.ui.CircleGauge\n   * \n   */\n  phina.define('phina.ui.CircleGauge', {\n    superClass: 'phina.ui.Gauge',\n\n    init: function(options) {\n      options = (options || {}).$safe({\n        backgroundColor: 'transparent',\n        fill: '#aaa',\n        stroke: '#222',\n\n        radius: 64,\n        anticlockwise: true,\n        showPercentage: false, // TODO\n      });\n\n      this.superInit(options);\n\n      this.setBoundingType('circle');\n\n      this.radius = options.radius;\n      this.anticlockwise = options.anticlockwise;\n      this.showPercentage = options.showPercentage;\n    },\n\n    prerender: function(canvas) {\n      var rate = this.getRate();\n      var end = (Math.PI*2)*rate;\n      this.startAngle = 0;\n      this.endAngle = end;\n      \n      this.canvas.rotate(-Math.PI*0.5);\n      this.canvas.scale(1, -1);\n    },\n\n    renderFill: function(canvas) {\n      canvas.fillPie(0, 0, this.radius, this.startAngle, this.endAngle);\n    },\n\n    renderStroke: function(canvas) {\n      canvas.strokeArc(0, 0, this.radius, this.startAngle, this.endAngle);\n    },\n\n    postrender: function() {\n      // if (this.showPercentage) {\n      //   // TODO:\n      //   var left = Math.max(0, this.limit-this.time);\n      //   this.label.text = Math.ceil(left/1000)+'';\n      // }\n    },\n\n  });\n\n\n\n});\n\n\n\nphina.namespace(function() {\n\n  var textWidthCache = {};\n\n  var LabelArea = phina.define('phina.ui.LabelArea', {\n    superClass: 'phina.display.Label',\n\n    _lineUpdate: true,\n\n    init: function(options) {\n      options = {}.$safe(options, LabelArea.defaults);\n      this.superInit(options);\n\n      this.verticalAlign = options.verticalAlign;\n      this.scroll = options.scroll || phina.geom.Vector2();\n      this.scrollX = options.scrollX;\n      this.scrollY = options.scrollY;\n    },\n\n    calcCanvasWidth: function() {\n      return this.width + this.padding * 2;\n    },\n\n    calcCanvasHeight: function() {\n      return this.height + this.padding * 2;\n    },\n    getOffsetY: function() {\n      if (typeof this.verticalAlign === 'number') {\n        return this.verticalAlign;\n      }\n      return LabelArea.verticalAlignToOffsetMap[this.verticalAlign] || 0;\n    },\n\n    getOffsetX: function() {\n      return LabelArea.alignToOffsetMap[this.align] || 0;\n    },\n\n    getTextWidthCache: function() {\n      var cache = textWidthCache[this.font];\n      return cache || (textWidthCache[this.font] = {});\n    },\n    \n    spliceLines: function(lines) {\n      var rowWidth = this.width;\n      var context = this.canvas.context;\n      context.font = this.font;\n\n      var cache = this.getTextWidthCache();\n\n      // update cache\n      this._text.each(function(ch) {\n        if (!cache[ch]) {\n          cache[ch] = context.measureText(ch).width;\n        }\n      });\n      \n      var localLines = [];\n      lines.forEach(function(line) {\n        \n        var str = '';\n        var totalWidth = 0;\n\n        // はみ出ていたら強制的に改行する\n        line.each(function(ch) {\n          var w = cache[ch];\n\n          if ((totalWidth+w) > rowWidth) {\n            localLines.push(str);\n            str = '';\n            totalWidth = 0;\n          }\n\n          str += ch;\n          totalWidth += w;\n        });\n\n        // 残りを push する\n        localLines.push(str);\n\n      });\n      \n\n      return localLines;\n    },\n    \n    getLines: function() {\n      if (this._lineUpdate === false) {\n        return this._lines;\n      }\n      this._lineUpdate = false;\n\n      var lines = (this.text + '').split('\\n');\n      if (this.width < 1) {\n        this._lines = lines;\n      }\n      else {\n        this._lines = this.spliceLines(lines);\n      }\n\n      return this._lines;\n    },\n\n    prerender: function(canvas) {\n      var context = canvas.context;\n      context.font = this.font;\n      context.textAlign = this.align;\n      context.textBaseline = this.baseline;\n\n      var text = this.text + '';\n      var lines = this.getLines();\n      var length = lines.length;\n      var width = this.width;\n      var height = this.height;\n\n      var fontSize = this.fontSize;\n      var lineSize = fontSize * this.lineHeight;\n      var offsetX = this.getOffsetX() * width;\n      var offsetY = this.getOffsetY();\n      if (offsetY === 0) {\n        offsetY = -Math.floor(length / 2) * lineSize;\n        offsetY += ((length + 1) % 2) * (lineSize / 2);\n      }\n      else if (offsetY < 0) {\n        offsetY *= height;\n      }\n      else {\n        offsetY = offsetY * height - length * lineSize + lineSize;\n      }\n\n      offsetY -= this.scrollY;\n      offsetX -= this.scrollX;\n      var start = (offsetY + height / 2) / -lineSize | 0;\n      if (start < 0) { start = 0; }\n\n      var end = (height / 2 - offsetY + lineSize * 2) / lineSize | 0;\n      lines = lines.filter(function(line, i) {\n        return start <= i && end > i;\n      });\n\n      this.lines = lines;\n      this.offsetX = offsetX;\n      this.offsetY = offsetY;\n      this.lineSize = lineSize;\n      this.start = start;\n    },\n\n    renderFill: function(canvas) {\n      var context = canvas.context;\n      var offsetX = this.offsetX;\n      var offsetY = this.offsetY;\n      var lineSize = this.lineSize;\n      var start = this.start;\n      this.lines.forEach(function(line, i) {\n        context.fillText(line, offsetX, (start + i) * lineSize + offsetY);\n      }, this);\n    },\n\n    renderStroke: function(canvas) {\n      var context = canvas.context;\n      var offsetX = this.offsetX;\n      var offsetY = this.offsetY;\n      var lineSize = this.lineSize;\n      var start = this.start;\n      this.lines.forEach(function(line, i) {\n        context.strokeText(line, offsetX, (start + i) * lineSize + offsetY);\n      }, this);\n    },\n\n    _accessor: {\n      text: {\n        get: function() {\n          return this._text;\n        },\n        set: function(v) {\n          this._text = v;\n        }\n      },\n\n      scrollX: {\n        get: function() {\n          return this.scroll.x;\n        },\n        set: function(v) {\n          this.scroll.x = v;\n        },\n      },\n\n      scrollY: {\n        get: function() {\n          return this.scroll.y;\n        },\n        set: function(v) {\n          this.scroll.y = v;\n        },\n      },\n    },\n    _static: {\n      defaults: {\n        verticalAlign: 'top',\n        align: 'left',\n        baseline: 'top',\n        width: 320,\n        height: 320,\n        scrollX: 0,\n        scrollY: 0,\n      },\n      alignToOffsetMap: {\n        start: -0.5,\n        left: -0.5,\n        center: 0,\n        end: 0.5,\n        right: 0.5,\n      },\n\n      verticalAlignToOffsetMap: {\n        top: -0.5,\n        center: 0,\n        middle: 0,\n        bottom: 0.5,\n      },\n    },\n\n    _defined: function() {\n      var func = function(newVal, oldVal) {\n        if((this._lineUpdate === false) && (newVal !== oldVal)){\n          this._lineUpdate = true;\n        }\n      };\n\n      [\n        'text',\n        'width',\n        'fontSize',\n        'fontWeight',\n        'fontFamily'\n      ].forEach(function(key) {\n        this.$watch(key, func);\n      }, this.prototype);\n\n      phina.display.Shape.watchRenderProperties.call(this ,[\n        'verticalAlign',\n        'text',\n        'scroll',\n        'scrollX',\n        'scrollY'\n      ]);\n    },\n\n\n    enableScroll: function() {\n      //   this.setInteractive(true);\n      //   var physical = phina.accessory.Physical();\n      //   physical.attachTo(this);\n      //   physical.friction = 0.8;\n      //   var lastForce = 0;\n      //   var lastMove = 0;\n      //   this.on('pointstart', function(e){\n      //     lastForce = physical.velocity.y;\n      //     lastMove = 0;\n      //     physical.force(0, 0);\n      //   });\n      //   this.on('pointmove', function(e){\n      //     var p = e.pointer.deltaPosition;\n      //     lastMove = p.y;\n      //     this.scrollY += lastMove;\n      //   });\n\n      //   this.on('pointend', function(e){\n      //     physical.force(0, lastForce + lastMove);\n      //   });\n\n      return this;\n    },\n\n  });\n\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.ManagerScene\n   * \n   */\n  phina.define('phina.game.ManagerScene', {\n    superClass: 'phina.app.Scene',\n    /**\n     * @constructor\n     */\n    init: function(params) {\n      this.superInit();\n\n      this.setScenes(params.scenes);\n\n      this.on(\"enter\", function() {\n        this.gotoScene(params.startLabel || 0);\n      }.bind(this));\n\n      this.on(\"resume\", this.onnext.bind(this));\n\n      this.commonArguments = {};\n    },\n\n\n    /**\n     * scenes をセット\n     */\n    setScenes: function(scenes) {\n      this.scenes = scenes;\n      this.sceneIndex = 0;\n\n      return this;\n    },\n\n\n    replaceScene: function(label, args) {\n      var index = (typeof label == 'string') ? this.labelToIndex(label) : label||0;\n\n      var data = this.scenes[index];\n\n      if (!data) {\n        console.error('phina.js error: `{0}` に対応するシーンがありません.'.format(label));\n      }\n\n      var klass = phina.using(data.className);\n      if (typeof klass !== 'function') {\n        klass = phina.using('phina.game.' + data.className);\n      }\n\n      var initArguments = {}.$extend(data.arguments, args);\n      var scene = klass.call(null, initArguments);\n      if (!scene.nextLabel) {\n          scene.nextLabel = data.nextLabel;\n      }\n      if (!scene.nextArguments) {\n          scene.nextArguments = data.nextArguments;\n      }\n      this.app.replaceScene(scene);\n\n      this.sceneIndex = index;\n\n      return this;\n    },\n\n\n    /**\n     * index(or label) のシーンへ飛ぶ\n     */\n    gotoScene: function(label, args) {\n      var index = (typeof label == 'string') ? this.labelToIndex(label) : label||0;\n\n      var data = this.scenes[index];\n\n      if (!data) {\n        console.error('phina.js error: `{0}` に対応するシーンがありません.'.format(label));\n      }\n\n      var klass = phina.using(data.className);\n      if (typeof klass !== 'function') {\n        klass = phina.using('phina.game.' + data.className);\n      }\n\n      var initArguments = {}.$extend(data.arguments, args);\n      var scene = klass.call(null, initArguments);\n      if (!scene.nextLabel) {\n          scene.nextLabel = data.nextLabel;\n      }\n      if (!scene.nextArguments) {\n          scene.nextArguments = data.nextArguments;\n      }\n      this.app.pushScene(scene);\n\n      this.sceneIndex = index;\n\n      return this;\n    },\n\n    /**\n     * 次のシーンへ飛ぶ\n     */\n    gotoNext: function(args) {\n      var data = this.scenes[this.sceneIndex];\n      var nextIndex = null;\n\n      // 次のラベルが設定されていた場合\n      if (data.nextLabel) {\n          nextIndex = this.labelToIndex(data.nextLabel);\n      }\n      // 次のシーンに遷移\n      else if (this.sceneIndex+1 < this.scenes.length) {\n          nextIndex = this.sceneIndex+1;\n      }\n\n      if (nextIndex !== null) {\n          this.gotoScene(nextIndex, args);\n      }\n      else {\n          this.flare(\"finish\");\n      }\n\n      return this;\n    },\n\n    /**\n     * シーンインデックスを取得\n     */\n    getCurrentIndex: function() {\n      return this.sceneIndex;\n    },\n\n    /**\n     * シーンラベルを取得\n     */\n    getCurrentLabel: function() {\n      return this.scenes[this.sceneIndex].label;\n    },\n\n    /**\n     * ラベルからインデックスに変換\n     */\n    labelToIndex: function(label) {\n      var data = this.scenes.filter(function(data) {\n        return data.label == label;\n      })[0];\n\n      return this.scenes.indexOf(data);\n    },\n\n    /**\n     * インデックスからラベルに変換\n     */\n    indexToLabel: function(index) {\n      return this.scenes[index].label;\n    },\n\n    onnext: function(e) {\n      var nextLabel = e.prevScene.nextLabel;\n      var nextArguments = e.prevScene.nextArguments;\n      if (nextLabel) {\n        this.gotoScene(nextLabel, nextArguments);\n      }\n      else {\n        this.gotoNext(nextArguments);\n      }\n    },\n\n  });\n\n});\n\n/*\n *\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.SplashScene\n   * \n   */\n  phina.define('phina.game.SplashScene', {\n    superClass: 'phina.display.DisplayScene',\n\n    init: function(options) {\n      var defaults = phina.game.SplashScene.defaults;\n      this.superInit(options);\n\n      var texture = phina.asset.Texture();\n      texture.load(defaults.imageURL).then(function() {\n        this._init();\n      }.bind(this));\n      this.texture = texture;\n    },\n\n    _init: function() {\n      this.sprite = phina.display.Sprite(this.texture).addChildTo(this);\n\n      this.sprite.setPosition(this.gridX.center(), this.gridY.center());\n      this.sprite.alpha = 0;\n\n      this.sprite.tweener\n        .clear()\n        .to({alpha:1}, 500, 'easeOutCubic')\n        .wait(1000)\n        .to({alpha:0}, 500, 'easeOutCubic')\n        .wait(250)\n        .call(function() {\n          this.exit();\n        }, this)\n        ;\n    },\n\n    _static: {\n      defaults: {\n        imageURL: 'http://cdn.rawgit.com/phi-jp/phina.js/develop/logo.png',\n      },\n    },\n  });\n\n});\n\n/*\n * TitleScene\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.TitleScene\n   * \n   */\n  phina.define('phina.game.TitleScene', {\n    superClass: 'phina.display.DisplayScene',\n    /**\n     * @constructor\n     */\n    init: function(params) {\n      params = ({}).$safe(params, phina.game.TitleScene.defaults);\n      this.superInit(params);\n\n      this.backgroundColor = params.backgroundColor;\n\n      this.fromJSON({\n        children: {\n          titleLabel: {\n            className: 'phina.display.Label',\n            arguments: {\n              text: params.title,\n              fill: params.fontColor,\n              stroke: false,\n              fontSize: 64,\n            },\n            x: this.gridX.center(),\n            y: this.gridY.span(4),\n          }\n        }\n      });\n\n      if (params.exitType === 'touch') {\n        this.fromJSON({\n          children: {\n            touchLabel: {\n              className: 'phina.display.Label',\n              arguments: {\n                text: \"TOUCH START\",\n                fill: params.fontColor,\n                stroke: false,\n                fontSize: 32,\n              },\n              x: this.gridX.center(),\n              y: this.gridY.span(12),\n            },\n          },\n        });\n\n        this.on('pointend', function() {\n          this.exit();\n        });\n      }\n    },\n\n    _static: {\n      defaults: {\n        title: 'phina.js games',\n        message: '',\n\n        fontColor: 'white',\n        backgroundColor: 'hsl(200, 80%, 64%)',\n        backgroundImage: '',\n\n        exitType: 'touch',\n      },\n    },\n\n  });\n\n});\n\n/*\n * ResultScene\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.ResultScene\n   *\n   */\n  phina.define('phina.game.ResultScene', {\n    superClass: 'phina.display.DisplayScene',\n    /**\n     * @constructor\n     */\n    init: function(params) {\n      params = ({}).$safe(params, phina.game.ResultScene.defaults);\n      this.superInit(params);\n\n      var message = params.message.format(params);\n\n      this.backgroundColor = params.backgroundColor;\n\n      this.fromJSON({\n        children: {\n          scoreText: {\n            className: 'phina.display.Label',\n            arguments: {\n              text: 'score',\n              fill: params.fontColor,\n              stroke: null,\n              fontSize: 48,\n            },\n            x: this.gridX.span(8),\n            y: this.gridY.span(4),\n          },\n          scoreLabel: {\n            className: 'phina.display.Label',\n            arguments: {\n              text: params.score+'',\n              fill: params.fontColor,\n              stroke: null,\n              fontSize: 72,\n            },\n            x: this.gridX.span(8),\n            y: this.gridY.span(6),\n          },\n\n          messageLabel: {\n            className: 'phina.display.Label',\n            arguments: {\n              text: message,\n              fill: params.fontColor,\n              stroke: null,\n              fontSize: 32,\n            },\n            x: this.gridX.center(),\n            y: this.gridY.span(9),\n          },\n\n          shareButton: {\n            className: 'phina.ui.Button',\n            arguments: [{\n              text: '★',\n              width: 128,\n              height: 128,\n              fontColor: params.fontColor,\n              fontSize: 50,\n              cornerRadius: 64,\n              fill: 'rgba(240, 240, 240, 0.5)',\n              // stroke: '#aaa',\n              // strokeWidth: 2,\n            }],\n            x: this.gridX.center(-3),\n            y: this.gridY.span(12),\n          },\n          playButton: {\n            className: 'phina.ui.Button',\n            arguments: [{\n              text: '▶',\n              width: 128,\n              height: 128,\n              fontColor: params.fontColor,\n              fontSize: 50,\n              cornerRadius: 64,\n              fill: 'rgba(240, 240, 240, 0.5)',\n              // stroke: '#aaa',\n              // strokeWidth: 2,\n            }],\n            x: this.gridX.center(3),\n            y: this.gridY.span(12),\n\n            interactive: true,\n            onpush: function() {\n              this.exit();\n            }.bind(this),\n          },\n        }\n      });\n\n      if (params.exitType === 'touch') {\n        this.on('pointend', function() {\n          this.exit();\n        });\n      }\n\n      this.shareButton.onclick = function() {\n        var text = 'Score: {0}\\n{1}'.format(params.score, message);\n        var url = phina.social.Twitter.createURL({\n          text: text,\n          hashtags: params.hashtags,\n          url: params.url,\n        });\n        window.open(url, 'share window', 'width=480, height=320');\n      };\n    },\n\n    _static: {\n      defaults: {\n        score: 16,\n\n        message: 'this is phina.js project.',\n        hashtags: 'phina_js,game,javascript',\n        url: phina.global.location && phina.global.location.href,\n\n        fontColor: 'white',\n        backgroundColor: 'hsl(200, 80%, 64%)',\n        backgroundImage: '',\n      },\n    },\n\n  });\n\n});\n\n/*\n * LoadingScene\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.LoadingScene\n   * \n   */\n  phina.define('phina.game.LoadingScene', {\n    superClass: 'phina.display.DisplayScene',\n\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      options = ({}).$safe(options, phina.game.LoadingScene.defaults);\n      this.superInit(options);\n\n      this.fromJSON({\n        children: {\n          gauge: {\n            className: 'phina.ui.Gauge',\n            arguments: {\n              value: 0,\n              width: this.width,\n              height: 12,\n              fill: '#aaa',\n              stroke: false,\n              gaugeColor: 'hsla(200, 100%, 80%, 0.8)',\n              padding: 0,\n            },\n            x: this.gridX.center(),\n            y: 0,\n            originY: 0,\n          }\n        }\n      });\n\n      var loader = phina.asset.AssetLoader();\n\n      if (options.lie) {\n        this.gauge.animationTime = 10*1000;\n        this.gauge.value = 90;\n\n        loader.onload = function() {\n          this.gauge.animationTime = 0;\n          this.gauge.value = 100;\n        }.bind(this);\n      }\n      else {\n        this.gauge.animationTime = 100;\n        loader.onprogress = function(e) {\n          this.gauge.value = e.progress * 100;\n        }.bind(this);\n      }\n\n      this.gauge.onfull = function() {\n        if (options.exitType === 'auto') {\n          this.app.popScene();\n        }\n        this.flare('loaded');\n      }.bind(this);\n\n      loader.load(options.assets);\n    },\n\n    _static: {\n      defaults: {\n        exitType: 'auto',\n\n        lie: false,\n      },\n    },\n\n  });\n\n});\n\n/*\n * CountScene\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.CountScene\n   * \n   */\n  phina.define('phina.game.CountScene', {\n    superClass: 'phina.display.DisplayScene',\n    /**\n     * @constructor\n     */\n    init: function(options) {\n      this.superInit(options);\n\n      options = (options || {}).$safe(phina.game.CountScene.defaults);\n\n      this.backgroundColor = options.backgroundColor;\n\n      this.fromJSON({\n        children: {\n          label: {\n            className: 'phina.display.Label',\n            arguments: {\n              fill: options.fontColor,\n              fontSize: options.fontSize,\n              stroke: false,\n            },\n            x: this.gridX.center(),\n            y: this.gridY.center(),\n          },\n        }\n      });\n\n      if (options.count instanceof Array) {\n        this.countList = options.count.reverse();\n      }\n      else {\n        this.countList = Array.range(1, options.count+1);\n      }\n      this.counter = this.countList.length;\n      this.exitType = options.exitType;\n\n      this._updateCount();\n    },\n\n    _updateCount: function() {\n      var endFlag = this.counter <= 0;\n      var index = --this.counter;\n\n      this.label.text = this.countList[index];\n\n      this.label.scale.set(1, 1);\n      this.label.tweener\n        .clear()\n        .to({\n          scaleX: 1,\n          scaleY: 1,\n          alpha: 1,\n        }, 250)\n        .wait(500)\n        .to({\n          scaleX: 1.5,\n          scaleY: 1.5,\n          alpha: 0.0\n        }, 250)\n        .call(function() {\n          if (this.counter <= 0) {\n            this.flare('finish');\n            if (this.exitType === 'auto') {\n              this.app.popScene();\n            }\n          }\n          else {\n            this._updateCount();\n          }\n        }, this);\n    },\n\n\n    _static: {\n      defaults: {\n        count: 3,\n\n        width: 640,\n        height: 960,\n\n        fontColor: 'white',\n        fontSize: 164,\n        backgroundColor: 'rgba(50, 50, 50, 1)',\n\n        exitType: 'auto',\n      },\n    },\n\n  });\n\n});\n\n/*\n * PauseScene\n */\n\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.PauseScene\n   *\n   */\n  phina.define('phina.game.PauseScene', {\n    superClass: 'phina.display.DisplayScene',\n    /**\n     * @constructor\n     */\n    init: function(params) {\n      params = ({}).$safe(params, phina.game.PauseScene.defaults);\n      this.superInit(params);\n\n      this.backgroundColor = params.backgroundColor;\n\n      this.fromJSON({\n        children: {\n          text: {\n            className: 'phina.display.Label',\n            arguments: {\n              text: 'Pause',\n              fill: params.fontColor,\n              stroke: null,\n              fontSize: 48,\n            },\n            x: this.gridX.center(),\n            y: this.gridY.center(),\n          },\n        }\n      });\n\n      if (params.exitType === 'touch') {\n        this.on('pointend', function() {\n          this.exit();\n        });\n      }\n    },\n\n    _static: {\n      defaults: {\n        fontColor: 'white',\n        backgroundColor: 'hsla(0, 0%, 0%, 0.85)',\n\n        exitType: 'touch',\n      },\n    },\n\n  });\n\n});\n\nphina.namespace(function() {\n\n  /**\n   * @class phina.game.GameApp\n   * \n   */\n  phina.define('phina.game.GameApp', {\n    superClass: 'phina.display.CanvasApp',\n\n    init: function(options) {\n\n      options = (options || {}).$safe({\n        startLabel: 'title',\n      });\n      this.superInit(options);\n\n      var startLabel = options.startLabel || 'title';\n\n      var scenes = options.scenes || [\n        {\n          className: 'SplashScene',\n          label: 'splash',\n          nextLabel: 'title',\n        },\n\n        {\n          className: 'TitleScene',\n          label: 'title',\n          nextLabel: 'main',\n        },\n        {\n          className: 'MainScene',\n          label: 'main',\n          nextLabel: 'result',\n        },\n        {\n          className: 'ResultScene',\n          label: 'result',\n          nextLabel: 'title',\n        },\n      ];\n\n      scenes = scenes.each(function(s) {\n        s.arguments = s.arguments || options;\n      });\n\n      var scene = phina.game.ManagerScene({\n        startLabel: startLabel,\n        scenes: scenes,\n      });\n\n      if (options.assets) {\n        var loadingOptions = ({}).$extend(options, {\n          exitType: '',\n        });\n        var loadingClass = phina.global.LoadingScene || phina.game.LoadingScene;\n        var loading = loadingClass(loadingOptions);\n        this.replaceScene(loading);\n\n        loading.onloaded = function() {\n          this.replaceScene(scene);\n          if (options.debug) {\n            this._enableDebugger();\n          }\n        }.bind(this);\n\n      }\n      else {\n        this.replaceScene(scene);\n        if (options.debug) {\n          this._enableDebugger();\n        }\n      }\n\n      // 自動でポーズする\n      if (options.autoPause) {\n        this.on('blur', function() {\n          var pauseScene = phina.game.PauseScene();\n          this.pushScene(pauseScene);\n        });\n      }\n    },\n\n    _enableDebugger: function() {\n      if (this.gui) return ;\n\n      this.enableDatGUI(function(gui) {\n        var f = gui.addFolder('scenes');\n        var funcs = {};\n        this.rootScene.scenes.each(function(scene) {\n          funcs[scene.label] = function() {\n            this.rootScene.replaceScene(scene.label);\n            console.log(this._scenes.length);\n          }.bind(this);\n          return scene;\n        }, this);\n\n        funcs.forIn(function(key, value) {\n          f.add(funcs, key);\n        });\n        f.open();\n\n        this.gui = gui;\n      }.bind(this));\n    },\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  var BASE_URL = 'http://';\n\n  /**\n   * @class phina.social.Twitter\n   * \n   */\n  phina.define('phina.social.Twitter', {\n    /**\n     * @constructor\n     */\n    init: function(options) {\n    },\n\n    _static: {\n      baseURL: 'http://twitter.com/intent',\n      defaults: {\n        // type: 'tweet',\n        text: 'Hello, world!',\n        // screen_name: 'phi_jp',\n        hashtags: 'javascript,phina',\n        // url: 'http://github.com/phi-jp/phina.js',\n        url: phina.global.location && phina.global.location.href,\n        // via: 'phi_jp',\n      },\n\n      createURL: function(options) {\n        options = (options || {}).$safe(this.defaults);\n\n        var queries = [];\n        var euc = encodeURIComponent;\n        options.forIn(function(key, value) {\n          var str = key + '=' + euc(value);\n          queries.push(str);\n        });\n\n        var url = '{baseURL}/{type}?{query}'.format({\n          baseURL: this.baseURL,\n          // type: options.type,\n          type: 'tweet',\n          query: queries.join('&'),\n        });\n\n        return url;\n      },\n    }\n  });\n\n});\n\n\nphina.namespace(function() {\n\n  if (!phina.global.Box2D) {\n    return ;\n  }\n\n  // http://box2dweb-doc.readthedocs.org/ja/latest/00_ready.html#id2\n  phina.box2d = {\n    b2: {\n      Vec2          : Box2D.Common.Math.b2Vec2,\n      AABB          : Box2D.Collision.b2AABB,\n      BodyDef       : Box2D.Dynamics.b2BodyDef,\n      Body          : Box2D.Dynamics.b2Body,\n      FixtureDef    : Box2D.Dynamics.b2FixtureDef,\n      Fixture       : Box2D.Dynamics.b2Fixture,\n      World         : Box2D.Dynamics.b2World,\n      MassData      : Box2D.Collision.Shapes.b2MassData,\n      PolygonShape  : Box2D.Collision.Shapes.b2PolygonShape,\n      CircleShape   : Box2D.Collision.Shapes.b2CircleShape,\n      DebugDraw     : Box2D.Dynamics.b2DebugDraw,\n      MouseJointDef : Box2D.Dynamics.Joints.b2MouseJointDef\n    },\n  };\n\n  var b2 = phina.box2d.b2;\n\n  /**\n   * @class\n   */\n  phina.define('phina.box2d.Box2dLayer', {\n    superClass: 'phina.display.Layer',\n\n\n    init: function(params) {\n      this.superInit(params);\n\n      params = (params || {}).$safe({\n        worldScale: 50, // or 50\n      });\n\n      // 重力と物理世界の設定\n      var gravity = new b2.Vec2(0, 9.8);\n      var world = new b2.World(gravity, true);\n      \n      this.world = world;\n      this.world._scale = params.worldScale;\n\n      this._setupDebugDraw();\n    },\n\n    _setupDebugDraw: function() {\n      // デバッグ用スプライト\n      var debugDraw = new b2.DebugDraw();\n      debugDraw.SetSprite(this.canvas.context);\n      debugDraw.SetDrawScale(this.world._scale);\n      debugDraw.SetLineThickness(1.0);\n      debugDraw.SetAlpha(1);\n      debugDraw.SetFillAlpha(0.4);\n      debugDraw.SetFlags(b2.DebugDraw.e_shapeBit);\n      this.world.SetDebugDraw(debugDraw);\n    },\n\n    createBody: function(params) {\n      params.world = this.world;\n      var body = phina.box2d.Box2dBody(params);\n      return body;\n    },\n\n    update: function(app) {\n      // var timeStep = app.ticker.frameTime/1000;\n      var timeStep = app.ticker.deltaTime/1000;\n      var velocityIterations = 10;\n      var positionIterations = 10;\n      // 物理空間の更新\n      this.world.Step(timeStep,velocityIterations,positionIterations);\n    },\n\n    draw: function(canvas) {\n      // debug画面の更新\n      this.world.ClearForces();\n      this.world.DrawDebugData();\n      var domElement = this.canvas.domElement;\n      canvas.context.drawImage(domElement, 0, 0, domElement.width, domElement.height);\n    },\n  });\n});\n\n\n\n\nphina.namespace(function() {\n  \n  if (!phina.global.Box2D) {\n    return ;\n  }\n\n  var b2 = phina.box2d.b2;\n\n  /**\n   * @class\n   */\n  phina.define('phina.box2d.Box2dBody', {\n    superClass: 'phina.accessory.Accessory',\n\n\n    init: function(params) {\n      this.superInit();\n\n      this.world = params.world;\n      this.type = params.type;\n      this.shape = params.shape;\n\n      this._init();\n\n      this.on('attached', function() {\n        var target = this.target;\n\n        var p = new b2.Vec2(target.x/this.world._scale, target.y/this.world._scale);\n        this.body.SetPosition(p);\n        this.body.SetAngle(target.rotation * Math.PI/180);\n\n        this._bindFixture(this.target);\n      });\n    },\n\n    update: function(app) {\n      var target = this.target;\n\n      target.x = this.body.GetPosition().x * this.world._scale;\n      target.y = this.body.GetPosition().y * this.world._scale;\n      target.rotation = this.body.GetAngle() * 180/Math.PI;\n    },\n\n    _init: function() {\n      this._setupBody();\n      return this;\n    },\n\n    _setupBody: function() {\n      var self = this;\n      var world = this.world;\n      var scale = world._scale;\n      var bodyDef = new b2.BodyDef();\n      bodyDef.type = (function() {\n        return {\n          'dynamic': b2.Body.b2_dynamicBody, \n          'kinematic': b2.Body.b2_kinematicBody, \n          'static': b2.Body.b2_staticBody, \n        }[self.type || 'dynamic'];\n      })();\n      bodyDef.position.Set(0, 0);\n      var body = world.CreateBody(bodyDef);\n      this.body = body;\n\n      return this;\n    },\n\n    _bindFixture: function() {\n      var self = this;\n      var target = this.target;\n      var fixture = this.body.GetFixtureList();\n      if (fixture) {\n        this.body.DestroyFixture(fixture);\n      }\n\n      // \n      var world = this.world;\n      var scale = world._scale;\n      // shape を取得\n      var shape = (function() {\n        var shape = null;\n        if (self.shape === 'circle') {\n          shape = new b2.CircleShape(target.radius / scale);\n        }\n        else if (self.shape === 'box'){\n          shape = new b2.PolygonShape();\n          shape.SetAsBox(target.width / scale / 2, target.height / scale / 2 );\n        }\n        else {\n          shape = new b2.CircleShape(32 / scale);\n        }\n        return shape;\n      })();\n\n      var fixture = new b2.FixtureDef();\n      fixture.shape = shape;\n      // TODO: このへんは引数で指定できるようにする\n      fixture.density = 1;\n      fixture.friction = 0.3;\n      fixture.restitution = 0.5;\n      this.body.CreateFixture(fixture);\n    },\n  });\n});\n\n\n\n\nphina.namespace(function() {\n\n\n  phina.define('phina.display.CanvasElement', {\n    superClass: 'phina.display.DisplayElement',\n\n    init: function(options) {\n      this.superInit(options);\n\n      console.warn('[phina warn] CanvasElement は非推奨になりました. DisplayElement をお使いください.');\n    }\n  });\n\n\n  phina.define('phina.display.CanvasScene', {\n    superClass: 'phina.display.DisplayScene',\n\n    init: function(options) {\n      this.superInit(options);\n\n      console.warn('[phina warn] CanvasScene は非推奨になりました. DisplayScene をお使いください.');\n    }\n  });\n\n\n});\n\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}